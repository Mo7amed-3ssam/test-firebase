var qb=Object.defineProperty,Yb=Object.defineProperties;var Kb=Object.getOwnPropertyDescriptors;var $m=Object.getOwnPropertySymbols,Zb=Object.getPrototypeOf,Qb=Object.prototype.hasOwnProperty,Jb=Object.prototype.propertyIsEnumerable,Xb=Reflect.get;var Hm=(t,e,n)=>e in t?qb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})Qb.call(e,n)&&Hm(t,n,e[n]);if($m)for(var n of $m(e))Jb.call(e,n)&&Hm(t,n,e[n]);return t},H=(t,e)=>Yb(t,Kb(e));var Hn=(t,e,n)=>Xb(Zb(t),n,e);var g=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function Wm(t,e){return Object.is(t,e)}var le=null,sa=!1,oa=1,on=Symbol("SIGNAL");function U(t){let e=le;return le=t,e}function zm(){return le}var ds={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ru(t){if(sa)throw new Error("");if(le===null)return;le.consumerOnSignalRead(t);let e=le.nextProducerIndex++;if(ua(le),e<le.producerNode.length&&le.producerNode[e]!==t&&us(le)){let n=le.producerNode[e];la(n,le.producerIndexOfThis[e])}le.producerNode[e]!==t&&(le.producerNode[e]=t,le.producerIndexOfThis[e]=us(le)?Km(t,le,e):0),le.producerLastReadVersion[e]=t.version}function eT(){oa++}function Gm(t){if(!(us(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===oa)){if(!t.producerMustRecompute(t)&&!Ou(t)){t.dirty=!1,t.lastCleanEpoch=oa;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=oa}}function qm(t){if(t.liveConsumerNode===void 0)return;let e=sa;sa=!0;try{for(let n of t.liveConsumerNode)n.dirty||tT(n)}finally{sa=e}}function Ym(){return le?.consumerAllowSignalWrites!==!1}function tT(t){t.dirty=!0,qm(t),t.consumerMarkedDirty?.(t)}function ca(t){return t&&(t.nextProducerIndex=0),U(t)}function xu(t,e){if(U(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(us(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)la(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ou(t){ua(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Gm(n),r!==n.version))return!0}return!1}function Pu(t){if(ua(t),us(t))for(let e=0;e<t.producerNode.length;e++)la(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Km(t,e,n){if(Zm(t),t.liveConsumerNode.length===0&&Qm(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Km(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function la(t,e){if(Zm(t),t.liveConsumerNode.length===1&&Qm(t))for(let r=0;r<t.producerNode.length;r++)la(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ua(i),i.producerIndexOfThis[r]=e}}function us(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ua(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Zm(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Qm(t){return t.producerNode!==void 0}function Jm(t){let e=Object.create(nT);e.computation=t;let n=()=>{if(Gm(e),Ru(e),e.value===aa)throw e.error;return e.value};return n[on]=e,n}var Mu=Symbol("UNSET"),Nu=Symbol("COMPUTING"),aa=Symbol("ERRORED"),nT=H(I({},ds),{value:Mu,dirty:!0,error:null,equal:Wm,producerMustRecompute(t){return t.value===Mu||t.value===Nu},producerRecomputeValue(t){if(t.value===Nu)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Nu;let n=ca(t),r;try{r=t.computation()}catch(i){r=aa,t.error=i}finally{xu(t,n)}if(e!==Mu&&e!==aa&&r!==aa&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function rT(){throw new Error}var Xm=rT;function ev(){Xm()}function tv(t){Xm=t}var iT=null;function nv(t){let e=Object.create(iv);e.value=t;let n=()=>(Ru(e),e.value);return n[on]=e,n}function ku(t,e){Ym()||ev(),t.equal(t.value,e)||(t.value=e,sT(t))}function rv(t,e){Ym()||ev(),ku(t,e(t.value))}var iv=H(I({},ds),{equal:Wm,value:void 0});function sT(t){t.version++,eT(),qm(t),iT?.()}function N(t){return typeof t=="function"}function Br(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var da=Br(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Wn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ie=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(N(r))try{r()}catch(s){e=s instanceof da?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{sv(s)}catch(o){e=e??[],o instanceof da?e=[...e,...o.errors]:e.push(o)}}if(e)throw new da(e)}}add(e){var n;if(e&&e!==this)if(this.closed)sv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Wn(n,e)}remove(e){let{_finalizers:n}=this;n&&Wn(n,e),e instanceof t&&e._removeParent(this)}};ie.EMPTY=(()=>{let t=new ie;return t.closed=!0,t})();var Fu=ie.EMPTY;function ha(t){return t instanceof ie||t&&"closed"in t&&N(t.remove)&&N(t.add)&&N(t.unsubscribe)}function sv(t){N(t)?t():t.unsubscribe()}var it={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $r={setTimeout(t,e,...n){let{delegate:r}=$r;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=$r;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function fa(t){$r.setTimeout(()=>{let{onUnhandledError:e}=it;if(e)e(t);else throw t})}function hs(){}var ov=Lu("C",void 0,void 0);function av(t){return Lu("E",void 0,t)}function cv(t){return Lu("N",t,void 0)}function Lu(t,e,n){return{kind:t,value:e,error:n}}var zn=null;function Hr(t){if(it.useDeprecatedSynchronousErrorHandling){let e=!zn;if(e&&(zn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zn;if(zn=null,n)throw r}}else t()}function lv(t){it.useDeprecatedSynchronousErrorHandling&&zn&&(zn.errorThrown=!0,zn.error=t)}var Gn=class extends ie{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ha(e)&&e.add(this)):this.destination=cT}static create(e,n,r){return new Wr(e,n,r)}next(e){this.isStopped?ju(cv(e),this):this._next(e)}error(e){this.isStopped?ju(av(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ju(ov,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oT=Function.prototype.bind;function Vu(t,e){return oT.call(t,e)}var Uu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){pa(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){pa(r)}else pa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){pa(n)}}},Wr=class extends Gn{constructor(e,n,r){super();let i;if(N(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&it.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Vu(e.next,s),error:e.error&&Vu(e.error,s),complete:e.complete&&Vu(e.complete,s)}):i=e}this.destination=new Uu(i)}};function pa(t){it.useDeprecatedSynchronousErrorHandling?lv(t):fa(t)}function aT(t){throw t}function ju(t,e){let{onStoppedNotification:n}=it;n&&$r.setTimeout(()=>n(t,e))}var cT={closed:!0,next:hs,error:aT,complete:hs};var zr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $e(t){return t}function Bu(...t){return $u(t)}function $u(t){return t.length===0?$e:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var k=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=uT(n)?n:new Wr(n,r,i);return Hr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=uv(r),new r((i,s)=>{let o=new Wr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[zr](){return this}pipe(...n){return $u(n)(this)}toPromise(n){return n=uv(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function uv(t){var e;return(e=t??it.Promise)!==null&&e!==void 0?e:Promise}function lT(t){return t&&N(t.next)&&N(t.error)&&N(t.complete)}function uT(t){return t&&t instanceof Gn||lT(t)&&ha(t)}function Hu(t){return N(t?.lift)}function z(t){return e=>{if(Hu(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function W(t,e,n,r,i){return new Wu(t,e,n,r,i)}var Wu=class extends Gn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gr(){return z((t,e)=>{let n=null;t._refCount++;let r=W(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var qr=class extends k{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Hu(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ie;let n=this.getSubject();e.add(this.source.subscribe(W(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ie.EMPTY)}return e}refCount(){return Gr()(this)}};var dv=Br(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=(()=>{class t extends k{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ga(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new dv}next(n){Hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Fu:(this.currentObservers=null,s.push(n),new ie(()=>{this.currentObservers=null,Wn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new k;return n.source=this,n}}return t.create=(e,n)=>new ga(e,n),t})(),ga=class extends me{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Fu}};var ve=class extends me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zu={now(){return(zu.delegate||Date).now()},delegate:void 0};var ma=class extends ie{constructor(e,n){super()}schedule(e,n=0){return this}};var fs={setInterval(t,e,...n){let{delegate:r}=fs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=fs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Yr=class extends ma{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return fs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&fs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Wn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Kr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Kr.now=zu.now;var Zr=class extends Kr{constructor(e,n=Kr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Gu=new Zr(Yr);var va=class extends Yr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ya=class extends Zr{};var qu=new ya(va);var He=new k(t=>t.complete());function hv(t){return t&&N(t.schedule)}function fv(t){return t[t.length-1]}function _a(t){return N(fv(t))?t.pop():void 0}function an(t){return hv(fv(t))?t.pop():void 0}function Yu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gv(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function pv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qn(t){return this instanceof qn?(this.v=t,this):new qn(t)}function mv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(v){return new Promise(function(y,E){s.push([f,v,y,E])>1||c(f,v)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(v){h(s[0][3],v)}}function l(f){f.value instanceof qn?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function vv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof pv=="function"?pv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Ea=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ia(t){return N(t?.then)}function wa(t){return N(t[zr])}function Ca(t){return Symbol.asyncIterator&&N(t?.[Symbol.asyncIterator])}function Da(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ba=dT();function Ta(t){return N(t?.[ba])}function Sa(t){return mv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield qn(n.read());if(i)return yield qn(void 0);yield yield qn(r)}}finally{n.releaseLock()}})}function Aa(t){return N(t?.getReader)}function oe(t){if(t instanceof k)return t;if(t!=null){if(wa(t))return hT(t);if(Ea(t))return fT(t);if(Ia(t))return pT(t);if(Ca(t))return yv(t);if(Ta(t))return gT(t);if(Aa(t))return mT(t)}throw Da(t)}function hT(t){return new k(e=>{let n=t[zr]();if(N(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fT(t){return new k(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function pT(t){return new k(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,fa)})}function gT(t){return new k(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function yv(t){return new k(e=>{vT(t,e).catch(n=>e.error(n))})}function mT(t){return yv(Sa(t))}function vT(t,e){var n,r,i,s;return gv(this,void 0,void 0,function*(){try{for(n=vv(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Re(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function cn(t,e=0){return z((n,r)=>{n.subscribe(W(r,i=>Re(r,t,()=>r.next(i),e),()=>Re(r,t,()=>r.complete(),e),i=>Re(r,t,()=>r.error(i),e)))})}function ln(t,e=0){return z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function _v(t,e){return oe(t).pipe(ln(e),cn(e))}function Ev(t,e){return oe(t).pipe(ln(e),cn(e))}function Iv(t,e){return new k(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function wv(t,e){return new k(n=>{let r;return Re(n,e,()=>{r=t[ba](),Re(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>N(r?.return)&&r.return()})}function Ma(t,e){if(!t)throw new Error("Iterable cannot be null");return new k(n=>{Re(n,e,()=>{let r=t[Symbol.asyncIterator]();Re(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Cv(t,e){return Ma(Sa(t),e)}function Dv(t,e){if(t!=null){if(wa(t))return _v(t,e);if(Ea(t))return Iv(t,e);if(Ia(t))return Ev(t,e);if(Ca(t))return Ma(t,e);if(Ta(t))return wv(t,e);if(Aa(t))return Cv(t,e)}throw Da(t)}function re(t,e){return e?Dv(t,e):oe(t)}function S(...t){let e=an(t);return re(t,e)}function Qr(t,e){let n=N(t)?t:()=>t,r=i=>i.error(n());return new k(e?i=>e.schedule(r,0,i):r)}function Ku(t){return!!t&&(t instanceof k||N(t.lift)&&N(t.subscribe))}var xt=Br(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function R(t,e){return z((n,r)=>{let i=0;n.subscribe(W(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:yT}=Array;function _T(t,e){return yT(e)?t(...e):t(e)}function Na(t){return R(e=>_T(t,e))}var{isArray:ET}=Array,{getPrototypeOf:IT,prototype:wT,keys:CT}=Object;function Ra(t){if(t.length===1){let e=t[0];if(ET(e))return{args:e,keys:null};if(DT(e)){let n=CT(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function DT(t){return t&&typeof t=="object"&&IT(t)===wT}function xa(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Oa(...t){let e=an(t),n=_a(t),{args:r,keys:i}=Ra(t);if(r.length===0)return re([],e);let s=new k(bT(r,e,i?o=>xa(i,o):$e));return n?s.pipe(Na(n)):s}function bT(t,e,n=$e){return r=>{bv(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)bv(e,()=>{let l=re(t[c],e),u=!1;l.subscribe(W(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function bv(t,e,n){t?Re(n,t,e):e()}function Tv(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=v=>l<r?p(v):c.push(v),p=v=>{s&&e.next(v),l++;let y=!1;oe(n(v,u++)).subscribe(W(e,E=>{i?.(E),s?f(E):e.next(E)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){let E=c.shift();o?Re(e,o,()=>p(E)):p(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(W(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ue(t,e,n=1/0){return N(e)?ue((r,i)=>R((s,o)=>e(r,s,i,o))(oe(t(r,i))),n):(typeof e=="number"&&(n=e),z((r,i)=>Tv(r,i,t,n)))}function Zu(t=1/0){return ue($e,t)}function Sv(){return Zu(1)}function Jr(...t){return Sv()(re(t,an(t)))}function Pa(t){return new k(e=>{oe(t()).subscribe(e)})}function Qu(...t){let e=_a(t),{args:n,keys:r}=Ra(t),i=new k(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;oe(n[u]).subscribe(W(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?xa(r,a):a),s.complete())}))}});return e?i.pipe(Na(e)):i}function We(t,e){return z((n,r)=>{let i=0;n.subscribe(W(r,s=>t.call(e,s,i++)&&r.next(s)))})}function un(t){return z((e,n)=>{let r=null,i=!1,s;r=e.subscribe(W(n,void 0,void 0,o=>{s=oe(t(o,un(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Av(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(W(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function dn(t,e){return N(e)?ue(t,e,1):ue(t,1)}function hn(t){return z((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ot(t){return t<=0?()=>He:z((e,n)=>{let r=0;e.subscribe(W(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ju(t){return R(()=>t)}function ka(t=TT){return z((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function TT(){return new xt}function Yn(t){return z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function vt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?We((i,s)=>t(i,s,r)):$e,Ot(1),n?hn(e):ka(()=>new xt))}function Xr(t){return t<=0?()=>He:z((e,n)=>{let r=[];e.subscribe(W(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Xu(t,e){let n=arguments.length>=2;return r=>r.pipe(t?We((i,s)=>t(i,s,r)):$e,Xr(1),n?hn(e):ka(()=>new xt))}function ed(t,e){return z(Av(t,e,arguments.length>=2,!0))}function td(...t){let e=an(t);return z((n,r)=>{(e?Jr(t,n,e):Jr(t,n)).subscribe(r)})}function ze(t,e){return z((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(W(r,c=>{i?.unsubscribe();let l=0,u=s++;oe(t(c,u)).subscribe(i=W(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function nd(t){return z((e,n)=>{oe(t).subscribe(W(n,()=>n.complete(),hs)),!n.closed&&e.subscribe(n)})}function ae(t,e,n){let r=N(t)||e||n?{next:t,error:e,complete:n}:t;return r?z((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(W(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):$e}var ST="https://g.co/ng/security#xss",D=class extends Error{constructor(e,n){super(pc(e,n)),this.code=e}};function pc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ms(t){return{toString:t}.toString()}var Fa="__parameters__";function AT(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function MT(t,e,n){return Ms(()=>{let r=AT(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Fa)?c[Fa]:Object.defineProperty(c,Fa,{value:[]})[Fa];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ps=globalThis;function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function NT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Oe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Oe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Mv(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var RT=J({__forward_ref__:J});function _n(t){return t.__forward_ref__=_n,t.toString=function(){return Oe(this())},t}function Te(t){return hy(t)?t():t}function hy(t){return typeof t=="function"&&t.hasOwnProperty(RT)&&t.__forward_ref__===_n}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ar(t){return{providers:t.providers||[],imports:t.imports||[]}}function gc(t){return Nv(t,py)||Nv(t,gy)}function fy(t){return gc(t)!==null}function Nv(t,e){return t.hasOwnProperty(e)?t[e]:null}function xT(t){let e=t&&(t[py]||t[gy]);return e||null}function Rv(t){return t&&(t.hasOwnProperty(xv)||t.hasOwnProperty(OT))?t[xv]:null}var py=J({\u0275prov:J}),xv=J({\u0275inj:J}),gy=J({ngInjectableDef:J}),OT=J({ngInjectorDef:J}),w=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function my(t){return t&&!!t.\u0275providers}var PT=J({\u0275cmp:J}),kT=J({\u0275dir:J}),FT=J({\u0275pipe:J}),LT=J({\u0275mod:J}),za=J({\u0275fac:J}),vs=J({__NG_ELEMENT_ID__:J}),Ov=J({__NG_ENV_ID__:J});function ch(t){return typeof t=="string"?t:t==null?"":String(t)}function VT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ch(t)}function jT(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new D(-200,t)}function lh(t,e){throw new D(-201,!1)}var F=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(F||{}),yd;function vy(){return yd}function xe(t){let e=yd;return yd=t,e}function yy(t,e,n){let r=gc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&F.Optional)return null;if(e!==void 0)return e;lh(t,"Injector")}var UT={},ys=UT,_d="__NG_DI_FLAG__",Ga="ngTempTokenPath",BT="ngTokenPath",$T=/\n/gm,HT="\u0275",Pv="__source",ri;function WT(){return ri}function fn(t){let e=ri;return ri=t,e}function zT(t,e=F.Default){if(ri===void 0)throw new D(-203,!1);return ri===null?yy(t,void 0,e):ri.get(t,e&F.Optional?null:void 0,e)}function b(t,e=F.Default){return(vy()||zT)(Te(t),e)}function _(t,e=F.Default){return b(t,mc(e))}function mc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ed(t){let e=[];for(let n=0;n<t.length;n++){let r=Te(t[n]);if(Array.isArray(r)){if(r.length===0)throw new D(900,!1);let i,s=F.Default;for(let o=0;o<r.length;o++){let a=r[o],c=qT(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(b(i,s))}else e.push(b(r))}return e}function GT(t,e){return t[_d]=e,t.prototype[_d]=e,t}function qT(t){return t[_d]}function YT(t,e,n,r){let i=t[Ga];throw e[Pv]&&i.unshift(e[Pv]),t.message=KT(`
`+t.message,i,n,r),t[BT]=i,t[Ga]=null,t}function KT(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==HT?t.slice(2):t;let i=Oe(e);if(Array.isArray(e))i=e.map(Oe).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Oe(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace($T,`
  `)}`}var Fe=GT(MT("Optional"),8);function Xn(t,e){let n=t.hasOwnProperty(za);return n?t[za]:null}function uh(t,e){t.forEach(n=>Array.isArray(n)?uh(n,e):e(n))}function _y(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ZT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function QT(t,e,n){let r=Ns(t,e);return r>=0?t[r|1]=n:(r=~r,ZT(t,r,e,n)),r}function rd(t,e){let n=Ns(t,e);if(n>=0)return t[n|1]}function Ns(t,e){return JT(t,e,1)}function JT(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var si={},Ze=[],oi=new w(""),Ey=new w("",-1),Iy=new w(""),Ya=class{get(e,n=ys){if(n===ys){let r=new Error(`NullInjectorError: No provider for ${Oe(e)}!`);throw r.name="NullInjectorError",r}return n}},wy=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(wy||{}),Et=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Et||{}),mn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(mn||{});function XT(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Id(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];tS(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function eS(t){return t===3||t===4||t===6}function tS(t){return t.charCodeAt(0)===64}function _s(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?kv(t,n,i,null,e[++r]):kv(t,n,i,null,null))}}return t}function kv(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Cy="ng-template";function nS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&XT(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(dh(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function dh(t){return t.type===4&&t.value!==Cy}function rS(t,e,n){let r=t.type===4&&!n?Cy:t.value;return e===r}function iS(t,e,n){let r=4,i=t.attrs,s=i!==null?aS(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!st(r)&&!st(c))return!1;if(o&&st(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!rS(t,c,n)||c===""&&e.length===1){if(st(r))return!1;o=!0}}else if(r&8){if(i===null||!nS(t,i,c,n)){if(st(r))return!1;o=!0}}else{let l=e[++a],u=sS(c,i,dh(t),n);if(u===-1){if(st(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(st(r))return!1;o=!0}}}}return st(r)||o}function st(t){return(t&1)===0}function sS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return cS(e,t)}function oS(t,e,n=!1){for(let r=0;r<e.length;r++)if(iS(t,e[r],n))return!0;return!1}function aS(t){for(let e=0;e<t.length;e++){let n=t[e];if(eS(n))return e}return t.length}function cS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Fv(t,e){return t?":not("+e.trim()+")":e}function lS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!st(o)&&(e+=Fv(s,i),i=""),r=o,s=s||!st(r);n++}return i!==""&&(e+=Fv(s,i)),e}function uS(t){return t.map(lS).join(",")}function dS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!st(i))break;i=s}r++}return{attrs:e,classes:n}}function yi(t){return Ms(()=>{let e=My(t),n=H(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===wy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Et.Emulated,styles:t.styles||Ze,_:null,schemas:t.schemas||null,tView:null,id:""});Ny(n);let r=t.dependencies;return n.directiveDefs=Vv(r,!1),n.pipeDefs=Vv(r,!0),n.id=pS(n),n})}function hS(t){return er(t)||by(t)}function fS(t){return t!==null}function cr(t){return Ms(()=>({type:t.type,bootstrap:t.bootstrap||Ze,declarations:t.declarations||Ze,imports:t.imports||Ze,exports:t.exports||Ze,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Lv(t,e){if(t==null)return si;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=mn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==mn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Me(t){return Ms(()=>{let e=My(t);return Ny(e),e})}function Dy(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function er(t){return t[PT]||null}function by(t){return t[kT]||null}function Ty(t){return t[FT]||null}function Sy(t){let e=er(t)||by(t)||Ty(t);return e!==null?e.standalone:!1}function Ay(t,e){let n=t[LT]||null;if(!n&&e===!0)throw new Error(`Type ${Oe(t)} does not have '\u0275mod' property.`);return n}function My(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||si,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ze,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Lv(t.inputs,e),outputs:Lv(t.outputs),debugInfo:null}}function Ny(t){t.features?.forEach(e=>e(t))}function Vv(t,e){if(!t)return null;let n=e?Ty:hS;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(fS)}function pS(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ct(t){return{\u0275providers:t}}function gS(...t){return{\u0275providers:Ry(!0,t),\u0275fromNgModule:!0}}function Ry(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return uh(e,o=>{let a=o;wd(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&xy(i,s),n}function xy(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];hh(i,s=>{e(s,r)})}}function wd(t,e,n,r){if(t=Te(t),!t)return!1;let i=null,s=Rv(t),o=!s&&er(t);if(!s&&!o){let c=t.ngModule;if(s=Rv(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)wd(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{uh(s.imports,u=>{wd(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&xy(l,e)}if(!a){let l=Xn(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ze},i),e({provide:Iy,useValue:i,multi:!0},i),e({provide:oi,useValue:()=>b(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;hh(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function hh(t,e){for(let n of t)my(n)&&(n=n.\u0275providers),Array.isArray(n)?hh(n,e):e(n)}var mS=J({provide:String,useValue:J});function Oy(t){return t!==null&&typeof t=="object"&&mS in t}function vS(t){return!!(t&&t.useExisting)}function yS(t){return!!(t&&t.useFactory)}function ai(t){return typeof t=="function"}function _S(t){return!!t.useClass}var vc=new w(""),Ua={},ES={},id;function fh(){return id===void 0&&(id=new Ya),id}var Pe=class{},Es=class extends Pe{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Dd(e,o=>this.processProvider(o)),this.records.set(Ey,ei(void 0,this)),i.has("environment")&&this.records.set(Pe,ei(void 0,this));let s=this.records.get(vc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Iy,Ze,F.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=U(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),U(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=fn(this),r=xe(void 0),i;try{return e()}finally{fn(n),xe(r)}}get(e,n=ys,r=F.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ov))return e[Ov](this);r=mc(r);let i,s=fn(this),o=xe(void 0);try{if(!(r&F.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=bS(e)&&gc(e);l&&this.injectableDefInScope(l)?c=ei(Cd(e),Ua):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&F.Self?fh():this.parent;return n=r&F.Optional&&n===ys?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ga]=a[Ga]||[]).unshift(Oe(e)),s)throw a;return YT(a,e,"R3InjectorError",this.source)}else throw a}finally{xe(o),fn(s)}}resolveInjectorInitializers(){let e=U(null),n=fn(this),r=xe(void 0),i;try{let s=this.get(oi,Ze,F.Self);for(let o of s)o()}finally{fn(n),xe(r),U(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Oe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new D(205,!1)}processProvider(e){e=Te(e);let n=ai(e)?e:Te(e&&e.provide),r=wS(e);if(!ai(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ei(void 0,Ua,!0),i.factory=()=>Ed(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=U(null);try{return n.value===Ua&&(n.value=ES,n.value=n.factory()),typeof n.value=="object"&&n.value&&DS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{U(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Te(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Cd(t){let e=gc(t),n=e!==null?e.factory:Xn(t);if(n!==null)return n;if(t instanceof w)throw new D(204,!1);if(t instanceof Function)return IS(t);throw new D(204,!1)}function IS(t){if(t.length>0)throw new D(204,!1);let n=xT(t);return n!==null?()=>n.factory(t):()=>new t}function wS(t){if(Oy(t))return ei(void 0,t.useValue);{let e=Py(t);return ei(e,Ua)}}function Py(t,e,n){let r;if(ai(t)){let i=Te(t);return Xn(i)||Cd(i)}else if(Oy(t))r=()=>Te(t.useValue);else if(yS(t))r=()=>t.useFactory(...Ed(t.deps||[]));else if(vS(t))r=()=>b(Te(t.useExisting));else{let i=Te(t&&(t.useClass||t.provide));if(CS(t))r=()=>new i(...Ed(t.deps));else return Xn(i)||Cd(i)}return r}function ei(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function CS(t){return!!t.deps}function DS(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function bS(t){return typeof t=="function"||typeof t=="object"&&t instanceof w}function Dd(t,e){for(let n of t)Array.isArray(n)?Dd(n,e):n&&my(n)?Dd(n.\u0275providers,e):e(n)}function lt(t,e){t instanceof Es&&t.assertNotDestroyed();let n,r=fn(t),i=xe(void 0);try{return e()}finally{fn(r),xe(i)}}function TS(){return vy()!==void 0||WT()!=null}function SS(t){return typeof t=="function"}var Vt=0,x=1,A=2,Ae=3,ot=4,ut=5,Is=6,Ka=7,Ie=8,ci=9,Pt=10,ye=11,ws=12,jv=13,_i=14,at=15,li=16,ti=17,ui=18,yc=19,ky=20,pn=21,sd=22,Qe=23,Ge=25,Fy=1;var tr=7,Za=8,Qa=9,Se=10,Ja=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ja||{});function gn(t){return Array.isArray(t)&&typeof t[Fy]=="object"}function jt(t){return Array.isArray(t)&&t[Fy]===!0}function Ly(t){return(t.flags&4)!==0}function _c(t){return t.componentOffset>-1}function ph(t){return(t.flags&1)===1}function vn(t){return!!t.template}function bd(t){return(t[A]&512)!==0}var Td=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Vy(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function En(){return jy}function jy(t){return t.type.prototype.ngOnChanges&&(t.setInput=MS),AS}En.ngInherit=!0;function AS(){let t=By(this),e=t?.current;if(e){let n=t.previous;if(n===si)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function MS(t,e,n,r,i){let s=this.declaredInputs[r],o=By(t)||NS(t,{previous:si,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Td(l&&l.currentValue,n,c===si),Vy(t,e,i,n)}var Uy="__ngSimpleChanges__";function By(t){return t[Uy]||null}function NS(t,e){return t[Uy]=e}var Uv=null;var yt=function(t,e,n){Uv?.(t,e,n)},RS="svg",xS="math";function It(t){for(;Array.isArray(t);)t=t[Vt];return t}function $y(t,e){return It(e[t])}function Je(t,e){return It(e[t.index])}function gh(t,e){return t.data[e]}function OS(t,e){return t[e]}function In(t,e){let n=e[t];return gn(n)?n:n[Vt]}function mh(t){return(t[A]&128)===128}function PS(t){return jt(t[Ae])}function di(t,e){return e==null?null:t[e]}function Hy(t){t[ti]=0}function Wy(t){t[A]&1024||(t[A]|=1024,mh(t)&&Ic(t))}function kS(t,e){for(;t>0;)e=e[_i],t--;return e}function Ec(t){return!!(t[A]&9216||t[Qe]?.dirty)}function Sd(t){t[Pt].changeDetectionScheduler?.notify(8),t[A]&64&&(t[A]|=1024),Ec(t)&&Ic(t)}function Ic(t){t[Pt].changeDetectionScheduler?.notify(0);let e=nr(t);for(;e!==null&&!(e[A]&8192||(e[A]|=8192,!mh(e)));)e=nr(e)}function zy(t,e){if((t[A]&256)===256)throw new D(911,!1);t[pn]===null&&(t[pn]=[]),t[pn].push(e)}function FS(t,e){if(t[pn]===null)return;let n=t[pn].indexOf(e);n!==-1&&t[pn].splice(n,1)}function nr(t){let e=t[Ae];return jt(e)?e[Ae]:e}var B={lFrame:e_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Gy=!1;function LS(){return B.lFrame.elementDepthCount}function VS(){B.lFrame.elementDepthCount++}function jS(){B.lFrame.elementDepthCount--}function qy(){return B.bindingsEnabled}function US(){return B.skipHydrationRootTNode!==null}function BS(t){return B.skipHydrationRootTNode===t}function $S(){B.skipHydrationRootTNode=null}function X(){return B.lFrame.lView}function qe(){return B.lFrame.tView}function wc(t){return B.lFrame.contextLView=t,t[Ie]}function Cc(t){return B.lFrame.contextLView=null,t}function Xe(){let t=Yy();for(;t!==null&&t.type===64;)t=t.parent;return t}function Yy(){return B.lFrame.currentTNode}function HS(){let t=B.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Rs(t,e){let n=B.lFrame;n.currentTNode=t,n.isParent=e}function Ky(){return B.lFrame.isParent}function WS(){B.lFrame.isParent=!1}function Zy(){return Gy}function Bv(t){Gy=t}function zS(){let t=B.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function GS(t){return B.lFrame.bindingIndex=t}function xs(){return B.lFrame.bindingIndex++}function qS(t){let e=B.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function YS(){return B.lFrame.inI18n}function KS(t,e){let n=B.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ad(e)}function ZS(){return B.lFrame.currentDirectiveIndex}function Ad(t){B.lFrame.currentDirectiveIndex=t}function QS(t){let e=B.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Qy(t){B.lFrame.currentQueryIndex=t}function JS(t){let e=t[x];return e.type===2?e.declTNode:e.type===1?t[ut]:null}function Jy(t,e,n){if(n&F.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&F.Host);)if(i=JS(s),i===null||(s=s[_i],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=B.lFrame=Xy();return r.currentTNode=e,r.lView=t,!0}function vh(t){let e=Xy(),n=t[x];B.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Xy(){let t=B.lFrame,e=t===null?null:t.child;return e===null?e_(t):e}function e_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function t_(){let t=B.lFrame;return B.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var n_=t_;function yh(){let t=t_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function XS(t){return(B.lFrame.contextLView=kS(t,B.lFrame.contextLView))[Ie]}function lr(){return B.lFrame.selectedIndex}function rr(t){B.lFrame.selectedIndex=t}function r_(){let t=B.lFrame;return gh(t.tView,t.selectedIndex)}function e0(){return B.lFrame.currentNamespace}var i_=!0;function _h(){return i_}function Eh(t){i_=t}function t0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=jy(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Ih(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ba(t,e,n){s_(t,e,3,n)}function $a(t,e,n,r){(t[A]&3)===n&&s_(t,e,n,r)}function od(t,e){let n=t[A];(n&3)===e&&(n&=16383,n+=1,t[A]=n)}function s_(t,e,n,r){let i=r!==void 0?t[ti]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[ti]+=65536),(a<s||s==-1)&&(n0(t,n,e,c),t[ti]=(t[ti]&4294901760)+c+2),c++}function $v(t,e){yt(4,t,e);let n=U(null);try{e.call(t)}finally{U(n),yt(5,t,e)}}function n0(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[A]>>14<t[ti]>>16&&(t[A]&3)===e&&(t[A]+=16384,$v(a,s)):$v(a,s)}var ii=-1,ir=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function r0(t){return t instanceof ir}function i0(t){return(t.flags&8)!==0}function s0(t){return(t.flags&16)!==0}var ad={},Md=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=mc(r);let i=this.injector.get(e,ad,r);return i!==ad||n===ad?i:this.parentInjector.get(e,n,r)}};function o_(t){return t!==ii}function Xa(t){return t&32767}function o0(t){return t>>16}function ec(t,e){let n=o0(t),r=e;for(;n>0;)r=r[_i],n--;return r}var Nd=!0;function tc(t){let e=Nd;return Nd=t,e}var a0=256,a_=a0-1,c_=5,c0=0,_t={};function l0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(vs)&&(r=n[vs]),r==null&&(r=n[vs]=c0++);let i=r&a_,s=1<<i;e.data[t+(i>>c_)]|=s}function nc(t,e){let n=l_(t,e);if(n!==-1)return n;let r=e[x];r.firstCreatePass&&(t.injectorIndex=e.length,cd(r.data,t),cd(e,null),cd(r.blueprint,null));let i=wh(t,e),s=t.injectorIndex;if(o_(i)){let o=Xa(i),a=ec(i,e),c=a[x].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function cd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function l_(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function wh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=p_(i),r===null)return ii;if(n++,i=i[_i],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ii}function Rd(t,e,n){l0(t,e,n)}function u_(t,e,n){if(n&F.Optional||t!==void 0)return t;lh(e,"NodeInjector")}function d_(t,e,n,r){if(n&F.Optional&&r===void 0&&(r=null),!(n&(F.Self|F.Host))){let i=t[ci],s=xe(void 0);try{return i?i.get(e,r,n&F.Optional):yy(e,r,n&F.Optional)}finally{xe(s)}}return u_(r,e,n)}function h_(t,e,n,r=F.Default,i){if(t!==null){if(e[A]&2048&&!(r&F.Self)){let o=p0(t,e,n,r,_t);if(o!==_t)return o}let s=f_(t,e,n,r,_t);if(s!==_t)return s}return d_(e,n,r,i)}function f_(t,e,n,r,i){let s=h0(n);if(typeof s=="function"){if(!Jy(e,t,r))return r&F.Host?u_(i,n,r):d_(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&F.Optional))lh(n);else return o}finally{n_()}}else if(typeof s=="number"){let o=null,a=l_(t,e),c=ii,l=r&F.Host?e[at][ut]:null;for((a===-1||r&F.SkipSelf)&&(c=a===-1?wh(t,e):e[a+8],c===ii||!Wv(r,!1)?a=-1:(o=e[x],a=Xa(c),e=ec(c,e)));a!==-1;){let u=e[x];if(Hv(s,a,u.data)){let d=u0(a,e,n,o,r,l);if(d!==_t)return d}c=e[a+8],c!==ii&&Wv(r,e[x].data[a+8]===l)&&Hv(s,a,e)?(o=u,a=Xa(c),e=ec(c,e)):a=-1}}return i}function u0(t,e,n,r,i,s){let o=e[x],a=o.data[t+8],c=r==null?_c(a)&&Nd:r!=o&&(a.type&3)!==0,l=i&F.Host&&s===a,u=d0(a,o,n,c,l);return u!==null?hi(e,o,u,a):_t}function d0(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=o[c];if(f&&vn(f)&&f.type===n)return c}return null}function hi(t,e,n,r){let i=t[n],s=e.data;if(r0(i)){let o=i;o.resolving&&jT(VT(s[n]));let a=tc(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?xe(o.injectImpl):null,u=Jy(t,r,F.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&t0(n,s[n],e)}finally{l!==null&&xe(l),tc(a),o.resolving=!1,n_()}}return i}function h0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(vs)?t[vs]:void 0;return typeof e=="number"?e>=0?e&a_:f0:e}function Hv(t,e,n){let r=1<<t;return!!(n[e+(t>>c_)]&r)}function Wv(t,e){return!(t&F.Self)&&!(t&F.Host&&e)}var Jn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return h_(this._tNode,this._lView,e,mc(r),n)}};function f0(){return new Jn(Xe(),X())}function ur(t){return Ms(()=>{let e=t.prototype.constructor,n=e[za]||xd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[za]||xd(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function xd(t){return hy(t)?()=>{let e=xd(Te(t));return e&&e()}:Xn(t)}function p0(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[A]&2048&&!(o[A]&512);){let a=f_(s,o,n,r|F.Self,_t);if(a!==_t)return a;let c=s.parent;if(!c){let l=o[ky];if(l){let u=l.get(n,_t,r);if(u!==_t)return u}c=p_(o),o=o[_i]}s=c}return i}function p_(t){let e=t[x],n=e.type;return n===2?e.declTNode:n===1?t[ut]:null}function zv(t,e=null,n=null,r){let i=g_(t,e,n,r);return i.resolveInjectorInitializers(),i}function g_(t,e=null,n=null,r,i=new Set){let s=[n||Ze,gS(t)];return r=r||(typeof t=="object"?void 0:Oe(t)),new Es(s,e||fh(),r||null,i)}var Zn=class Zn{static create(e,n){if(Array.isArray(e))return zv({name:""},n,e,"");{let r=e.name??"";return zv({name:r},e.parent,e.providers,r)}}};Zn.THROW_IF_NOT_FOUND=ys,Zn.NULL=new Ya,Zn.\u0275prov=C({token:Zn,providedIn:"any",factory:()=>b(Ey)}),Zn.__NG_ELEMENT_ID__=-1;var ke=Zn;var g0=new w("");g0.__NG_ELEMENT_ID__=t=>{let e=Xe();if(e===null)throw new D(204,!1);if(e.type&2)return e.value;if(t&F.Optional)return null;throw new D(204,!1)};var m0="ngOriginalError";function ld(t){return t[m0]}var m_=!0,v_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=v0,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Od=class extends v_{constructor(e){super(),this._lView=e}onDestroy(e){return zy(this._lView,e),()=>FS(this._lView,e)}};function v0(){return new Od(X())}var wn=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ve(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Pd=class extends me{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,TS()&&(this.destroyRef=_(v_,{optional:!0})??void 0,this.pendingTasks=_(wn,{optional:!0})??void 0)}emit(e){let n=U(null);try{super.next(e)}finally{U(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ie&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ce=Pd;function rc(...t){}function y_(t){let e,n;function r(){t=rc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Gv(t){return queueMicrotask(()=>t()),()=>{t=rc}}var Ch="isAngularZone",ic=Ch+"_ID",y0=0,K=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ce(!1),this.onMicrotaskEmpty=new ce(!1),this.onStable=new ce(!1),this.onError=new ce(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=m_}=e;if(typeof Zone>"u")throw new D(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,I0(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ch)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new D(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new D(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,_0,rc,rc);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},_0={};function Dh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function E0(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){y_(()=>{t.callbackScheduled=!1,kd(t),t.isCheckStableRunning=!0,Dh(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),kd(t)}function I0(t){let e=()=>{E0(t)},n=y0++;t._inner=t._inner.fork({name:"angular",properties:{[Ch]:!0,[ic]:n,[ic+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(w0(c))return r.invokeTask(s,o,a,c);try{return qv(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Yv(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return qv(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!C0(c)&&e(),Yv(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,kd(t),Dh(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function kd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Yv(t){t._nesting--,Dh(t)}var Fd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ce,this.onMicrotaskEmpty=new ce,this.onStable=new ce,this.onError=new ce}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function w0(t){return __(t,"__ignore_ng_zone__")}function C0(t){return __(t,"__scheduler_tick__")}function __(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var kt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ld(e);for(;n&&ld(n);)n=ld(n);return n||null}},D0=new w("",{providedIn:"root",factory:()=>{let t=_(K),e=_(kt);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function b0(){return bh(Xe(),X())}function bh(t,e){return new dr(Je(t,e))}var dr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=b0;let t=e;return t})();function E_(t){return(t.flags&128)===128}var I_=new Map,T0=0;function S0(){return T0++}function A0(t){I_.set(t[yc],t)}function Ld(t){I_.delete(t[yc])}var Kv="__ngContext__";function sr(t,e){gn(e)?(t[Kv]=e[yc],A0(e)):t[Kv]=e}function w_(t){return D_(t[ws])}function C_(t){return D_(t[ot])}function D_(t){for(;t!==null&&!jt(t);)t=t[ot];return t}var Vd;function b_(t){Vd=t}function M0(){if(Vd!==void 0)return Vd;if(typeof document<"u")return document;throw new D(210,!1)}var Th=new w("",{providedIn:"root",factory:()=>N0}),N0="ng",Sh=new w(""),wt=new w("",{providedIn:"platform",factory:()=>"unknown"});var Ah=new w("",{providedIn:"root",factory:()=>M0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var R0="h",x0="b";var O0=()=>null;function Mh(t,e,n=!1){return O0(t,e,n)}var T_=!1,P0=new w("",{providedIn:"root",factory:()=>T_});var jd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ST})`}};function Nh(t){return t instanceof jd?t.changingThisBreaksApplicationSecurity:t}function S_(t){return t instanceof Function?t():t}var Ft=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ft||{}),k0;function Rh(t,e){return k0(t,e)}function ni(t,e,n,r,i){if(r!=null){let s,o=!1;jt(r)?s=r:gn(r)&&(o=!0,r=r[Vt]);let a=It(r);t===0&&n!==null?i==null?R_(e,n,a):sc(e,n,a,i||null,!0):t===1&&n!==null?sc(e,n,a,i||null,!0):t===2?Z0(e,a,o):t===3&&e.destroyNode(a),s!=null&&J0(e,t,s,n,i)}}function F0(t,e){return t.createText(e)}function L0(t,e,n){t.setValue(e,n)}function A_(t,e,n){return t.createElement(e,n)}function V0(t,e){M_(t,e),e[Vt]=null,e[ut]=null}function j0(t,e,n,r,i,s){r[Vt]=i,r[ut]=e,bc(t,r,n,1,i,s)}function M_(t,e){e[Pt].changeDetectionScheduler?.notify(9),bc(t,e,e[ye],2,null,null)}function U0(t){let e=t[ws];if(!e)return ud(t[x],t);for(;e;){let n=null;if(gn(e))n=e[ws];else{let r=e[Se];r&&(n=r)}if(!n){for(;e&&!e[ot]&&e!==t;)gn(e)&&ud(e[x],e),e=e[Ae];e===null&&(e=t),gn(e)&&ud(e[x],e),n=e&&e[ot]}e=n}}function B0(t,e,n,r){let i=Se+r,s=n.length;r>0&&(n[i-1][ot]=e),r<s-Se?(e[ot]=n[i],_y(n,Se+r,e)):(n.push(e),e[ot]=null),e[Ae]=n;let o=e[li];o!==null&&n!==o&&N_(o,e);let a=e[ui];a!==null&&a.insertView(t),Sd(e),e[A]|=128}function N_(t,e){let n=t[Qa],r=e[Ae];if(gn(r))t[A]|=Ja.HasTransplantedViews;else{let i=r[Ae][at];e[at]!==i&&(t[A]|=Ja.HasTransplantedViews)}n===null?t[Qa]=[e]:n.push(e)}function xh(t,e){let n=t[Qa],r=n.indexOf(e);n.splice(r,1)}function Cs(t,e){if(t.length<=Se)return;let n=Se+e,r=t[n];if(r){let i=r[li];i!==null&&i!==t&&xh(i,r),e>0&&(t[n-1][ot]=r[ot]);let s=qa(t,Se+e);V0(r[x],r);let o=s[ui];o!==null&&o.detachView(s[x]),r[Ae]=null,r[ot]=null,r[A]&=-129}return r}function Dc(t,e){if(!(e[A]&256)){let n=e[ye];n.destroyNode&&bc(t,e,n,3,null,null),U0(e)}}function ud(t,e){if(e[A]&256)return;let n=U(null);try{e[A]&=-129,e[A]|=256,e[Qe]&&Pu(e[Qe]),H0(t,e),$0(t,e),e[x].type===1&&e[ye].destroy();let r=e[li];if(r!==null&&jt(e[Ae])){r!==e[Ae]&&xh(r,e);let i=e[ui];i!==null&&i.detachView(t)}Ld(e)}finally{U(n)}}function $0(t,e){let n=t.cleanup,r=e[Ka];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ka]=null);let i=e[pn];if(i!==null){e[pn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function H0(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ir)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];yt(4,a,c);try{c.call(a)}finally{yt(5,a,c)}}else{yt(4,i,s);try{s.call(i)}finally{yt(5,i,s)}}}}}function W0(t,e,n){return z0(t,e.parent,n)}function z0(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Vt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Et.None||s===Et.Emulated)return null}return Je(r,n)}}function sc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function R_(t,e,n){t.appendChild(e,n)}function Zv(t,e,n,r,i){r!==null?sc(t,e,n,r,i):R_(t,e,n)}function x_(t,e){return t.parentNode(e)}function G0(t,e){return t.nextSibling(e)}function q0(t,e,n){return K0(t,e,n)}function Y0(t,e,n){return t.type&40?Je(t,n):null}var K0=Y0,Qv;function Oh(t,e,n,r){let i=W0(t,r,e),s=e[ye],o=r.parent||e[ut],a=q0(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Zv(s,i,n[c],a,!1);else Zv(s,i,n,a,!1);Qv!==void 0&&Qv(s,r,e,n,i)}function gs(t,e){if(e!==null){let n=e.type;if(n&3)return Je(e,t);if(n&4)return Ud(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return gs(t,r);{let i=t[e.index];return jt(i)?Ud(-1,i):It(i)}}else{if(n&128)return gs(t,e.next);if(n&32)return Rh(e,t)()||It(t[e.index]);{let r=O_(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=nr(t[at]);return gs(i,r)}else return gs(t,e.next)}}}return null}function O_(t,e){if(e!==null){let r=t[at][ut],i=e.projection;return r.projection[i]}return null}function Ud(t,e){let n=Se+t+1;if(n<e.length){let r=e[n],i=r[x].firstChild;if(i!==null)return gs(r,i)}return e[tr]}function Z0(t,e,n){t.removeChild(null,e,n)}function Ph(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&sr(It(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Ph(t,e,n.child,r,i,s,!1),ni(e,t,i,a,s);else if(c&32){let l=Rh(n,r),u;for(;u=l();)ni(e,t,i,u,s);ni(e,t,i,a,s)}else c&16?Q0(t,e,r,n,i,s):ni(e,t,i,a,s);n=o?n.projectionNext:n.next}}function bc(t,e,n,r,i,s){Ph(n,r,t.firstChild,e,i,s,!1)}function Q0(t,e,n,r,i,s){let o=n[at],c=o[ut].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ni(e,t,i,u,s)}else{let l=c,u=o[Ae];E_(r)&&(l.flags|=128),Ph(t,e,l,u,i,s,!0)}}function J0(t,e,n,r,i){let s=n[tr],o=It(n);s!==o&&ni(e,t,r,s,i);for(let a=Se;a<n.length;a++){let c=n[a];bc(c[x],c,t,e,r,s)}}function X0(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ft.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ft.Important),t.setStyle(n,r,i,s))}}function eA(t,e,n){t.setAttribute(e,"style",n)}function P_(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function k_(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Id(t,e,r),i!==null&&P_(t,e,i),s!==null&&eA(t,e,s)}var Cn={};function Dn(t=1){F_(qe(),X(),lr()+t,!1)}function F_(t,e,n,r){if(!r)if((e[A]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ba(e,s,n)}else{let s=t.preOrderHooks;s!==null&&$a(e,s,0,n)}rr(n)}function ee(t,e=F.Default){let n=X();if(n===null)return b(t,e);let r=Xe();return h_(r,n,Te(t),e)}function L_(t,e,n,r,i,s){let o=U(null);try{let a=null;i&mn.SignalBased&&(a=e[r][on]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&mn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Vy(e,a,r,s)}finally{U(o)}}function tA(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)rr(~i);else{let s=i,o=n[++r],a=n[++r];KS(o,s);let c=e[s];a(2,c)}}}finally{rr(-1)}}function Tc(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Vt]=i,d[A]=r|4|128|8|64,(l!==null||t&&t[A]&2048)&&(d[A]|=2048),Hy(d),d[Ae]=d[_i]=t,d[Ie]=n,d[Pt]=o||t&&t[Pt],d[ye]=a||t&&t[ye],d[ci]=c||t&&t[ci]||null,d[ut]=s,d[yc]=S0(),d[Is]=u,d[ky]=l,d[at]=e.type==2?t[at]:d,d}function Sc(t,e,n,r,i){let s=t.data[e];if(s===null)s=nA(t,e,n,r,i),YS()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=HS();s.injectorIndex=o===null?-1:o.injectorIndex}return Rs(s,!0),s}function nA(t,e,n,r,i){let s=Yy(),o=Ky(),a=o?s:s&&s.parent,c=t.data[e]=aA(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function V_(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function j_(t,e,n,r,i){let s=lr(),o=r&2;try{rr(-1),o&&e.length>Ge&&F_(t,e,Ge,!1),yt(o?2:0,i),n(r,i)}finally{rr(s),yt(o?3:1,i)}}function U_(t,e,n){if(Ly(e)){let r=U(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{U(r)}}}function B_(t,e,n){qy()&&(pA(t,e,n,Je(n,e)),(n.flags&64)===64&&G_(t,e,n))}function $_(t,e,n=Je){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function H_(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=kh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function kh(t,e,n,r,i,s,o,a,c,l,u){let d=Ge+r,h=d+i,f=rA(d,h),p=typeof l=="function"?l():l;return f[x]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function rA(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Cn);return n}function iA(t,e,n,r){let s=r.get(P0,T_)||n===Et.ShadowDom,o=t.selectRootElement(e,s);return sA(o),o}function sA(t){oA(t)}var oA=()=>null;function aA(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return US()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Jv(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=mn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Xv(r,n,l,a,c):Xv(r,n,l,a)}return r}function Xv(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function cA(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=Jv(0,d.inputs,u,c,f),l=Jv(1,d.outputs,u,l,p);let v=c!==null&&o!==null&&!dh(e)?bA(c,u,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function lA(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function uA(t,e,n,r,i,s,o,a){let c=Je(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Fh(t,n,u,r,i),_c(e)&&dA(n,e.index)):e.type&3?(r=lA(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function dA(t,e){let n=In(e,t);n[A]&16||(n[A]|=64)}function W_(t,e,n,r){if(qy()){let i=r===null?null:{"":-1},s=mA(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&z_(t,e,n,o,i,a),i&&vA(n,r,i)}n.mergedAttrs=_s(n.mergedAttrs,n.attrs)}function z_(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Rd(nc(n,e),t,r[l].type);_A(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=V_(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=_s(n.mergedAttrs,u.hostAttrs),EA(t,n,e,c,u),yA(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}cA(t,n,s)}function hA(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;fA(o)!=a&&o.push(a),o.push(n,r,s)}}function fA(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function pA(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;_c(n)&&IA(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||nc(n,e),sr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=hi(e,t,a,n);if(sr(l,e),o!==null&&DA(e,a-i,l,c,n,o),vn(c)){let u=In(n.index,e);u[Ie]=hi(e,t,a,n)}}}function G_(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=ZS();try{rr(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Ad(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&gA(c,l)}}finally{rr(-1),Ad(o)}}function gA(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function mA(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(oS(e,o.selectors,!1))if(r||(r=[]),vn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Bd(t,e,c)}else r.unshift(o),Bd(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Bd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function vA(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new D(-301,!1);r.push(e[i],s)}}}function yA(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vn(e)&&(n[""]=t)}}function _A(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function EA(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Xn(i.type,!0)),o=new ir(s,vn(i),ee);t.blueprint[r]=o,n[r]=o,hA(t,e,r,V_(t,n,i.hostVars,Cn),i)}function IA(t,e,n){let r=Je(e,t),i=H_(n),s=t[Pt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Ac(t,Tc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function wA(t,e,n,r,i,s){let o=Je(t,e);CA(e[ye],o,s,t.value,n,r,i)}function CA(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?ch(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function DA(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];L_(r,n,c,l,u,d)}}function bA(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function q_(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Y_(t,e){let n=t.contentQueries;if(n!==null){let r=U(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Qy(s),a.contentQueries(2,e[o],o)}}}finally{U(r)}}}function Ac(t,e){return t[ws]?t[jv][ot]=e:t[ws]=e,t[jv]=e,e}function $d(t,e,n){Qy(0);let r=U(null);try{e(t,n)}finally{U(r)}}function TA(t){return t[Ka]??=[]}function SA(t){return t.cleanup??=[]}function K_(t,e){let n=t[ci],r=n?n.get(kt,null):null;r&&r.handleError(e)}function Fh(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];L_(u,l,r,a,c,i)}}function AA(t,e,n){let r=$y(e,t);L0(t[ye],r,n)}function MA(t,e){let n=In(e,t),r=n[x];NA(r,n);let i=n[Vt];i!==null&&n[Is]===null&&(n[Is]=Mh(i,n[ci])),Lh(r,n,n[Ie])}function NA(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Lh(t,e,n){vh(e);try{let r=t.viewQuery;r!==null&&$d(1,r,n);let i=t.template;i!==null&&j_(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ui]?.finishViewCreation(t),t.staticContentQueries&&Y_(t,e),t.staticViewQueries&&$d(2,t.viewQuery,n);let s=t.components;s!==null&&RA(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[A]&=-5,yh()}}function RA(t,e){for(let n=0;n<e.length;n++)MA(t,e[n])}function Vh(t,e,n,r){let i=U(null);try{let s=e.tView,a=t[A]&4096?4096:16,c=Tc(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[li]=l;let u=t[ui];return u!==null&&(c[ui]=u.createEmbeddedView(s)),Lh(s,c,n),c}finally{U(i)}}function Z_(t,e){let n=Se+e;if(n<t.length)return t[n]}function Ds(t,e){return!e||e.firstChild===null||E_(t)}function Mc(t,e,n,r=!0){let i=e[x];if(B0(i,e,t,n),r){let o=Ud(n,t),a=e[ye],c=x_(a,t[tr]);c!==null&&j0(i,t[ut],a,e,c,o)}let s=e[Is];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Q_(t,e){let n=Cs(t,e);return n!==void 0&&Dc(n[x],n),n}function oc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(It(s)),jt(s)&&xA(s,r);let o=n.type;if(o&8)oc(t,e,n.child,r);else if(o&32){let a=Rh(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=O_(e,n);if(Array.isArray(a))r.push(...a);else{let c=nr(e[at]);oc(c[x],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function xA(t,e){for(let n=Se;n<t.length;n++){let r=t[n],i=r[x].firstChild;i!==null&&oc(r[x],r,i,e)}t[tr]!==t[Vt]&&e.push(t[tr])}var J_=[];function OA(t){return t[Qe]??PA(t)}function PA(t){let e=J_.pop()??Object.create(FA);return e.lView=t,e}function kA(t){t.lView[Qe]!==t&&(t.lView=null,J_.push(t))}var FA=H(I({},ds),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ic(t.lView)},consumerOnSignalRead(){this.lView[Qe]=this}});function LA(t){let e=t[Qe]??Object.create(VA);return e.lView=t,e}var VA=H(I({},ds),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=nr(t.lView);for(;e&&!X_(e[x]);)e=nr(e);e&&Wy(e)},consumerOnSignalRead(){this.lView[Qe]=this}});function X_(t){return t.type!==2}var jA=100;function eE(t,e=!0,n=0){let r=t[Pt],i=r.rendererFactory,s=!1;s||i.begin?.();try{UA(t,n)}catch(o){throw e&&K_(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function UA(t,e){let n=Zy();try{Bv(!0),Hd(t,e);let r=0;for(;Ec(t);){if(r===jA)throw new D(103,!1);r++,Hd(t,1)}}finally{Bv(n)}}function BA(t,e,n,r){let i=e[A];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Pt].inlineEffectRunner?.flush(),vh(e);let a=!0,c=null,l=null;s||(X_(t)?(l=OA(e),c=ca(l)):zm()===null?(a=!1,l=LA(e),c=ca(l)):e[Qe]&&(Pu(e[Qe]),e[Qe]=null));try{Hy(e),GS(t.bindingStartIndex),n!==null&&j_(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let f=t.preOrderCheckHooks;f!==null&&Ba(e,f,null)}else{let f=t.preOrderHooks;f!==null&&$a(e,f,0,null),od(e,0)}if(o||$A(e),tE(e,0),t.contentQueries!==null&&Y_(t,e),!s)if(u){let f=t.contentCheckHooks;f!==null&&Ba(e,f)}else{let f=t.contentHooks;f!==null&&$a(e,f,1),od(e,1)}tA(t,e);let d=t.components;d!==null&&rE(e,d,0);let h=t.viewQuery;if(h!==null&&$d(2,h,r),!s)if(u){let f=t.viewCheckHooks;f!==null&&Ba(e,f)}else{let f=t.viewHooks;f!==null&&$a(e,f,2),od(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[sd]){for(let f of e[sd])f();e[sd]=null}s||(e[A]&=-73)}catch(u){throw s||Ic(e),u}finally{l!==null&&(xu(l,c),a&&kA(l)),yh()}}function tE(t,e){for(let n=w_(t);n!==null;n=C_(n))for(let r=Se;r<n.length;r++){let i=n[r];nE(i,e)}}function $A(t){for(let e=w_(t);e!==null;e=C_(e)){if(!(e[A]&Ja.HasTransplantedViews))continue;let n=e[Qa];for(let r=0;r<n.length;r++){let i=n[r];Wy(i)}}}function HA(t,e,n){let r=In(e,t);nE(r,n)}function nE(t,e){mh(t)&&Hd(t,e)}function Hd(t,e){let r=t[x],i=t[A],s=t[Qe],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ou(s)),o||=!1,s&&(s.dirty=!1),t[A]&=-9217,o)BA(r,t,r.template,t[Ie]);else if(i&8192){tE(t,1);let a=r.components;a!==null&&rE(t,a,1)}}function rE(t,e,n){for(let r=0;r<e.length;r++)HA(t,e[r],n)}function jh(t,e){let n=Zy()?64:1088;for(t[Pt].changeDetectionScheduler?.notify(e);t;){t[A]|=n;let r=nr(t);if(bd(t)&&!r)return t;t=r}return null}var fi=class{get rootNodes(){let e=this._lView,n=e[x];return oc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ie]}set context(e){this._lView[Ie]=e}get destroyed(){return(this._lView[A]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ae];if(jt(e)){let n=e[Za],r=n?n.indexOf(this):-1;r>-1&&(Cs(e,r),qa(n,r))}this._attachedToViewContainer=!1}Dc(this._lView[x],this._lView)}onDestroy(e){zy(this._lView,e)}markForCheck(){jh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[A]&=-129}reattach(){Sd(this._lView),this._lView[A]|=128}detectChanges(){this._lView[A]|=1024,eE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new D(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=bd(this._lView),n=this._lView[li];n!==null&&!e&&xh(n,this._lView),M_(this._lView[x],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new D(902,!1);this._appRef=e;let n=bd(this._lView),r=this._lView[li];r!==null&&!n&&N_(r,this._lView),Sd(this._lView)}};var yz=new RegExp(`^(\\d+)*(${x0}|${R0})*(.*)`);var WA=()=>null;function bs(t,e){return WA(t,e)}var pi=class{},iE=new w("",{providedIn:"root",factory:()=>!1});var sE=new w(""),oE=new w(""),Wd=class{},ac=class{};function zA(t){let e=Error(`No component factory found for ${Oe(t)}.`);return e[GA]=t,e}var GA="ngComponent";var zd=class{resolveComponentFactory(e){throw zA(e)}},Wh=class Wh{};Wh.NULL=new zd;var gi=Wh,mi=class{},Ei=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>qA();let t=e;return t})();function qA(){let t=X(),e=Xe(),n=In(e.index,t);return(gn(n)?n:t)[ye]}var YA=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function Gd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Mv(i,a);else if(s==2){let c=a,l=e[++o];r=Mv(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var cc=class extends gi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=er(e);return new Ts(n,this.ngModule)}};function ey(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:mn.None;e?n.push({propName:o,templateName:r,isSignal:(a&mn.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function KA(t){let e=t.toLowerCase();return e==="svg"?RS:e==="math"?xS:null}var Ts=class extends ac{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=ey(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return ey(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=uS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=U(null);try{i=i||this.ngModule;let o=i instanceof Pe?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Md(e,o):e,c=a.get(mi,null);if(c===null)throw new D(407,!1);let l=a.get(YA,null),u=a.get(pi,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},h=c.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?iA(h,r,this.componentDef.encapsulation,a):A_(h,f,KA(f)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let y=null;p!==null&&(y=Mh(p,a,!0));let E=kh(0,null,null,1,0,null,null,null,null,null,null),T=Tc(null,E,null,v,null,null,d,h,a,null,y);vh(T);let G,L,ge=null;try{let ne=this.componentDef,be,sn=null;ne.findHostDirectiveDefs?(be=[],sn=new Map,ne.findHostDirectiveDefs(ne,be,sn),be.push(ne)):be=[ne];let ls=ZA(T,p);ge=QA(ls,p,ne,be,T,d,h),L=gh(E,Ge),p&&eM(h,ne,p,r),n!==void 0&&tM(L,this.ngContentSelectors,n),G=XA(ge,ne,be,sn,T,[nM]),Lh(E,T,null)}catch(ne){throw ge!==null&&Ld(ge),Ld(T),ne}finally{yh()}return new qd(this.componentType,G,bh(L,T),T,L)}finally{U(s)}}},qd=class extends Wd{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new fi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Fh(s[x],s,i,e,n),this.previousInputValues.set(e,n);let o=In(this._tNode.index,s);jh(o,1)}}get injector(){return new Jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZA(t,e){let n=t[x],r=Ge;return t[r]=e,Sc(n,r,2,"#host",null)}function QA(t,e,n,r,i,s,o){let a=i[x];JA(r,t,e,o);let c=null;e!==null&&(c=Mh(e,i[ci]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Tc(i,H_(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Bd(a,t,r.length-1),Ac(i,d),i[t.index]=d}function JA(t,e,n,r){for(let i of t)e.mergedAttrs=_s(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Gd(e,e.mergedAttrs,!0),n!==null&&k_(r,n,e))}function XA(t,e,n,r,i,s){let o=Xe(),a=i[x],c=Je(o,i);z_(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=hi(i,a,d,o);sr(h,i)}G_(a,i,o),c&&sr(c,i);let l=hi(i,a,o.directiveStart+o.componentOffset,o);if(t[Ie]=i[Ie]=l,s!==null)for(let u of s)u(l,e);return U_(a,o,i),l}function eM(t,e,n,r){if(r)Id(t,n,["ng-version","18.2.3"]);else{let{attrs:i,classes:s}=dS(e.selectors[0]);i&&Id(t,n,i),s&&s.length>0&&P_(t,n,s.join(" "))}}function tM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function nM(){let t=Xe();Ih(X()[x],t)}var Nc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=rM;let t=e;return t})();function rM(){let t=Xe();return sM(t,X())}var iM=Nc,aE=class extends iM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return bh(this._hostTNode,this._hostLView)}get injector(){return new Jn(this._hostTNode,this._hostLView)}get parentInjector(){let e=wh(this._hostTNode,this._hostLView);if(o_(e)){let n=ec(e,this._hostLView),r=Xa(e),i=n[x].data[r+8];return new Jn(i,n)}else return new Jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=ty(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Se}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=bs(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Ds(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!SS(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Ts(er(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let v=(o?l:this.parentInjector).get(Pe,null);v&&(s=v)}let u=er(c.componentType??{}),d=bs(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,Ds(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(PS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ae],l=new aE(c,c[ut],c[Ae]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Mc(o,i,s,r),e.attachToViewContainerRef(),_y(dd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=ty(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Cs(this._lContainer,n);r&&(qa(dd(this._lContainer),n),Dc(r[x],r))}detach(e){let n=this._adjustIndex(e,-1),r=Cs(this._lContainer,n);return r&&qa(dd(this._lContainer),n)!=null?new fi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function ty(t){return t[Za]}function dd(t){return t[Za]||(t[Za]=[])}function sM(t,e){let n,r=e[t.index];return jt(r)?n=r:(n=q_(r,e,null,t),e[t.index]=n,Ac(e,n)),aM(n,e,t,r),new aE(n,t,e)}function oM(t,e){let n=t[ye],r=n.createComment(""),i=Je(e,t),s=x_(n,i);return sc(n,s,r,G0(n,i),!1),r}var aM=uM,cM=()=>!1;function lM(t,e,n){return cM(t,e,n)}function uM(t,e,n,r){if(t[tr])return;let i;n.type&8?i=It(r):i=oM(e,n),t[tr]=i}var ny=new Set;function hr(t){ny.has(t)||(ny.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Os(t,e){hr("NgSignals");let n=nv(t),r=n[on];return e?.equal&&(r.equal=e.equal),n.set=i=>ku(r,i),n.update=i=>rv(r,i),n.asReadonly=dM.bind(n),n}function dM(){let t=this[on];if(t.readonlyFn===void 0){let e=()=>this();e[on]=t,t.readonlyFn=e}return t.readonlyFn}function hM(t){return Object.getPrototypeOf(t.prototype).constructor}function Ct(t){let e=hM(t.type),n=!0,r=[t];for(;e;){let i;if(vn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new D(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=La(t.inputs),o.inputTransforms=La(t.inputTransforms),o.declaredInputs=La(t.declaredInputs),o.outputs=La(t.outputs);let a=i.hostBindings;a&&vM(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&gM(t,c),l&&mM(t,l),fM(t,i),NT(t.outputs,i.outputs),vn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ct&&(n=!1)}}e=Object.getPrototypeOf(e)}pM(r)}function fM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function pM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_s(i.hostAttrs,n=_s(n,i.hostAttrs))}}function La(t){return t===si?{}:t===Ze?[]:t}function gM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function mM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function vM(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var yn=class{},Ss=class{};var Yd=class extends yn{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cc(this);let s=Ay(e);this._bootstrapComponents=S_(s.bootstrap),this._r3Injector=g_(e,n,[{provide:yn,useValue:this},{provide:gi,useValue:this.componentFactoryResolver},...r],Oe(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Kd=class extends Ss{constructor(e){super(),this.moduleType=e}create(e){return new Yd(this.moduleType,e,[])}};var lc=class extends yn{constructor(e){super(),this.componentFactoryResolver=new cc(this),this.instance=null;let n=new Es([...e.providers,{provide:yn,useValue:this},{provide:gi,useValue:this.componentFactoryResolver}],e.parent||fh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Uh(t,e,n=null){return new lc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function yM(t,e,n){return t[e]=n}function fr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function _M(t){return(t.flags&32)===32}function EM(t,e,n,r,i,s,o,a,c){let l=e.consts,u=Sc(e,t,4,o||null,a||null);W_(e,n,u,di(l,c)),Ih(e,u);let d=u.tView=kh(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Zd(t,e,n,r,i,s,o,a,c,l){let u=n+Ge,d=e.firstCreatePass?EM(u,e,t,r,i,s,o,a,c):e.data[u];Rs(d,!1);let h=IM(e,t,d,n);_h()&&Oh(e,t,h,d),sr(h,t);let f=q_(h,t,h,d);return t[u]=f,Ac(t,f),lM(f,d,t),ph(d)&&B_(e,t,d),c!=null&&$_(t,d,l),d}function Bh(t,e,n,r,i,s,o,a){let c=X(),l=qe(),u=di(l.consts,s);return Zd(c,l,t,e,n,r,i,u,o,a),Bh}var IM=wM;function wM(t,e,n,r){return Eh(!0),e[ye].createComment("")}var ms=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ms||{}),CM=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),Qn=class Qn{constructor(){this.ngZone=_(K),this.scheduler=_(pi),this.errorHandler=_(kt,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Qn.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Qn.PHASES=[ms.EarlyRead,ms.Write,ms.MixedReadWrite,ms.Read],Qn.\u0275prov=C({token:Qn,providedIn:"root",factory:()=>new Qn});var ry=Qn;function Rc(t,e,n,r){let i=X(),s=xs();if(fr(i,s,e)){let o=qe(),a=r_();wA(a,i,t,e,n,r)}return Rc}function DM(t,e,n,r){return fr(t,xs(),n)?e+ch(n)+r:Cn}function Va(t,e){return t<<17|e<<2}function or(t){return t>>17&32767}function bM(t){return(t&2)==2}function TM(t,e){return t&131071|e<<17}function Qd(t){return t|2}function vi(t){return(t&131068)>>2}function hd(t,e){return t&-131069|e<<2}function SM(t){return(t&1)===1}function Jd(t){return t|1}function AM(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=or(o),c=vi(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Ns(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=or(t[a+1]);t[r+1]=Va(h,a),h!==0&&(t[h+1]=hd(t[h+1],r)),t[a+1]=TM(t[a+1],r)}else t[r+1]=Va(a,0),a!==0&&(t[a+1]=hd(t[a+1],r)),a=r;else t[r+1]=Va(c,0),a===0?a=r:t[c+1]=hd(t[c+1],r),c=r;l&&(t[r+1]=Qd(t[r+1])),iy(t,u,r,!0),iy(t,u,r,!1),MM(e,u,t,r,s),o=Va(a,c),s?e.classBindings=o:e.styleBindings=o}function MM(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Ns(s,e)>=0&&(n[r+1]=Jd(n[r+1]))}function iy(t,e,n,r){let i=t[n+1],s=e===null,o=r?or(i):vi(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];NM(c,e)&&(a=!0,t[o+1]=r?Jd(l):Qd(l)),o=r?or(l):vi(l)}a&&(t[n+1]=r?Qd(i):Jd(i))}function NM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ns(t,e)>=0:!1}function xc(t,e,n){let r=X(),i=xs();if(fr(r,i,e)){let s=qe(),o=r_();uA(s,o,r,t,e,r[ye],n,!1)}return xc}function sy(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Fh(t,n,s[o],o,r)}function Oc(t,e){return RM(t,e,null,!0),Oc}function RM(t,e,n,r){let i=X(),s=qe(),o=qS(2);if(s.firstUpdatePass&&OM(s,t,o,r),e!==Cn&&fr(i,o,e)){let a=s.data[lr()];VM(s,a,i,i[ye],t,i[o+1]=jM(e,n),r,o)}}function xM(t,e){return e>=t.expandoStartIndex}function OM(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[lr()],o=xM(t,n);UM(s,r)&&e===null&&!o&&(e=!1),e=PM(i,s,e,r),AM(i,s,e,n,o,r)}}function PM(t,e,n,r){let i=QS(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=fd(null,t,e,n,r),n=As(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=fd(i,t,e,n,r),s===null){let c=kM(t,e,r);c!==void 0&&Array.isArray(c)&&(c=fd(null,t,e,c[1],r),c=As(c,e.attrs,r),FM(t,e,r,c))}else s=LM(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function kM(t,e,n){let r=n?e.classBindings:e.styleBindings;if(vi(r)!==0)return t[or(r)]}function FM(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[or(i)]=r}function LM(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=As(r,o,n)}return As(r,e.attrs,n)}function fd(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=As(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function As(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),QT(t,o,n?!0:e[++s]))}return t===void 0?null:t}function VM(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=SM(l)?oy(c,e,n,i,vi(l),o):void 0;if(!uc(u)){uc(s)||bM(l)&&(s=oy(c,null,n,i,a,o));let d=$y(lr(),n);X0(r,o,d,i,s)}}function oy(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Cn&&(h=d?Ze:void 0);let f=d?rd(h,r):u===r?h:void 0;if(l&&!uc(f)&&(f=rd(c,r)),uc(f)&&(a=f,o))return a;let p=t[i+1];i=o?or(p):vi(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=rd(c,r))}return a}function uc(t){return t!==void 0}function jM(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Oe(Nh(t)))),t}function UM(t,e){return(t.flags&(e?8:16))!==0}var Xd=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function pd(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function BM(t,e,n){let r,i,s=0,o=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let l=t.at(s),u=e[s],d=pd(s,l,s,u,n);if(d!==0){d<0&&t.updateValue(s,u),s++;continue}let h=t.at(o),f=e[c],p=pd(o,h,c,f,n);if(p!==0){p<0&&t.updateValue(o,f),o--,c--;continue}let v=n(s,l),y=n(o,h),E=n(s,u);if(Object.is(E,y)){let T=n(c,f);Object.is(T,v)?(t.swap(s,o),t.updateValue(o,f),c--,o--):t.move(o,s),t.updateValue(s,u),s++;continue}if(r??=new dc,i??=cy(t,s,o,n),eh(t,r,s,E))t.updateValue(s,u),s++,o++;else if(i.has(E))r.set(v,t.detach(s)),o--;else{let T=t.create(s,e[s]);t.attach(s,T),s++,o++}}for(;s<=c;)ay(t,r,n,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&s<=o;){let u=t.at(s),d=l.value,h=pd(s,u,s,d,n);if(h!==0)h<0&&t.updateValue(s,d),s++,l=c.next();else{r??=new dc,i??=cy(t,s,o,n);let f=n(s,d);if(eh(t,r,s,f))t.updateValue(s,d),s++,o++,l=c.next();else if(!i.has(f))t.attach(s,t.create(s,d)),s++,o++,l=c.next();else{let p=n(s,u);r.set(p,t.detach(s)),o--}}}for(;!l.done;)ay(t,r,n,t.length,l.value),l=c.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(c=>{t.destroy(c)})}function eh(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function ay(t,e,n,r,i){if(eh(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function cy(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var dc=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function cE(t,e){hr("NgControlFlow");let n=X(),r=xs(),i=n[r]!==Cn?n[r]:-1,s=i!==-1?hc(n,Ge+i):void 0,o=0;if(fr(n,r,t)){let a=U(null);try{if(s!==void 0&&Q_(s,o),t!==-1){let c=Ge+t,l=hc(n,c),u=ih(n[x],c),d=bs(l,u.tView.ssrId),h=Vh(n,u,e,{dehydratedView:d});Mc(l,h,o,Ds(u,d))}}finally{U(a)}}else if(s!==void 0){let a=Z_(s,o);a!==void 0&&(a[Ie]=e)}}var th=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Se}};function lE(t){return t}var nh=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function uE(t,e,n,r,i,s,o,a,c,l,u,d,h){hr("NgControlFlow");let f=X(),p=qe(),v=c!==void 0,y=X(),E=a?o.bind(y[at][Ie]):o,T=new nh(v,E);y[Ge+t]=T,Zd(f,p,t+1,e,n,r,i,di(p.consts,s)),v&&Zd(f,p,t+2,c,l,u,d,di(p.consts,h))}var rh=class extends Xd{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Se}at(e){return this.getLView(e)[Ie].$implicit}attach(e,n){let r=n[Is];this.needsIndexUpdate||=e!==this.length,Mc(this.lContainer,n,e,Ds(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,$M(this.lContainer,e)}create(e,n){let r=bs(this.lContainer,this.templateTNode.tView.ssrId),i=Vh(this.hostLView,this.templateTNode,new th(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Dc(e[x],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ie].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ie].$index=e}getLView(e){return HM(this.lContainer,e)}};function dE(t){let e=U(null),n=lr();try{let r=X(),i=r[x],s=r[n],o=n+1,a=hc(r,o);if(s.liveCollection===void 0){let l=ih(i,o);s.liveCollection=new rh(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(BM(c,t,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let l=xs(),u=c.length===0;if(fr(r,l,u)){let d=n+2,h=hc(r,d);if(u){let f=ih(i,d),p=bs(h,f.tView.ssrId),v=Vh(r,f,void 0,{dehydratedView:p});Mc(h,v,0,Ds(f,p))}else Q_(h,0)}}}finally{U(e)}}function hc(t,e){return t[e]}function $M(t,e){return Cs(t,e)}function HM(t,e){return Z_(t,e)}function ih(t,e){return gh(t,e)}function WM(t,e,n,r,i,s){let o=e.consts,a=di(o,i),c=Sc(e,t,2,r,a);return W_(e,n,c,di(o,s)),c.attrs!==null&&Gd(c,c.attrs,!1),c.mergedAttrs!==null&&Gd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function we(t,e,n,r){let i=X(),s=qe(),o=Ge+t,a=i[ye],c=s.firstCreatePass?WM(o,s,i,e,n,r):s.data[o],l=zM(s,i,c,a,e,t);i[o]=l;let u=ph(c);return Rs(c,!0),k_(a,l,c),!_M(c)&&_h()&&Oh(s,i,l,c),LS()===0&&sr(l,i),VS(),u&&(B_(s,i,c),U_(s,c,i)),r!==null&&$_(i,c),we}function de(){let t=Xe();Ky()?WS():(t=t.parent,Rs(t,!1));let e=t;BS(e)&&$S(),jS();let n=qe();return n.firstCreatePass&&(Ih(n,t),Ly(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&i0(e)&&sy(n,e,X(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&s0(e)&&sy(n,e,X(),e.stylesWithoutHost,!1),de}function dt(t,e,n,r){return we(t,e,n,r),de(),dt}var zM=(t,e,n,r,i,s)=>(Eh(!0),A_(r,i,e0()));function $h(){return X()}var Kn=void 0;function GM(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var qM=["en",[["a","p"],["AM","PM"],Kn],[["AM","PM"],Kn,Kn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kn,"{1} 'at' {0}",Kn],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",GM],gd={};function Pc(t){let e=YM(t),n=ly(e);if(n)return n;let r=e.split("-")[0];if(n=ly(r),n)return n;if(r==="en")return qM;throw new D(701,!1)}function ly(t){return t in gd||(gd[t]=ps.ng&&ps.ng.common&&ps.ng.common.locales&&ps.ng.common.locales[t]),gd[t]}var pr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(pr||{});function YM(t){return t.toLowerCase().replace(/_/g,"-")}var fc="en-US",KM="USD";var ZM=fc;function QM(t){typeof t=="string"&&(ZM=t.toLowerCase().replace(/_/g,"-"))}var JM=(t,e,n)=>{};function Dt(t,e,n,r){let i=X(),s=qe(),o=Xe();return eN(s,i,i[ye],o,t,e,r),Dt}function XM(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ka],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function eN(t,e,n,r,i,s,o){let a=ph(r),l=t.firstCreatePass&&SA(t),u=e[Ie],d=TA(e),h=!0;if(r.type&3||o){let v=Je(r,e),y=o?o(v):v,E=d.length,T=o?L=>o(It(L[r.index])):r.index,G=null;if(!o&&a&&(G=XM(t,e,i,r.index)),G!==null){let L=G.__ngLastListenerFn__||G;L.__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,h=!1}else{s=dy(r,e,u,s),JM(v,i,s);let L=n.listen(y,i,s);d.push(s,L),l&&l.push(i,T,E,E+1)}}else s=dy(r,e,u,s);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let v=p.length;if(v)for(let y=0;y<v;y+=2){let E=p[y],T=p[y+1],ge=e[E][T].subscribe(s),ne=d.length;d.push(s,ge),l&&l.push(i,r.index,ne,-(ne+1))}}}function uy(t,e,n,r){let i=U(null);try{return yt(6,e,n),n(r)!==!1}catch(s){return K_(t,s),!1}finally{yt(7,e,n),U(i)}}function dy(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?In(t.index,e):e;jh(o,5);let a=uy(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=uy(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Ps(t=1){return XS(t)}function tN(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function et(t,e=""){let n=X(),r=qe(),i=t+Ge,s=r.firstCreatePass?Sc(r,i,1,e,null):r.data[i],o=nN(r,n,s,e,t);n[i]=o,_h()&&Oh(r,n,o,s),Rs(s,!1)}var nN=(t,e,n,r,i)=>(Eh(!0),F0(e[ye],r));function Ii(t,e,n){let r=X(),i=DM(r,t,e,n);return i!==Cn&&AA(r,lr(),i),Ii}function rN(t,e,n){let r=qe();if(r.firstCreatePass){let i=vn(t);sh(n,r.data,r.blueprint,i,!0),sh(e,r.data,r.blueprint,i,!1)}}function sh(t,e,n,r,i){if(t=Te(t),Array.isArray(t))for(let s=0;s<t.length;s++)sh(t[s],e,n,r,i);else{let s=qe(),o=X(),a=Xe(),c=ai(t)?t:Te(t.provide),l=Py(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ai(t)||!t.multi){let f=new ir(l,i,ee),p=vd(c,e,i?u:u+h,d);p===-1?(Rd(nc(a,o),s,c),md(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=vd(c,e,u+h,d),p=vd(c,e,u,u+h),v=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!v){Rd(nc(a,o),s,c);let E=oN(i?sN:iN,n.length,i,r,l);!i&&y&&(n[p].providerFactory=E),md(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=hE(n[i?p:f],l,!i&&r);md(s,t,f>-1?f:p,E)}!i&&r&&y&&n[p].componentProviders++}}}function md(t,e,n,r){let i=ai(e),s=_S(e);if(i||s){let c=(s?Te(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function hE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function vd(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function iN(t,e,n,r){return oh(this.multi,[])}function sN(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=hi(n,n[x],this.providerFactory.index,r);s=a.slice(0,o),oh(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],oh(i,s);return s}function oh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function oN(t,e,n,r,i){let s=new ir(t,n,ee);return s.multi=[],s.index=e,s.componentProviders=0,hE(s,i,r&&!n),s}function wi(t,e=[]){return n=>{n.providersResolver=(r,i)=>rN(r,i?i(t):t,e)}}var aN=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Ry(!1,r.type),s=i.length>0?Uh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=C({token:e,providedIn:"environment",factory:()=>new e(b(Pe))});let t=e;return t})();function Ci(t){hr("NgStandalone"),t.getStandaloneInjector=e=>e.get(aN).getOrCreateStandaloneInjector(t)}function cN(t,e){let n=t[e];return n===Cn?void 0:n}function lN(t,e,n,r,i,s){let o=e+n;return fr(t,o,i)?yM(t,o+1,s?r.call(s,i):r(i)):cN(t,o+1)}function fE(t,e){let n=qe(),r,i=t+Ge;n.firstCreatePass?(r=uN(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Xn(r.type,!0)),o,a=xe(ee);try{let c=tc(!1),l=s();return tc(c),tN(n,X(),i,l),l}finally{xe(a)}}function uN(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function pE(t,e,n){let r=t+Ge,i=X(),s=OS(i,r);return dN(i,r)?lN(i,zS(),e,s.transform,n,s):s.transform(n)}function dN(t,e){return t[x].data[e].pure}var Lt=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},gE=new Lt("18.2.3");var kc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var mE=new w("");function gr(t){return!!t&&typeof t.then=="function"}function vE(t){return!!t&&typeof t.subscribe=="function"}var yE=new w(""),_E=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=_(yE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(gr(o))r.push(o);else if(vE(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fc=new w("");function hN(){tv(()=>{throw new D(600,!1)})}function fN(t){return t.isBoundToModule}var pN=10;function gN(t,e,n){try{let r=n();return gr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var bn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_(D0),this.afterRenderManager=_(CM),this.zonelessEnabled=_(iE),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new me,this.afterTick=new me,this.componentTypes=[],this.components=[],this.isStable=_(wn).hasPendingTasks.pipe(R(r=>!r)),this._injector=_(Pe)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof ac;if(!this._injector.get(_E).done){let f=!s&&Sy(r),p=!1;throw new D(405,p)}let a;s?a=r:a=this._injector.get(gi).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=fN(a)?void 0:this._injector.get(yn),l=i||a.selector,u=a.create(ke.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(mE,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Ha(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new D(101,!1);let r=U(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,U(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(mi,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<pN;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)mN(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Ec(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ha(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Fc,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ha(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new D(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ha(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function mN(t,e,n,r){if(!n&&!Ec(t))return;eE(t,e,n&&!r?0:1)}var ah=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Hh=(()=>{let e=class e{compileModuleSync(r){return new Kd(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Ay(r),o=S_(s.declarations).reduce((a,c)=>{let l=er(c);return l&&a.push(new Ts(l)),a},[]);return new ah(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vN=(()=>{let e=class e{constructor(){this.zone=_(K),this.changeDetectionScheduler=_(pi),this.applicationRef=_(bn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yN({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new K(H(I({},_N()),{scheduleInRootZone:n})),[{provide:K,useFactory:t},{provide:oi,multi:!0,useFactory:()=>{let r=_(vN,{optional:!0});return()=>r.initialize()}},{provide:oi,multi:!0,useFactory:()=>{let r=_(EN);return()=>{r.initialize()}}},e===!0?{provide:sE,useValue:!0}:[],{provide:oE,useValue:n??m_}]}function _N(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var EN=(()=>{let e=class e{constructor(){this.subscription=new ie,this.initialized=!1,this.zone=_(K),this.pendingTasks=_(wn)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{K.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{K.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var IN=(()=>{let e=class e{constructor(){this.appRef=_(bn),this.taskService=_(wn),this.ngZone=_(K),this.zonelessEnabled=_(iE),this.disableScheduling=_(sE,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ie,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ic):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(_(oE,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Fd||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Gv:y_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ic+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Gv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wN(){return typeof $localize<"u"&&$localize.locale||fc}var Lc=new w("",{providedIn:"root",factory:()=>_(Lc,F.Optional|F.SkipSelf)||wN()}),EE=new w("",{providedIn:"root",factory:()=>KM});var IE=new w("");function ja(t){return!!t.platformInjector}function CN(t){let e=ja(t)?t.r3Injector:t.moduleRef.injector,n=e.get(K);return n.run(()=>{ja(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(kt,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),ja(t)){let s=()=>e.destroy(),o=t.platformInjector.get(IE);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{Ha(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return gN(r,n,()=>{let s=e.get(_E);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Lc,fc);if(QM(o||fc),ja(t)){let a=e.get(bn);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return DN(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function DN(t,e){let n=t.injector.get(bn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new D(-403,!1);e.push(t)}var Wa=null;function bN(t=[],e){return ke.create({name:e,providers:[{provide:vc,useValue:"platform"},{provide:IE,useValue:new Set([()=>Wa=null])},...t]})}function TN(t=[]){if(Wa)return Wa;let e=bN(t);return Wa=e,hN(),SN(e),e}function SN(t){t.get(Sh,null)?.forEach(n=>n())}var Di=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=AN;let t=e;return t})();function AN(t){return MN(Xe(),X(),(t&16)===16)}function MN(t,e,n){if(_c(t)&&!n){let r=In(t.index,e);return new fi(r,r)}else if(t.type&175){let r=e[at];return new fi(r,e)}return null}function wE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=TN(r),s=[yN({}),{provide:pi,useExisting:IN},...n||[]],o=new lc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return CN({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var CE=new w("");function ks(t,e){hr("NgSignals");let n=Jm(t);return e?.equal&&(n[on].equal=e.equal),n}function Ut(t){let e=U(null);try{return t()}finally{U(e)}}var ME=null;function Wt(){return ME}function NE(t){ME??=t}var Vc=class{};var Ne=new w(""),qh=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>_(ON),providedIn:"platform"});let t=e;return t})();var ON=(()=>{let e=class e extends qh{constructor(){super(),this._doc=_(Ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wt().getBaseHref(this._doc)}onPopState(r){let i=Wt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Wt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Yh(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function DE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function $t(t){return t&&t[0]!=="?"?"?"+t:t}var Ti=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>_(xE),providedIn:"root"});let t=e;return t})(),RE=new w(""),xE=(()=>{let e=class e extends Ti{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_(Ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Yh(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+$t(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+$t(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+$t(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(qh),b(RE,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),OE=(()=>{let e=class e extends Ti{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Yh(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+$t(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+$t(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(qh),b(RE,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Vs=(()=>{let e=class e{constructor(r){this._subject=new ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=FN(DE(bE(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+$t(i))}normalize(r){return e.stripTrailingSlash(kN(this._basePath,bE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$t(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$t(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=$t,e.joinWithSlash=Yh,e.stripTrailingSlash=DE,e.\u0275fac=function(i){return new(i||e)(b(Ti))},e.\u0275prov=C({token:e,factory:()=>PN(),providedIn:"root"});let t=e;return t})();function PN(){return new Vs(b(Ti))}function kN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function bE(t){return t.replace(/\/index.html$/,"")}function FN(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var PE={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},kE=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(kE||{});var Ht={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Fs(t,e){let n=Pc(t),r=n[pr.NumberSymbols][e];if(typeof r>"u"){if(e===Ht.CurrencyDecimal)return n[pr.NumberSymbols][Ht.Decimal];if(e===Ht.CurrencyGroup)return n[pr.NumberSymbols][Ht.Group]}return r}function LN(t,e){return Pc(t)[pr.NumberFormats][e]}function VN(t){return Pc(t)[pr.Currencies]}function jN(t,e,n="en"){let r=VN(n)[t]||PE[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var UN=2;function BN(t){let e,n=PE[t];return n&&(e=n[2]),typeof e=="number"?e:UN}var $N=/^(\d+)?\.((\d+)(-(\d+))?)?$/,TE=22,jc=".",Ls="0",HN=";",WN=",",zh="#",SE="\xA4";function zN(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=Fs(n,Ht.Infinity);else{let l=KN(t);o&&(l=YN(l));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){let T=s.match($N);if(T===null)throw new Error(`${s} is not a valid digit info`);let G=T[1],L=T[3],ge=T[5];G!=null&&(u=Gh(G)),L!=null&&(d=Gh(L)),ge!=null?h=Gh(ge):L!=null&&d>h&&(h=d)}ZN(l,d,h);let f=l.digits,p=l.integerLen,v=l.exponent,y=[];for(c=f.every(T=>!T);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?y=f.splice(p,f.length):(y=f,f=[0]);let E=[];for(f.length>=e.lgSize&&E.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)E.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&E.unshift(f.join("")),a=E.join(Fs(n,r)),y.length&&(a+=Fs(n,i)+y.join("")),v&&(a+=Fs(n,Ht.Exponential)+"+"+v)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function GN(t,e,n,r,i){let s=LN(e,kE.Currency),o=qN(s,Fs(e,Ht.MinusSign));return o.minFrac=BN(r),o.maxFrac=o.minFrac,zN(t,o,e,Ht.CurrencyGroup,Ht.CurrencyDecimal,i).replace(SE,n).replace(SE,"").trim()}function qN(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(HN),i=r[0],s=r[1],o=i.indexOf(jc)!==-1?i.split(jc):[i.substring(0,i.lastIndexOf(Ls)+1),i.substring(i.lastIndexOf(Ls)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(zh));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===Ls?n.minFrac=n.maxFrac=u+1:d===zh?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(WN);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=i.length-n.posPre.length-n.posSuf.length,d=s.indexOf(zh);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function YN(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function KN(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(jc))>-1&&(e=e.replace(jc,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Ls;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Ls;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>TE&&(r=r.splice(0,TE-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function ZN(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,u=r.reduceRight(function(d,h,f,p){return h=h+d,p[f]=h<10?h:h-10,c&&(p[f]===0&&f>=l?p.pop():c=!1),h>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function Gh(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Uc(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function QN(t,e){return new D(2100,!1)}var FE=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,s="symbol",o,a){if(!JN(r))return null;a||=this._locale,typeof s=="boolean"&&(s=s?"symbol":"code");let c=i||this._defaultCurrencyCode;s!=="code"&&(s==="symbol"||s==="symbol-narrow"?c=jN(c,s==="symbol"?"wide":"narrow",a):c=s);try{let l=XN(r);return GN(l,a,c,i,o)}catch(l){throw QN(e,l.message)}}};e.\u0275fac=function(i){return new(i||e)(ee(Lc,16),ee(EE,16))},e.\u0275pipe=Dy({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function JN(t){return!(t==null||t===""||t!==t)}function XN(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var LE="browser",eR="server";function Bc(t){return t===eR}var bi=class{};var Us=class{},Hc=class{},zt=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Zh=class{encodeKey(e){return VE(e)}encodeValue(e){return VE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function nR(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var rR=/%(\d[a-f0-9])/gi,iR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VE(t){return encodeURIComponent(t).replace(rR,(e,n)=>iR[n]??e)}function $c(t){return`${t}`}var Sn=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Zh,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=nR(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map($c):[$c(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push($c(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf($c(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Qh=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function sR(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function jE(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function UE(t){return typeof Blob<"u"&&t instanceof Blob}function BE(t){return typeof FormData<"u"&&t instanceof FormData}function oR(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var js=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(sR(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new zt,this.context??=new Qh,!this.params)this.params=new Sn,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||jE(this.body)||UE(this.body)||BE(this.body)||oR(this.body)?this.body:this.body instanceof Sn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||BE(this.body)?null:UE(this.body)?this.body.type||null:jE(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Sn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new t(n,r,o,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},An=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(An||{}),Bs=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new zt,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Wc=class t extends Bs{constructor(e={}){super(e),this.type=An.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},$s=class t extends Bs{constructor(e={}){super(e),this.type=An.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tn=class extends Bs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},zE=200,aR=204;function Kh(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var cR=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof js)o=r;else{let l;s.headers instanceof zt?l=s.headers:l=new zt(s.headers);let u;s.params&&(s.params instanceof Sn?u=s.params:u=new Sn({fromObject:s.params})),o=new js(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=S(o).pipe(dn(l=>this.handler.handle(l)));if(r instanceof js||s.observe==="events")return a;let c=a.pipe(We(l=>l instanceof $s));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(R(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(R(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(R(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(R(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Sn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Kh(s,i))}post(r,i,s={}){return this.request("POST",r,Kh(s,i))}put(r,i,s={}){return this.request("PUT",r,Kh(s,i))}};e.\u0275fac=function(i){return new(i||e)(b(Us))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),lR=/^\)\]\}',?\n/,uR="X-Request-URL";function $E(t){if(t.url)return t.url;let e=uR.toLocaleLowerCase();return t.headers.get(e)}var dR=(()=>{let e=class e{constructor(){this.fetchImpl=_(Jh,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=_(K)}handle(r){return new k(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(Xh,o=>i.error(new Tn({error:o}))),()=>s.abort()})}doRequest(r,i,s){return g(this,null,function*(){let o=this.createRequestInit(r),a;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,I({signal:i},o)));hR(p),s.next({type:An.Sent}),a=yield p}catch(p){s.error(new Tn({error:p,status:p.status??0,statusText:p.statusText,url:r.urlWithParams,headers:p.headers}));return}let c=new zt(a.headers),l=a.statusText,u=$E(a)??r.urlWithParams,d=a.status,h=null;if(r.reportProgress&&s.next(new Wc({headers:c,status:d,statusText:l,url:u})),a.body){let p=a.headers.get("content-length"),v=[],y=a.body.getReader(),E=0,T,G,L=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>g(this,null,function*(){for(;;){let{done:ne,value:be}=yield y.read();if(ne)break;if(v.push(be),E+=be.length,r.reportProgress){G=r.responseType==="text"?(G??"")+(T??=new TextDecoder).decode(be,{stream:!0}):void 0;let sn=()=>s.next({type:An.DownloadProgress,total:p?+p:void 0,loaded:E,partialText:G});L?L.run(sn):sn()}}}));let ge=this.concatChunks(v,E);try{let ne=a.headers.get("Content-Type")??"";h=this.parseBody(r,ge,ne)}catch(ne){s.error(new Tn({error:ne,headers:new zt(a.headers),status:a.status,statusText:a.statusText,url:$E(a)??r.urlWithParams}));return}}d===0&&(d=h?zE:0),d>=200&&d<300?(s.next(new $s({body:h,headers:c,status:d,statusText:l,url:u})),s.complete()):s.error(new Tn({error:h,headers:c,status:d,statusText:l,url:u}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(lR,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Jh=class{};function Xh(){}function hR(t){t.then(Xh,Xh)}function fR(t,e){return e(t)}function pR(t,e,n){return(r,i)=>lt(n,()=>e(r,s=>t(s,i)))}var GE=new w(""),gR=new w(""),mR=new w("",{providedIn:"root",factory:()=>!0});var HE=(()=>{let e=class e extends Us{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=_(wn),this.contributeToStability=_(mR)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(GE),...this.injector.get(gR,[])]));this.chain=i.reduceRight((s,o)=>pR(s,o,this.injector),fR)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Yn(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(b(Hc),b(Pe))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();var vR=/^\)\]\}',?\n/;function yR(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var WE=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new D(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?re(i.\u0275loadImpl()):S(null)).pipe(ze(()=>new k(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((y,E)=>a.setRequestHeader(y,E.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let y=r.detectContentTypeHeader();y!==null&&a.setRequestHeader("Content-Type",y)}if(r.responseType){let y=r.responseType.toLowerCase();a.responseType=y!=="json"?y:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let y=a.statusText||"OK",E=new zt(a.getAllResponseHeaders()),T=yR(a)||r.url;return l=new Wc({headers:E,status:a.status,statusText:y,url:T}),l},d=()=>{let{headers:y,status:E,statusText:T,url:G}=u(),L=null;E!==aR&&(L=typeof a.response>"u"?a.responseText:a.response),E===0&&(E=L?zE:0);let ge=E>=200&&E<300;if(r.responseType==="json"&&typeof L=="string"){let ne=L;L=L.replace(vR,"");try{L=L!==""?JSON.parse(L):null}catch(be){L=ne,ge&&(ge=!1,L={error:be,text:L})}}ge?(o.next(new $s({body:L,headers:y,status:E,statusText:T,url:G||void 0})),o.complete()):o.error(new Tn({error:L,headers:y,status:E,statusText:T,url:G||void 0}))},h=y=>{let{url:E}=u(),T=new Tn({error:y,status:a.status||0,statusText:a.statusText||"Unknown Error",url:E||void 0});o.error(T)},f=!1,p=y=>{f||(o.next(u()),f=!0);let E={type:An.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(E.total=y.total),r.responseType==="text"&&a.responseText&&(E.partialText=a.responseText),o.next(E)},v=y=>{let E={type:An.UploadProgress,loaded:y.loaded};y.lengthComputable&&(E.total=y.total),o.next(E)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",p),c!==null&&a.upload&&a.upload.addEventListener("progress",v)),a.send(c),o.next({type:An.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",p),c!==null&&a.upload&&a.upload.removeEventListener("progress",v)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(b(bi))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),qE=new w(""),_R="XSRF-TOKEN",ER=new w("",{providedIn:"root",factory:()=>_R}),IR="X-XSRF-TOKEN",wR=new w("",{providedIn:"root",factory:()=>IR}),zc=class{},CR=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Uc(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(b(Ne),b(wt),b(ER))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function DR(t,e){let n=t.url.toLowerCase();if(!_(qE)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=_(zc).getToken(),i=_(wR);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function YE(...t){let e=[cR,WE,HE,{provide:Us,useExisting:HE},{provide:Hc,useFactory:()=>_(dR,{optional:!0})??_(WE)},{provide:GE,useValue:DR,multi:!0},{provide:qE,useValue:!0},{provide:zc,useClass:CR}];for(let n of t)e.push(...n.\u0275providers);return ct(e)}var nf=class extends Vc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},rf=class t extends nf{static makeCurrent(){NE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=bR();return n==null?null:TR(n)}resetBaseElement(){Hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Uc(document.cookie,e)}},Hs=null;function bR(){return Hs=Hs||document.querySelector("base"),Hs?Hs.getAttribute("href"):null}function TR(t){return new URL(t,document.baseURI).pathname}var SR=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Gc=new w(""),JE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new D(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(b(Gc),b(K))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Ws=class{constructor(e){this._doc=e}},ef="ng-app-id",XE=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Bc(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${ef}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(ef),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(ef,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(b(Ne),b(Th),b(Ah,8),b(wt))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),tf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},of=/%COMP%/g,eI="%COMP%",AR=`_nghost-${eI}`,MR=`_ngcontent-${eI}`,NR=!0,RR=new w("",{providedIn:"root",factory:()=>NR});function xR(t){return MR.replace(of,t)}function OR(t){return AR.replace(of,t)}function tI(t,e){return e.map(n=>n.replace(of,t))}var KE=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Bc(c),this.defaultRenderer=new zs(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Et.ShadowDom&&(i=H(I({},i),{encapsulation:Et.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof qc?s.applyToHost(r):s instanceof Gs&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Et.Emulated:o=new qc(l,u,i,this.appId,d,a,c,h);break;case Et.ShadowDom:return new sf(l,u,r,i,a,c,this.nonce,h);default:o=new Gs(l,u,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(b(JE),b(XE),b(Th),b(RR),b(Ne),b(wt),b(K),b(Ah))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),zs=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(tf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ZE(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ZE(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new D(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=tf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=tf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ft.DashCase|Ft.Important)?e.style.setProperty(n,r,i&Ft.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ft.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Wt().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function ZE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var sf=class extends zs{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=tI(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Gs=class extends zs{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?tI(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},qc=class extends Gs{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=xR(l),this.hostAttr=OR(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},PR=(()=>{let e=class e extends Ws{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(b(Ne))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),kR=(()=>{let e=class e extends Ws{constructor(r){super(r),this.delegate=_(CE,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(b(Ne))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),QE=["alt","control","meta","shift"],FR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LR={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},VR=(()=>{let e=class e extends Ws{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wt().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),QE.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=FR[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),QE.forEach(a=>{if(a!==s){let c=LR[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(b(Ne))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function nI(t,e){return wE(I({rootComponent:t},jR(e)))}function jR(t){return{appProviders:[...WR,...t?.providers??[]],platformProviders:HR}}function UR(){rf.makeCurrent()}function BR(){return new kt}function $R(){return b_(document),document}var HR=[{provide:wt,useValue:LE},{provide:Sh,useValue:UR,multi:!0},{provide:Ne,useFactory:$R,deps:[]}];var WR=[{provide:vc,useValue:"root"},{provide:kt,useFactory:BR,deps:[]},{provide:Gc,useClass:PR,multi:!0,deps:[Ne,K,wt]},{provide:Gc,useClass:VR,multi:!0,deps:[Ne]},{provide:Gc,useClass:kR,multi:!0},KE,XE,JE,{provide:mi,useExisting:KE},{provide:bi,useClass:SR,deps:[]},[]];var rI=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(b(Ne))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var cf={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(t,e){if(!t)throw mr(e)},mr=function(t){return new Error("Firebase Database ("+cf.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var sI=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},GR=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Kc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new lf;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},lf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},df=function(t){let e=sI(t);return Kc.encodeByteArray(e,!0)},qs=function(t){return df(t).replace(/\./g,"")},Ys=function(t){try{return Kc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oI(t){return aI(void 0,t)}function aI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!qR(n)||(t[n]=aI(t[n],e[n]));return t}function qR(t){return t!=="__proto__"}function YR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var KR=()=>YR().__FIREBASE_DEFAULTS__,ZR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Ys(t[1]);return e&&JSON.parse(e)},hf=()=>{try{return KR()||ZR()||QR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ff=t=>{var e,n;return(n=(e=hf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cI=t=>{let e=ff(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pf=()=>{var t;return(t=hf())===null||t===void 0?void 0:t.config},gf=t=>{var e;return(e=hf())===null||e===void 0?void 0:e[`_${t}`]};var Mn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function lI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qs(JSON.stringify(n)),qs(JSON.stringify(o)),""].join(".")}function Ce(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ks(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function uI(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dI(){let t=Ce();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bt(){return cf.NODE_CLIENT===!0||cf.NODE_ADMIN===!0}function hI(){try{return typeof indexedDB=="object"}catch{return!1}}function fI(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var JR="FirebaseError",ht=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JR,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}},Gt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?XR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ht(i,a,r)}};function XR(t,e){return t.replace(ex,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var ex=/\{\$([^}]+)}/g;function Si(t){return JSON.parse(t)}function he(t){return JSON.stringify(t)}var pI=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Si(Ys(s[0])||""),n=Si(Ys(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var gI=function(t){let e=pI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},mI=function(t){let e=pI(t).claims;return typeof e=="object"&&e.admin===!0};function Tt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Zs(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qs(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ai(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(iI(s)&&iI(o)){if(!Ai(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function iI(t){return t!==null&&typeof t=="object"}function yr(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Yc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function vI(t,e){let n=new uf(t,e);return n.subscribe.bind(n)}var uf=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=af),i.error===void 0&&(i.error=af),i.complete===void 0&&(i.complete=af);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function tx(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function af(){}function Qc(t,e){return`${t} failed: ${e} argument `}var yI=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Js=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var xG=4*60*60*1e3;function Le(t){return t&&t._delegate?t._delegate:t}var tt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var _r="[DEFAULT]";var Jc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Mn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rx(e))try{this.getOrInitializeService({instanceIdentifier:_r})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=_r){return this.instances.has(e)}getOptions(e=_r){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_r){return this.component?this.component.multipleInstances?e:_r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nx(t){return t===_r?void 0:t}function rx(t){return t.instantiationMode==="EAGER"}var Xs=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Jc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var ix=[],Z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Z||{}),sx={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},ox=Z.INFO,ax={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},cx=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=ax[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Nn=class{constructor(e){this.name=e,this._logLevel=ox,this._logHandler=cx,this._userLogHandler=null,ix.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var lx=(t,e)=>e.some(n=>t instanceof n),_I,EI;function ux(){return _I||(_I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dx(){return EI||(EI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var II=new WeakMap,vf=new WeakMap,wI=new WeakMap,mf=new WeakMap,_f=new WeakMap;function hx(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(St(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&II.set(n,t)}).catch(()=>{}),_f.set(e,t),e}function fx(t){if(vf.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vf.set(t,e)}var yf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return St(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CI(t){yf=t(yf)}function px(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xc(this),e,...n);return wI.set(r,e.sort?e.sort():[e]),St(r)}:dx().includes(t)?function(...e){return t.apply(Xc(this),e),St(II.get(this))}:function(...e){return St(t.apply(Xc(this),e))}}function gx(t){return typeof t=="function"?px(t):(t instanceof IDBTransaction&&fx(t),lx(t,ux())?new Proxy(t,yf):t)}function St(t){if(t instanceof IDBRequest)return hx(t);if(mf.has(t))return mf.get(t);let e=gx(t);return e!==t&&(mf.set(t,e),_f.set(e,t)),e}var Xc=t=>_f.get(t);function bI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=St(o);return r&&o.addEventListener("upgradeneeded",c=>{r(St(o.result),c.oldVersion,c.newVersion,St(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var mx=["get","getKey","getAll","getAllKeys","count"],vx=["put","add","delete","clear"],Ef=new Map;function DI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ef.get(e))return Ef.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=vx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mx.includes(n)))return;let s=function(o,...a){return g(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Ef.set(e,s),s}CI(t=>H(I({},t),{get:(e,n,r)=>DI(e,n)||t.get(e,n,r),has:(e,n)=>!!DI(e,n)||t.has(e,n)}));var wf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yx(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function yx(t){let e=t.getComponent();return e?.type==="VERSION"}var Cf="@firebase/app",TI="0.10.10";var qt=new Nn("@firebase/app"),_x="@firebase/app-compat",Ex="@firebase/analytics-compat",Ix="@firebase/analytics",wx="@firebase/app-check-compat",Cx="@firebase/app-check",Dx="@firebase/auth",bx="@firebase/auth-compat",Tx="@firebase/database",Sx="@firebase/database-compat",Ax="@firebase/functions",Mx="@firebase/functions-compat",Nx="@firebase/installations",Rx="@firebase/installations-compat",xx="@firebase/messaging",Ox="@firebase/messaging-compat",Px="@firebase/performance",kx="@firebase/performance-compat",Fx="@firebase/remote-config",Lx="@firebase/remote-config-compat",Vx="@firebase/storage",jx="@firebase/storage-compat",Ux="@firebase/firestore",Bx="@firebase/vertexai-preview",$x="@firebase/firestore-compat",Hx="firebase",Wx="10.13.1";var Df="[DEFAULT]",zx={[Cf]:"fire-core",[_x]:"fire-core-compat",[Ix]:"fire-analytics",[Ex]:"fire-analytics-compat",[Cx]:"fire-app-check",[wx]:"fire-app-check-compat",[Dx]:"fire-auth",[bx]:"fire-auth-compat",[Tx]:"fire-rtdb",[Sx]:"fire-rtdb-compat",[Ax]:"fire-fn",[Mx]:"fire-fn-compat",[Nx]:"fire-iid",[Rx]:"fire-iid-compat",[xx]:"fire-fcm",[Ox]:"fire-fcm-compat",[Px]:"fire-perf",[kx]:"fire-perf-compat",[Fx]:"fire-rc",[Lx]:"fire-rc-compat",[Vx]:"fire-gcs",[jx]:"fire-gcs-compat",[Ux]:"fire-fst",[$x]:"fire-fst-compat",[Bx]:"fire-vertex","fire-js":"fire-js",[Hx]:"fire-js-all"};var eo=new Map,Gx=new Map,bf=new Map;function SI(t,e){try{t.container.addComponent(e)}catch(n){qt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xn(t){let e=t.name;if(bf.has(e))return qt.debug(`There were multiple attempts to register component ${e}.`),!1;bf.set(e,t);for(let n of eo.values())SI(n,t);for(let n of Gx.values())SI(n,t);return!0}function no(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yt(t){return t.settings!==void 0}var qx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rn=new Gt("app","Firebase",qx);var Tf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}};var On=Wx;function Mf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Df,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Rn.create("bad-app-name",{appName:String(i)});if(n||(n=pf()),!n)throw Rn.create("no-options");let s=eo.get(i);if(s){if(Ai(n,s.options)&&Ai(r,s.config))return s;throw Rn.create("duplicate-app",{appName:i})}let o=new Xs(i);for(let c of bf.values())o.addComponent(c);let a=new Tf(n,r,o);return eo.set(i,a),a}function Mi(t=Df){let e=eo.get(t);if(!e&&t===Df&&pf())return Mf();if(!e)throw Rn.create("no-app",{appName:t});return e}function el(){return Array.from(eo.values())}function fe(t,e,n){var r;let i=(r=zx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qt.warn(a.join(" "));return}xn(new tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Yx="firebase-heartbeat-database",Kx=1,to="firebase-heartbeat-store",If=null;function RI(){return If||(If=bI(Yx,Kx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(to)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rn.create("idb-open",{originalErrorMessage:t.message})})),If}function Zx(t){return g(this,null,function*(){try{let n=(yield RI()).transaction(to),r=yield n.objectStore(to).get(xI(t));return yield n.done,r}catch(e){if(e instanceof ht)qt.warn(e.message);else{let n=Rn.create("idb-get",{originalErrorMessage:e?.message});qt.warn(n.message)}}})}function AI(t,e){return g(this,null,function*(){try{let r=(yield RI()).transaction(to,"readwrite");yield r.objectStore(to).put(e,xI(t)),yield r.done}catch(n){if(n instanceof ht)qt.warn(n.message);else{let r=Rn.create("idb-set",{originalErrorMessage:n?.message});qt.warn(r.message)}}})}function xI(t){return`${t.name}!${t.options.appId}`}var Qx=1024,Jx=30*24*60*60*1e3,Sf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Af(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return g(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=MI();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Jx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qt.warn(r)}})}getHeartbeatsHeader(){return g(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=MI(),{heartbeatsToSend:r,unsentEntries:i}=Xx(this._heartbeatsCache.heartbeats),s=qs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return qt.warn(n),""}})}};function MI(){return new Date().toISOString().substring(0,10)}function Xx(t,e=Qx){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),NI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),NI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Af=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return hI()?fI().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Zx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function NI(t){return qs(JSON.stringify({version:2,heartbeats:t})).length}function eO(t){xn(new tt("platform-logger",e=>new wf(e),"PRIVATE")),xn(new tt("heartbeat",e=>new Sf(e),"PRIVATE")),fe(Cf,TI,t),fe(Cf,TI,"esm2017"),fe("fire-js","")}eO("");var tO="firebase",nO="10.13.1";fe(tO,nO,"app");var Ir=new Lt("ANGULARFIRE2_VERSION");function nl(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ro=(t,e)=>{let n=e?[e]:el(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ri=class{constructor(){return ro(rO)}},rO="app-check";function Ni(){}var tl=class{zone;delegate;constructor(e,n=qu){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Nf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ni,{},Ni,Ni)),n.pipe(ae({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xi=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new tl(Zone.current)),this.insideAngular=n.run(()=>new tl(Zone.current,Gu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(b(K))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function iO(t){return rl().ngZone.runOutsideAngular(()=>t())}function Er(t){return rl().ngZone.run(()=>t())}function sO(t){return oO(rl())(t)}function oO(t){return function(n){return n=n.lift(new Nf(t.ngZone)),n.pipe(ln(t.outsideAngular),cn(t.insideAngular))}}var aO=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Er(()=>t.apply(void 0,r))},At=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Er(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ni,{},Ni,Ni))),r[s]=aO(r[s],n));let i=iO(()=>t.apply(this,r));if(!e)if(i instanceof k){let s=rl();return i.pipe(ln(s.outsideAngular),cn(s.insideAngular))}else return Er(()=>i);return i instanceof k?i.pipe(sO):i instanceof Promise?Er(()=>new Promise((s,o)=>i.then(a=>Er(()=>s(a)),a=>Er(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Er(()=>i)};var Kt=class{constructor(e){return e}},wr=class{constructor(){return el()}};function cO(t){return t&&t.length===1?t[0]:new Kt(Mi())}var Rf=new w("angularfire2._apps"),lO={provide:Kt,useFactory:cO,deps:[[new Fe,Rf]]},uO={provide:wr,deps:[[new Fe,Rf]]};function dO(t){return(e,n)=>{let r=n.get(wt);fe("angularfire",Ir.full,"core"),fe("angularfire",Ir.full,"app"),fe("angular",gE.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Kt(i)}}function OI(t,...e){return ct([lO,uO,{provide:Rf,useFactory:dO(t),multi:!0,deps:[K,ke,xi,...e]}])}var PI=At(Mf,!0);function KI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ZI=KI,QI=new Gt("auth","Firebase",KI());var ll=new Nn("@firebase/auth");function hO(t,...e){ll.logLevel<=Z.WARN&&ll.warn(`Auth (${On}): ${t}`,...e)}function sl(t,...e){ll.logLevel<=Z.ERROR&&ll.error(`Auth (${On}): ${t}`,...e)}function kn(t,...e){throw Qf(t,...e)}function Dr(t,...e){return Qf(t,...e)}function JI(t,e,n){let r=Object.assign(Object.assign({},ZI()),{[e]:n});return new Gt("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return JI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qf(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QI.create(t,...e)}function M(t,e,...n){if(!t)throw Qf(e,...n)}function Zt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw sl(e),new Error(e)}function Fn(t,e){t||Zt(e)}function kf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fO(){return kI()==="http:"||kI()==="https:"}function kI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function pO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fO()||uI()||"connection"in navigator)?navigator.onLine:!0}function gO(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var br=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fn(n>e,"Short delay should be less than long delay!"),this.isMobile=Ks()||Zc()}get(){return pO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Jf(t,e){Fn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ul=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var mO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var vO=new br(3e4,6e4);function Xf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Pi(s,o,a,c){return g(this,arguments,function*(t,e,n,r,i={}){return XI(t,i,()=>g(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=yr(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),ul.fetch()(ew(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function XI(t,e,n){return g(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},mO),e);try{let i=new Ff(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw il(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw il(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw il(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw il(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw JI(t,u,l);kn(t,u)}}catch(i){if(i instanceof ht)throw i;kn(t,"network-request-failed",{message:String(i)})}})}function yO(s,o,a,c){return g(this,arguments,function*(t,e,n,r,i={}){let l=yield Pi(t,e,n,r,i);return"mfaPendingCredential"in l&&kn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function ew(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Jf(t.config,i):`${t.config.apiScheme}://${i}`}var Ff=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),vO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function il(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Dr(t,e,r);return i.customData._tokenResponse=n,i}function _O(t,e){return g(this,null,function*(){return Pi(t,"POST","/v1/accounts:delete",e)})}function tw(t,e){return g(this,null,function*(){return Pi(t,"POST","/v1/accounts:lookup",e)})}function io(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ep(t,e=!1){return g(this,null,function*(){let n=Le(t),r=yield n.getIdToken(e),i=tp(r);M(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:io(xf(i.auth_time)),issuedAtTime:io(xf(i.iat)),expirationTime:io(xf(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function xf(t){return Number(t)*1e3}function tp(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ys(n);return i?JSON.parse(i):(sl("Failed to decode base64 JWT payload"),null)}catch(i){return sl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function FI(t){let e=tp(t);return M(e,"internal-error"),M(typeof e.exp<"u","internal-error"),M(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function oo(t,e,n=!1){return g(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ht&&EO(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function EO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Lf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),n)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ao=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=io(this.lastLoginAt),this.creationTime=io(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function dl(t){return g(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield oo(t,tw(n,{idToken:r}));M(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?nw(s.providerUserInfo):[],a=IO(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ao(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function np(t){return g(this,null,function*(){let e=Le(t);yield dl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function IO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nw(t){return t.map(e=>{var{providerId:n}=e,r=Yu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function wO(t,e){return g(this,null,function*(){let n=yield XI(t,{},()=>g(this,null,function*(){let r=yr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ew(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ul.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function CO(t,e){return g(this,null,function*(){return Pi(t,"POST","/v2/accounts:revokeToken",Xf(t,e))})}var so=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){M(e.idToken,"internal-error"),M(typeof e.idToken<"u","internal-error"),M(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){M(e.length!==0,"internal-error");let n=FI(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return g(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(M(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return g(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield wO(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(M(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(M(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(M(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Zt("not implemented")}};function Pn(t,e){M(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Oi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Yu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ao(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let n=yield oo(this,this.stsTokenManager.getToken(this.auth,e));return M(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return ep(this,e)}reload(){return np(this)}_assign(e){this!==e&&(M(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){M(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return g(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield dl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(Yt(this.auth.app))return Promise.reject(Cr(this.auth));let e=yield this.getIdToken();return yield oo(this,_O(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(l=n.createdAt)!==null&&l!==void 0?l:void 0,T=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:G,emailVerified:L,isAnonymous:ge,providerData:ne,stsTokenManager:be}=n;M(G&&be,e,"internal-error");let sn=so.fromJSON(this.name,be);M(typeof G=="string",e,"internal-error"),Pn(d,e.name),Pn(h,e.name),M(typeof L=="boolean",e,"internal-error"),M(typeof ge=="boolean",e,"internal-error"),Pn(f,e.name),Pn(p,e.name),Pn(v,e.name),Pn(y,e.name),Pn(E,e.name),Pn(T,e.name);let ls=new t({uid:G,auth:e,email:h,emailVerified:L,displayName:d,isAnonymous:ge,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:sn,createdAt:E,lastLoginAt:T});return ne&&Array.isArray(ne)&&(ls.providerData=ne.map(Gb=>Object.assign({},Gb))),y&&(ls._redirectEventId=y),ls}static _fromIdTokenResponse(e,n,r=!1){return g(this,null,function*(){let i=new so;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield dl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return g(this,null,function*(){let i=n.users[0];M(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?nw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new so;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ao(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var LI=new Map;function Qt(t){Fn(t instanceof Function,"Expected a class definition");let e=LI.get(t);return e?(Fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LI.set(t,e),e)}var DO=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(n,r){return g(this,null,function*(){this.storage[n]=r})}_get(n){return g(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return g(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Vf=DO;function ol(t,e,n){return`firebase:${t}:${e}:${n}`}var hl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ol(this.userKey,i.apiKey,s),this.fullPersistenceKey=ol("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Oi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return g(this,null,function*(){if(!n.length)return new t(Qt(Vf),e,r);let i=(yield Promise.all(n.map(l=>g(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Qt(Vf),o=ol(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Oi._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>g(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function VI(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ow(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cw(e))return"Blackberry";if(lw(e))return"Webos";if(iw(e))return"Safari";if((e.includes("chrome/")||sw(e))&&!e.includes("edge/"))return"Chrome";if(aw(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function rw(t=Ce()){return/firefox\//i.test(t)}function iw(t=Ce()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sw(t=Ce()){return/crios\//i.test(t)}function ow(t=Ce()){return/iemobile/i.test(t)}function aw(t=Ce()){return/android/i.test(t)}function cw(t=Ce()){return/blackberry/i.test(t)}function lw(t=Ce()){return/webos/i.test(t)}function rp(t=Ce()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bO(t=Ce()){var e;return rp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TO(){return dI()&&document.documentMode===10}function uw(t=Ce()){return rp(t)||aw(t)||lw(t)||cw(t)||/windows phone/i.test(t)||ow(t)}function dw(t,e=[]){let n;switch(t){case"Browser":n=VI(Ce());break;case"Worker":n=`${VI(Ce())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${On}/${r}`}var jf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function SO(n){return g(this,arguments,function*(t,e={}){return Pi(t,"GET","/v2/passwordPolicy",Xf(t,e))})}var AO=6,Uf=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:AO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Bf=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fl(this),this.idTokenSubscription=new fl(this),this.beforeStateQueue=new jf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qt(n)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield hl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let n=yield tw(this,{idToken:e}),r=yield Oi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var n;if(Yt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return M(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return g(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield dl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=gO()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(Yt(this.app))return Promise.reject(Cr(this));let n=e?Le(e):null;return n&&M(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return g(this,null,function*(){if(!this._deleted)return e&&M(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return Yt(this.app)?Promise.reject(Cr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Yt(this.app)?Promise.reject(Cr(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(Qt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield SO(this),n=new Uf(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield CO(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return g(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Qt(e)||this._popupRedirectResolver;M(n,this,"argument-error"),this.redirectPersistenceManager=yield hl.create(this,[Qt(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(M(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return M(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return g(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&hO(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ip(t){return Le(t)}var fl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=vI(n=>this.observer=n)}get next(){return M(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var sp={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MO(t){sp=t}function NO(t){return sp.loadJS(t)}function RO(){return sp.gapiScript}function hw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function op(t,e){let n=no(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Ai(s,e??{}))return i;kn(i,"already-initialized")}return n.initialize({options:e})}function xO(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Qt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ap(t,e,n){let r=ip(t);M(r._canInitEmulator,r,"emulator-config-failed"),M(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=fw(e),{host:o,port:a}=OO(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||PO()}function fw(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OO(t){let e=fw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:jI(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:jI(o)}}}function jI(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function PO(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var pl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zt("not implemented")}_getIdTokenResponse(e){return Zt("not implemented")}_linkToIdToken(e,n){return Zt("not implemented")}_getReauthenticationResolver(e){return Zt("not implemented")}};function Of(t,e){return g(this,null,function*(){return yO(t,"POST","/v1/accounts:signInWithIdp",Xf(t,e))})}var gl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var $f=class extends gl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var co=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return g(this,null,function*(){let s=yield Oi._fromIdTokenResponse(e,r,i),o=UI(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return g(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=UI(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function UI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Hf=class t extends ht{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function pw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hf._fromErrorAndOperation(t,s,e,r):s})}function kO(t,e,n=!1){return g(this,null,function*(){let r=yield oo(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return co._forOperation(t,"link",r)})}function FO(t,e,n=!1){return g(this,null,function*(){let{auth:r}=t;if(Yt(r.app))return Promise.reject(Cr(r));let i="reauthenticate";try{let s=yield oo(t,pw(r,i,e,t),n);M(s.idToken,r,"internal-error");let o=tp(s.idToken);M(o,r,"internal-error");let{sub:a}=o;return M(t.uid===a,r,"user-mismatch"),co._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&kn(r,"user-mismatch"),s}})}function LO(t,e,n=!1){return g(this,null,function*(){if(Yt(t.app))return Promise.reject(Cr(t));let r="signIn",i=yield pw(t,r,e),s=yield co._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function cp(t,e,n,r){return Le(t).onIdTokenChanged(e,n,r)}function lp(t,e,n){return Le(t).beforeAuthStateChanged(e,n)}var ml="__sak";var vl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ml,"1"),this.storage.removeItem(ml),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var VO=1e3,jO=10,UO=(()=>{class t extends vl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uw(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);TO()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,jO):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},VO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return g(this,null,function*(){yield Hn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return g(this,null,function*(){let r=yield Hn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return g(this,null,function*(){yield Hn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),gw=UO;var BO=(()=>{class t extends vl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),up=BO;function $O(t){return Promise.all(t.map(e=>g(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var HO=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return g(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>g(this,null,function*(){return u(r.origin,o)})),l=yield $O(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function mw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Wf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return g(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=mw("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Mt(){return window}function WO(t){Mt().location.href=t}function vw(){return typeof Mt().WorkerGlobalScope<"u"&&typeof Mt().importScripts=="function"}function zO(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function GO(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qO(){return vw()?self:null}var yw="firebaseLocalStorageDb",YO=1,yl="firebaseLocalStorage",_w="fbase_key",Tr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function El(t,e){return t.transaction([yl],e?"readwrite":"readonly").objectStore(yl)}function KO(){let t=indexedDB.deleteDatabase(yw);return new Tr(t).toPromise()}function zf(){let t=indexedDB.open(yw,YO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(yl,{keyPath:_w})}catch(i){n(i)}}),t.addEventListener("success",()=>g(this,null,function*(){let r=t.result;r.objectStoreNames.contains(yl)?e(r):(r.close(),yield KO(),e(yield zf()))}))})}function BI(t,e,n){return g(this,null,function*(){let r=El(t,!0).put({[_w]:e,value:n});return new Tr(r).toPromise()})}function ZO(t,e){return g(this,null,function*(){let n=El(t,!1).get(e),r=yield new Tr(n).toPromise();return r===void 0?null:r.value})}function $I(t,e){let n=El(t,!0).delete(e);return new Tr(n).toPromise()}var QO=800,JO=3,XO=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield zf(),this.db)})}_withRetries(n){return g(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>JO)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return vw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=HO._getInstance(qO()),this.receiver._subscribe("keyChanged",(n,r)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var n,r;if(this.activeServiceWorker=yield zO(),!this.activeServiceWorker)return;this.sender=new Wf(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||GO()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let n=yield zf();return yield BI(n,ml,"1"),yield $I(n,ml),!0}catch{}return!1})}_withPendingWrite(n){return g(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>BI(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return g(this,null,function*(){let r=yield this._withRetries(i=>ZO(i,n));return this.localCache[n]=r,r})}_remove(n){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>$I(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return g(this,null,function*(){let n=yield this._withRetries(s=>{let o=El(s,!1).getAll();return new Tr(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),QO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Ew=XO;var Sq=hw("rcb"),Aq=new br(3e4,6e4);function eP(t,e){return e?Qt(e):(M(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var lo=class extends pl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Of(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Of(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Of(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function tP(t){return LO(t.auth,new lo(t),t.bypassAuthState)}function nP(t){let{auth:e,user:n}=t;return M(n,e,"internal-error"),FO(n,new lo(t),t.bypassAuthState)}function rP(t){return g(this,null,function*(){let{auth:e,user:n}=t;return M(n,e,"internal-error"),kO(n,new lo(t),t.bypassAuthState)})}var Gf=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>g(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return g(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tP;case"linkViaPopup":case"linkViaRedirect":return rP;case"reauthViaPopup":case"reauthViaRedirect":return nP;default:kn(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Mq=new br(2e3,1e4);var iP="pendingRedirect",al=new Map,qf=class t extends Gf{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return g(this,null,function*(){let e=al.get(this.auth._key());if(!e){try{let r=(yield sP(this.resolver,this.auth))?yield Hn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}al.set(this.auth._key(),e)}return this.bypassAuthState||al.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return g(this,null,function*(){if(e.type==="signInViaRedirect")return Hn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Hn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function sP(t,e){return g(this,null,function*(){let n=cP(e),r=aP(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function oP(t,e){al.set(t._key(),e)}function aP(t){return Qt(t._redirectPersistence)}function cP(t){return ol(iP,t.config.apiKey,t.name)}function lP(t,e,n=!1){return g(this,null,function*(){if(Yt(t.app))return Promise.reject(Cr(t));let r=ip(t),i=eP(r,e),o=yield new qf(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var uP=10*60*1e3,Yf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Iw(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uP&&this.cachedEventUids.clear(),this.cachedEventUids.has(HI(e))}saveEventToCache(e){this.cachedEventUids.add(HI(e)),this.lastProcessedEventTime=Date.now()}};function HI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Iw({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function dP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iw(t);default:return!1}}function hP(n){return g(this,arguments,function*(t,e={}){return Pi(t,"GET","/v1/projects",e)})}var fP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pP=/^https?/;function gP(t){return g(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield hP(t);for(let n of e)try{if(mP(n))return}catch{}kn(t,"unauthorized-domain")})}function mP(t){let e=kf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!pP.test(n))return!1;if(fP.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var vP=new br(3e4,6e4);function WI(){let t=Mt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yP(t){return new Promise((e,n)=>{var r,i,s;function o(){WI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WI(),n(Dr(t,"network-request-failed"))},timeout:vP.get()})}if(!((i=(r=Mt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Mt().gapi)===null||s===void 0)&&s.load)o();else{let a=hw("iframefcb");return Mt()[a]=()=>{gapi.load?o():n(Dr(t,"network-request-failed"))},NO(`${RO()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw cl=null,e})}var cl=null;function _P(t){return cl=cl||yP(t),cl}var EP=new br(5e3,15e3),IP="__/auth/iframe",wP="emulator/auth/iframe",CP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bP(t){let e=t.config;M(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Jf(e,wP):`https://${t.config.authDomain}/${IP}`,r={apiKey:e.apiKey,appName:t.name,v:On},i=DP.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yr(r).slice(1)}`}function TP(t){return g(this,null,function*(){let e=yield _P(t),n=Mt().gapi;return M(n,t,"internal-error"),e.open({where:document.body,url:bP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CP,dontclear:!0},r=>new Promise((i,s)=>g(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Dr(t,"network-request-failed"),a=Mt().setTimeout(()=>{s(o)},EP.get());function c(){Mt().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var SP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AP=500,MP=600,NP="_blank",RP="http://localhost",_l=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function xP(t,e,n,r=AP,i=MP){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},SP),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ce().toLowerCase();n&&(a=sw(l)?NP:n),rw(l)&&(e=e||RP,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(bO(l)&&a!=="_self")return OP(e||"",a),new _l(null);let d=window.open(e||"",a,u);M(d,t,"popup-blocked");try{d.focus()}catch{}return new _l(d)}function OP(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var PP="__/auth/handler",kP="emulator/auth/handler",FP=encodeURIComponent("fac");function zI(t,e,n,r,i,s){return g(this,null,function*(){M(t.config.authDomain,t,"auth-domain-config-required"),M(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:On,eventId:i};if(e instanceof gl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Zs(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof $f){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${FP}=${encodeURIComponent(c)}`:"";return`${LP(t)}?${yr(a).slice(1)}${l}`})}function LP({config:t}){return t.emulator?Jf(t,kP):`https://${t.authDomain}/${PP}`}var Pf="webStorageSupport",Kf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=up,this._completeRedirectFn=lP,this._overrideRedirectResult=oP}_openPopup(e,n,r,i){return g(this,null,function*(){var s;Fn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield zI(e,n,r,kf(),i);return xP(e,o,mw())})}_openRedirect(e,n,r,i){return g(this,null,function*(){yield this._originValidation(e);let s=yield zI(e,n,r,kf(),i);return WO(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Fn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return g(this,null,function*(){let n=yield TP(e),r=new Yf(e);return n.register("authEvent",i=>(M(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pf,{type:Pf},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Pf];o!==void 0&&n(!!o),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uw()||iw()||rp()}},ww=Kf;var GI="@firebase/auth",qI="1.7.8";var Zf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){M(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function VP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jP(t){xn(new tt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;M(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dw(t)},l=new Bf(r,i,s,c);return xO(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xn(new tt("auth-internal",e=>{let n=ip(e.getProvider("auth").getImmediate());return(r=>new Zf(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fe(GI,qI,VP(t)),fe(GI,qI,"esm2017")}var UP=5*60,BP=gf("authIdTokenMaxAge")||UP,YI=null,$P=t=>e=>g(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BP)return;let i=n?.token;YI!==i&&(YI=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function dp(t=Mi()){let e=no(t,"auth");if(e.isInitialized())return e.getImmediate();let n=op(t,{popupRedirectResolver:ww,persistence:[Ew,gw,up]}),r=gf("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=$P(s.toString());lp(n,o,()=>o(n.currentUser)),cp(n,a=>o(a))}}let i=ff("auth");return i&&ap(n,`http://${i}`),n}function HP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}MO({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Dr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",HP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jP("Browser");var Cw="auth",uo=class{constructor(e){return e}},ho=class{constructor(){return ro(Cw)}};var hp=new w("angularfire2.auth-instances");function Lk(t,e){let n=nl(Cw,t,e);return n&&new uo(n)}function Vk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new uo(r)}}var jk={provide:ho,deps:[[new Fe,hp]]},Uk={provide:uo,useFactory:Lk,deps:[[new Fe,hp],Kt]};function Dw(t,...e){return fe("angularfire",Ir.full,"auth"),ct([Uk,jk,{provide:hp,useFactory:Vk(t),multi:!0,deps:[K,ke,xi,wr,[new Fe,Ri],...e]}])}var bw=At(dp,!0);var Tw="@firebase/database",Sw="1.0.7";var vg="";function Bk(t){vg=t}var Ep=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),he(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Si(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Ip=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Tt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var aC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ep(e)}}catch{}return new Ip},Ar=aC("localStorage"),wp=aC("sessionStorage");var Li=new Nn("@firebase/database"),$k=function(){let t=1;return function(){return t++}}(),cC=function(t){let e=yI(t),n=new Yc;n.update(e);let r=n.digest();return Kc.encodeByteArray(r)},Ao=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ao.apply(null,r):typeof r=="object"?e+=he(r):e+=r,e+=" "}return e},Nr=null,Aw=!0,Hk=function(t,e){m(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Li.logLevel=Z.VERBOSE,Nr=Li.log.bind(Li),e&&wp.set("logging_enabled",!0)):typeof t=="function"?Nr=t:(Nr=null,wp.remove("logging_enabled"))},De=function(...t){if(Aw===!0&&(Aw=!1,Nr===null&&wp.get("logging_enabled")===!0&&Hk(!0)),Nr){let e=Ao.apply(null,t);Nr(e)}},Mo=function(t){return function(...e){De(t,...e)}},Cp=function(...t){let e="FIREBASE INTERNAL ERROR: "+Ao(...t);Li.error(e)},Jt=function(...t){let e=`FIREBASE FATAL ERROR: ${Ao(...t)}`;throw Li.error(e),new Error(e)},je=function(...t){let e="FIREBASE WARNING: "+Ao(...t);Li.warn(e)},Wk=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&je("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lC=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},zk=function(t){if(bt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ui="[MIN_NAME]",Rr="[MAX_NAME]",qi=function(t,e){if(t===e)return 0;if(t===Ui||e===Rr)return-1;if(e===Ui||t===Rr)return 1;{let n=Mw(t),r=Mw(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Gk=function(t,e){return t===e?0:t<e?-1:1},fo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+he(e))},yg=function(t){if(typeof t!="object"||t===null)return he(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=he(e[r]),n+=":",n+=yg(t[e[r]]);return n+="}",n},uC=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ue(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var dC=function(t){m(!lC(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},qk=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Yk=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Kk(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var Zk=new RegExp("^-?(0*)\\d{1,10}$"),Qk=-2147483648,Jk=2147483647,Mw=function(t){if(Zk.test(t)){let e=Number(t);if(e>=Qk&&e<=Jk)return e}return null},Yi=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw je("Exception was thrown by user callback.",n),e},Math.floor(0))}},Xk=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yo=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Dp=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){je(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var bp=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(De("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',je(e)}},_o=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),wl="5",hC="v",fC="s",pC="r",gC="f",mC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vC="ls",yC="p",Tp="ac",_C="websocket",EC="long_polling";var Cl=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ar.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ar.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function eF(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function IC(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let r;if(e===_C)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===EC)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);eF(t)&&(n.ns=t.namespace);let i=[];return Ue(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Sp=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Tt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return oI(this.counters_)}};var fp={},pp={};function _g(t){let e=t.toString();return fp[e]||(fp[e]=new Sp),fp[e]}function tF(t,e){let n=t.toString();return pp[n]||(pp[n]=e()),pp[n]}var Ap=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Nw="start",nF="close",rF="pLPCommand",iF="pRTLPCB",wC="id",CC="pw",DC="ser",sF="cb",oF="seg",aF="ts",cF="d",lF="dframe",bC=1870,TC=30,uF=bC-TC,dF=25e3,hF=3e4,Mp=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Mo(e),this.stats_=_g(n),this.urlFn=c=>(this.appCheckToken&&(c[Tp]=this.appCheckToken),IC(n,EC,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ap(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(hF)),zk(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Np((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Nw)this.id=a,this.password=c;else if(o===nF)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Nw]="t",r[DC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[sF]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hC]=wl,this.transportSessionId&&(r[fC]=this.transportSessionId),this.lastSessionId&&(r[vC]=this.lastSessionId),this.applicationId&&(r[yC]=this.applicationId),this.appCheckToken&&(r[Tp]=this.appCheckToken),typeof location<"u"&&location.hostname&&mC.test(location.hostname)&&(r[pC]=gC);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return bt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!qk()&&!Yk()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=he(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=df(n),i=uC(r,uF);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(bt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[lF]="t",r[wC]=e,r[CC]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=he(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Np=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,bt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=$k(),window[rF+this.uniqueCallbackIdentifier]=e,window[iF+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){De("frame writing exception"),a.stack&&De(a.stack),De(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||De("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[wC]=this.myID,e[CC]=this.myPW,e[DC]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+TC+r.length<=bC;){let o=this.pendingSegs.shift();r=r+"&"+oF+i+"="+o.seg+"&"+aF+i+"="+o.ts+"&"+cF+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(dF)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){bt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{De("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var fF=16384,pF=45e3,Dl=null;typeof MozWebSocket<"u"?Dl=MozWebSocket:typeof WebSocket<"u"&&(Dl=WebSocket);var po=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Mo(this.connId),this.stats_=_g(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[hC]=wl,!bt()&&typeof location<"u"&&location.hostname&&mC.test(location.hostname)&&(a[pC]=gC),r&&(a[fC]=r),i&&(a[vC]=i),s&&(a[Tp]=s),o&&(a[yC]=o),IC(n,_C,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ar.set("previous_websocket_failure",!0);try{let i;if(bt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${wl}/${vg}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Dl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Dl!==null&&!t.forceDisallow_}static previouslyFailed(){return Ar.isInMemoryStorage||Ar.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ar.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Si(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(m(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=he(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=uC(r,fF);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(pF))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),gF=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Mp,po]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=po&&po.isAvailable(),i=r&&!po.previouslyFailed();if(n.webSocketOnly&&(r||je("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[po];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),mF=6e4,vF=5e3,yF=10*1024,_F=100*1024,gp="t",Rw="d",EF="s",xw="r",IF="e",Ow="o",Pw="a",kw="n",Fw="p",wF="h",Rp=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Mo("c:"+this.id+":"),this.transportManager_=new gF(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=yo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_F?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>yF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gp in e){let n=e[gp];n===Pw?this.upgradeIfSecondaryHealthy_():n===xw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ow&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=fo("t",e),r=fo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Fw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Pw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:kw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=fo("t",e),r=fo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=fo(gp,e);if(Rw in e){let r=e[Rw];if(n===wF){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===kw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===EF?this.onConnectionShutdown_(r):n===xw?this.onReset_(r):n===IF?Cp("Server Error: "+r):n===Ow?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cp("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wl!==r&&je("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(mF))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(vF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Fw,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ar.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var bl=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Tl=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Sl=class t extends Tl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ks()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Lw=32,Vw=768,Q=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function q(){return new Q("")}function V(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Vn(t){return t.pieces_.length-t.pieceNum_}function te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Q(t.pieces_,e)}function SC(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function CF(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function AC(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function MC(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Q(e,0)}function pe(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Q)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Ve(t,e){let n=V(t),r=V(e);if(n===null)return e;if(n===r)return Ve(te(t),te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Eg(t,e){if(Vn(t)!==Vn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function pt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Vn(t)>Vn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var xp=class{constructor(e,n){this.errorPrefix_=n,this.parts_=AC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Js(this.parts_[r]);NC(this)}};function DF(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Js(e),NC(t)}function bF(t){let e=t.parts_.pop();t.byteLength_-=Js(e),t.parts_.length>0&&(t.byteLength_-=1)}function NC(t){if(t.byteLength_>Vw)throw new Error(t.errorPrefix_+"has a key path longer than "+Vw+" bytes ("+t.byteLength_+").");if(t.parts_.length>Lw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Lw+") or object contains a cycle "+Sr(t))}function Sr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Op=class t extends Tl{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var go=1e3,TF=60*5*1e3,jw=30*1e3,SF=1.3,AF=3e4,MF="server_kill",Uw=3,Ig=(()=>{class t extends bl{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Mo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=go,this.maxReconnectDelay_=TF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!bt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Op.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Sl.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(he(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Mn,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Tt(n,"w")){let i=vr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();je(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||mI(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jw)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=gI(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+he(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Cp("Unrecognized action received from server: "+he(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>AF&&(this.reconnectDelay_=go),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*SF)}this.onConnectStatus_(!1)}establishConnection_(){return g(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?De("getToken() completed but was canceled"):(De("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new Rp(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{je(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(MF)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&je(h),l())}}})}interrupt(n){De("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){De("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Zs(this.interruptReasons_)&&(this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>yg(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Q(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){De("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Uw&&(this.reconnectDelay_=jw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){De("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Uw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";bt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+vg.replace(/\./g,"-")]=1,Ks()?n["framework.cordova"]=1:Zc()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Sl.getInstance().currentlyOnline();return Zs(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),j=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Bi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new j(Ui,e),i=new j(Ui,n);return this.compare(r,i)!==0}minPost(){return j.MIN}};var Il,Al=class extends Bi{static get __EMPTY_NODE(){return Il}static set __EMPTY_NODE(e){Il=e}compare(e,n){return qi(e.name,n.name)}isDefinedOn(e){throw mr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return j.MIN}maxPost(){return new j(Rr,Il)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new j(e,Il)}toString(){return".key"}},Vi=new Al;var Fi=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ft=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??nt.EMPTY_NODE,this.right=o??nt.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return nt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return nt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Pp=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new ft(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},nt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ft.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ft.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Fi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Fi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Fi(this.root_,null,this.comparator_,!0,e)}};nt.EMPTY_NODE=new Pp;function NF(t,e){return qi(t.name,e.name)}function wg(t,e){return qi(t,e)}var kp;function RF(t){kp=t}var RC=function(t){return typeof t=="number"?"number:"+dC(t):"string:"+t},xC=function(t){if(t.isLeafNode()){let e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Tt(e,".sv"),"Priority must be a string or number.")}else m(t===kp||t.isEmpty(),"priority of unexpected type.");m(t===kp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Bw,$i=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xC(this.priorityNode_)}static set __childrenNodeConstructor(n){Bw=n}static get __childrenNodeConstructor(){return Bw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return $(n)?this:V(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=V(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||Vn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(te(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+RC(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=dC(this.value_):n+=this.value_,this.lazyHash_=cC(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(m(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return m(s>=0,"Unknown leaf type: "+r),m(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),OC,PC;function xF(t){OC=t}function OF(t){PC=t}var Fp=class extends Bi{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?qi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return j.MIN}maxPost(){return new j(Rr,new $i("[PRIORITY-POST]",PC))}makePost(e,n){let r=OC(e);return new j(n,new $i("[PRIORITY-POST]",r))}toString(){return".priority"}},se=new Fp;var PF=Math.log(2),Lp=class{constructor(e){let n=s=>parseInt(Math.log(s)/PF,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Ml=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ft(h,d.node,ft.BLACK,null,null);{let f=parseInt(u/2,10)+c,p=i(c,f),v=i(f+1,l);return d=t[f],h=n?n(d):d,new ft(h,d.node,ft.BLACK,p,v)}},s=function(c){let l=null,u=null,d=t.length,h=function(p,v){let y=d-p,E=d;d-=p;let T=i(y+1,E),G=t[y],L=n?n(G):G;f(new ft(L,G.node,v,null,T))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let v=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));v?h(y,ft.BLACK):(h(y,ft.BLACK),h(y,ft.RED))}return u},o=new Lp(t.length),a=s(o);return new nt(r||e,a)};var mp,ki={},Hi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return m(ki&&se,"ChildrenNode.ts has not been loaded"),mp=mp||new t({".priority":ki},{".priority":se}),mp}get(e){let n=vr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof nt?n:null}hasIndex(e){return Tt(this.indexSet_,e.toString())}addIndex(e,n){m(e!==Vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(j.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Ml(r,e.getCompare()):a=ki;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Qs(this.indexes_,(i,s)=>{let o=vr(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),i===ki)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(j.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Ml(a,o.getCompare())}else return ki;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new j(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Qs(this.indexes_,i=>{if(i===ki)return i;{let s=n.get(e.name);return s?i.remove(new j(e.name,s)):i}});return new t(r,this.indexSet_)}};var mo,O=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&xC(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return mo||(mo=new t(new nt(wg),null,Hi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mo}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?mo:r}}getChild(n){let r=V(n);return r===null?this:this.getImmediateChild(r).getChild(te(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(m(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new j(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?mo:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=V(n);if(i===null)return r;{m(V(n)!==".priority"||Vn(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(te(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(se,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+RC(this.getPriority().val())+":"),this.forEachChild(se,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":cC(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new j(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new j(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new j(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,j.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,j.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===No?-1:0}withIndex(n){if(n===Vi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Vi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(se),s=r.getIterator(se),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Vi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Vp=class extends O{constructor(){super(new nt(wg),O.EMPTY_NODE,Hi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}},No=new Vp;Object.defineProperties(j,{MIN:{value:new j(Ui,O.EMPTY_NODE)},MAX:{value:new j(Rr,No)}});Al.__EMPTY_NODE=O.EMPTY_NODE;$i.__childrenNodeConstructor=O;RF(No);OF(No);var kF=!0;function _e(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new $i(n,_e(e))}if(!(t instanceof Array)&&kF){let n=[],r=!1;if(Ue(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=_e(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new j(o,c)))}}),n.length===0)return O.EMPTY_NODE;let s=Ml(n,NF,o=>o.name,wg);if(r){let o=Ml(n,se.getCompare());return new O(s,_e(e),new Hi({".priority":o},{".priority":se}))}else return new O(s,_e(e),Hi.Default)}else{let n=O.EMPTY_NODE;return Ue(t,(r,i)=>{if(Tt(t,r)&&r.substring(0,1)!=="."){let s=_e(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(_e(e))}}xF(_e);var jp=class extends Bi{constructor(e){super(),this.indexPath_=e,m(!$(e)&&V(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?qi(e.name,n.name):s}makePost(e,n){let r=_e(e),i=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new j(n,i)}maxPost(){let e=O.EMPTY_NODE.updateChild(this.indexPath_,No);return new j(Rr,e)}toString(){return AC(this.indexPath_,0).join("/")}};var Up=class extends Bi{compare(e,n){let r=e.node.compareTo(n.node);return r===0?qi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return j.MIN}maxPost(){return j.MAX}makePost(e,n){let r=_e(e);return new j(n,r)}toString(){return".value"}},FF=new Up;function kC(t){return{type:"value",snapshotNode:t}}function Wi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Co(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Do(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function LF(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var bo=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Co(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Wi(n,r)):o.trackChildChange(Do(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(se,(i,s)=>{n.hasChild(i)||r.trackChildChange(Co(i,s))}),n.isLeafNode()||n.forEachChild(se,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Do(i,s,o))}else r.trackChildChange(Wi(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Nl=class t{constructor(e){this.indexedFilter_=new bo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new j(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(O.EMPTY_NODE);let s=this;return n.forEachChild(se,(o,a)=>{s.matches(new j(o,a))||(i=i.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Bp=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Nl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new j(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=O.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(O.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new j(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return s?.trackChildChange(Do(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(Co(n,d));let v=a.updateImmediateChild(n,O.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(Wi(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Co(l.name,l.node)),s.trackChildChange(Wi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,O.EMPTY_NODE)):e}};var $p=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=se}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ui}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===se}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function VF(t){return t.loadsAllData()?new bo(t.getIndex()):t.hasLimit()?new Bp(t):new Nl(t)}function $w(t){let e={};if(t.isDefault())return e;let n;if(t.index_===se?n="$priority":t.index_===FF?n="$value":t.index_===Vi?n="$key":(m(t.index_ instanceof jp,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=he(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=he(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+he(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=he(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+he(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Hw(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==se&&(e.i=t.index_.toString()),e}var Hp=class t extends bl{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Mo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=$w(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),vr(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=$w(e._queryParams),r=e._path.toString(),i=new Mn;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+yr(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Si(a.responseText)}catch{je("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&je("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Wp=class{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Rl(){return{value:null,children:new Map}}function FC(t,e,n){if($(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=V(e);t.children.has(r)||t.children.set(r,Rl());let i=t.children.get(r);e=te(e),FC(i,e,n)}}function zp(t,e,n){t.value!==null?n(e,t.value):jF(t,(r,i)=>{let s=new Q(e.toString()+"/"+r);zp(i,s,n)})}function jF(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Gp=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ue(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Ww=10*1e3,UF=30*1e3,BF=5*60*1e3,qp=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Gp(e);let r=Ww+(UF-Ww)*Math.random();yo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Ue(e,(i,s)=>{s>0&&Tt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),yo(this.reportStats_.bind(this),Math.floor(Math.random()*2*BF))}};var Nt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Nt||{});function LC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Cg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Dg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Yp=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Nt.ACK_USER_WRITE,this.source=LC()}operationForChild(e){if($(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(e));return new t(q(),n,this.revert)}}else return m(V(this.path)===e,"operationForChild called for unrelated child."),new t(te(this.path),this.affectedTree,this.revert)}};var xl=class t{constructor(e,n){this.source=e,this.path=n,this.type=Nt.LISTEN_COMPLETE}operationForChild(e){return $(this.path)?new t(this.source,q()):new t(this.source,te(this.path))}};var zi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Nt.OVERWRITE}operationForChild(e){return $(this.path)?new t(this.source,q(),this.snap.getImmediateChild(e)):new t(this.source,te(this.path),this.snap)}};var Ol=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Nt.MERGE}operationForChild(e){if($(this.path)){let n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new zi(this.source,q(),n.value):new t(this.source,q(),n)}else return m(V(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Xt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($(e))return this.isFullyInitialized()&&!this.filtered_;let n=V(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Kp=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function $F(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(LF(o.childName,o.snapshotNode))}),vo(t,i,"child_removed",e,r,n),vo(t,i,"child_added",e,r,n),vo(t,i,"child_moved",s,r,n),vo(t,i,"child_changed",e,r,n),vo(t,i,"value",e,r,n),i}function vo(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>WF(t,a,c)),o.forEach(a=>{let c=HF(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function HF(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function WF(t,e,n){if(e.childName==null||n.childName==null)throw mr("Should only compare child_ events.");let r=new j(e.childName,e.snapshotNode),i=new j(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Wl(t,e){return{eventCache:t,serverCache:e}}function Eo(t,e,n,r){return Wl(new Xt(e,n,r),t.serverCache)}function VC(t,e,n,r){return Wl(t.eventCache,new Xt(e,n,r))}function Zp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var vp,zF=()=>(vp||(vp=new nt(Gk)),vp),Be=class t{constructor(e,n=zF()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Ue(e,(r,i)=>{n=n.set(new Q(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:q(),value:this.value};if($(e))return null;{let r=V(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(te(e),n);return s!=null?{path:pe(new Q(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($(e))return this;{let n=V(e),r=this.children.get(n);return r!==null?r.subtree(te(e)):new t(null)}}set(e,n){if($(e))return new t(n,this.children);{let r=V(e),s=(this.children.get(r)||new t(null)).set(te(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=V(e),r=this.children.get(n);if(r){let i=r.remove(te(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if($(e))return this.value;{let n=V(e),r=this.children.get(n);return r?r.get(te(e)):null}}setTree(e,n){if($(e))return n;{let r=V(e),s=(this.children.get(r)||new t(null)).setTree(te(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(q(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(pe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,q(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if($(e))return null;{let s=V(e),o=this.children.get(s);return o?o.findOnPath_(te(e),pe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,q(),n)}foreachOnPath_(e,n,r){if($(e))return this;{this.value&&r(n,this.value);let i=V(e),s=this.children.get(i);return s?s.foreachOnPath_(te(e),pe(n,i),r):new t(null)}}foreach(e){this.foreach_(q(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(pe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var gt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Be(null))}};function Io(t,e,n){if($(e))return new gt(new Be(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ve(i,e);return s=s.updateChild(o,n),new gt(t.writeTree_.set(i,s))}else{let i=new Be(n),s=t.writeTree_.setTree(e,i);return new gt(s)}}}function zw(t,e,n){let r=t;return Ue(n,(i,s)=>{r=Io(r,pe(e,i),s)}),r}function Gw(t,e){if($(e))return gt.empty();{let n=t.writeTree_.setTree(e,new Be(null));return new gt(n)}}function Qp(t,e){return Pr(t,e)!=null}function Pr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ve(n.path,e)):null}function qw(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(se,(r,i)=>{e.push(new j(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new j(r,i.value))}),e}function Ln(t,e){if($(e))return t;{let n=Pr(t,e);return n!=null?new gt(new Be(n)):new gt(t.writeTree_.subtree(e))}}function Jp(t){return t.writeTree_.isEmpty()}function Gi(t,e){return jC(q(),t.writeTree_,e)}function jC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=jC(pe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(pe(t,".priority"),r)),n}}function bg(t,e){return HC(e,t)}function GF(t,e,n,r,i){m(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Io(t.visibleWrites,e,n)),t.lastWriteId=r}function qF(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function YF(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&KF(a,r.path)?i=!1:pt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return ZF(t),!0;if(r.snap)t.visibleWrites=Gw(t.visibleWrites,r.path);else{let a=r.children;Ue(a,c=>{t.visibleWrites=Gw(t.visibleWrites,pe(r.path,c))})}return!0}else return!1}function KF(t,e){if(t.snap)return pt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&pt(pe(t.path,n),e))return!0;return!1}function ZF(t){t.visibleWrites=UC(t.allWrites,QF,q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function QF(t){return t.visible}function UC(t,e,n){let r=gt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)pt(n,o)?(a=Ve(n,o),r=Io(r,a,s.snap)):pt(o,n)&&(a=Ve(o,n),r=Io(r,q(),s.snap.getChild(a)));else if(s.children){if(pt(n,o))a=Ve(n,o),r=zw(r,a,s.children);else if(pt(o,n))if(a=Ve(o,n),$(a))r=zw(r,q(),s.children);else{let c=vr(s.children,V(a));if(c){let l=c.getChild(te(a));r=Io(r,q(),l)}}}else throw mr("WriteRecord should have .snap or .children")}}return r}function BC(t,e,n,r,i){if(!r&&!i){let s=Pr(t.visibleWrites,e);if(s!=null)return s;{let o=Ln(t.visibleWrites,e);if(Jp(o))return n;if(n==null&&!Qp(o,q()))return null;{let a=n||O.EMPTY_NODE;return Gi(o,a)}}}else{let s=Ln(t.visibleWrites,e);if(!i&&Jp(s))return n;if(!i&&n==null&&!Qp(s,q()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(pt(l.path,e)||pt(e,l.path))},a=UC(t.allWrites,o,e),c=n||O.EMPTY_NODE;return Gi(a,c)}}}function JF(t,e,n){let r=O.EMPTY_NODE,i=Pr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(se,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ln(t.visibleWrites,e);return n.forEachChild(se,(o,a)=>{let c=Gi(Ln(s,new Q(o)),a);r=r.updateImmediateChild(o,c)}),qw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ln(t.visibleWrites,e);return qw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function XF(t,e,n,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=pe(e,n);if(Qp(t.visibleWrites,s))return null;{let o=Ln(t.visibleWrites,s);return Jp(o)?i.getChild(n):Gi(o,i.getChild(n))}}function eL(t,e,n,r){let i=pe(e,n),s=Pr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ln(t.visibleWrites,i);return Gi(o,r.getNode().getImmediateChild(n))}else return null}function tL(t,e){return Pr(t.visibleWrites,e)}function nL(t,e,n,r,i,s,o){let a,c=Ln(t.visibleWrites,e),l=Pr(c,q());if(l!=null)a=l;else if(n!=null)a=Gi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function rL(){return{visibleWrites:gt.empty(),allWrites:[],lastWriteId:-1}}function Pl(t,e,n,r){return BC(t.writeTree,t.treePath,e,n,r)}function Tg(t,e){return JF(t.writeTree,t.treePath,e)}function Yw(t,e,n,r){return XF(t.writeTree,t.treePath,e,n,r)}function kl(t,e){return tL(t.writeTree,pe(t.treePath,e))}function iL(t,e,n,r,i,s){return nL(t.writeTree,t.treePath,e,n,r,i,s)}function Sg(t,e,n){return eL(t.writeTree,t.treePath,e,n)}function $C(t,e){return HC(pe(t.treePath,e),t.writeTree)}function HC(t,e){return{treePath:t,writeTree:e}}var Xp=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Do(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Co(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Wi(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Do(r,e.snapshotNode,i.oldSnap));else throw mr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var eg=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},WC=new eg,To=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Xt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sg(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xr(this.viewCache_),s=iL(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function sL(t){return{filter:t}}function oL(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function aL(t,e,n,r,i){let s=new Xp,o,a;if(n.type===Nt.OVERWRITE){let l=n;l.source.fromUser?o=tg(t,e,l.path,l.snap,r,i,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!$(l.path),o=Fl(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Nt.MERGE){let l=n;l.source.fromUser?o=lL(t,e,l.path,l.children,r,i,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=ng(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Nt.ACK_USER_WRITE){let l=n;l.revert?o=hL(t,e,l.path,r,i,s):o=uL(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Nt.LISTEN_COMPLETE)o=dL(t,e,n.path,r,s);else throw mr("Unknown operation type: "+n.type);let c=s.getChanges();return cL(e,o,c),{viewCache:o,changes:c}}function cL(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Zp(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(kC(Zp(e)))}}function zC(t,e,n,r,i,s){let o=e.eventCache;if(kl(r,n)!=null)return e;{let a,c;if($(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=xr(e),u=l instanceof O?l:O.EMPTY_NODE,d=Tg(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Pl(r,xr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=V(n);if(l===".priority"){m(Vn(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=Yw(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=te(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=Yw(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=Sg(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Eo(e,a,o.isFullyInitialized()||$(n),t.filter.filtersNodes())}}function Fl(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if($(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=V(n);if(!c.isCompleteForPath(n)&&Vn(n)>1)return e;let p=te(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,p,WC,null)}let d=VC(e,l,c.isFullyInitialized()||$(n),u.filtersNodes()),h=new To(i,d,s);return zC(t,d,n,i,h,a)}function tg(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new To(i,e,s);if($(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Eo(e,l,!0,t.filter.filtersNodes());else{let d=V(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Eo(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=te(n),f=a.getNode().getImmediateChild(d),p;if($(h))p=r;else{let v=u.getCompleteChild(d);v!=null?SC(h)===".priority"&&v.getChild(MC(h)).isEmpty()?p=v:p=v.updateChild(h,r):p=O.EMPTY_NODE}if(f.equals(p))c=e;else{let v=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Eo(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Kw(t,e){return t.eventCache.isCompleteForChild(e)}function lL(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=pe(n,c);Kw(e,V(u))&&(a=tg(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=pe(n,c);Kw(e,V(u))||(a=tg(t,a,u,l,i,s,o))}),a}function Zw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ng(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;$(n)?l=r:l=new Be(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),p=Zw(t,f,h);c=Fl(t,c,new Q(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let p=e.serverCache.getNode().getImmediateChild(d),v=Zw(t,p,h);c=Fl(t,c,new Q(d),v,i,s,o,a)}}),c}function uL(t,e,n,r,i,s,o){if(kl(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if($(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Fl(t,e,n,c.getNode().getChild(n),i,s,a,o);if($(n)){let l=new Be(null);return c.getNode().forEachChild(Vi,(u,d)=>{l=l.set(new Q(u),d)}),ng(t,e,n,l,i,s,a,o)}else return e}else{let l=new Be(null);return r.foreach((u,d)=>{let h=pe(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),ng(t,e,n,l,i,s,a,o)}}function dL(t,e,n,r,i){let s=e.serverCache,o=VC(e,s.getNode(),s.isFullyInitialized()||$(n),s.isFiltered());return zC(t,o,n,r,WC,i)}function hL(t,e,n,r,i,s){let o;if(kl(r,n)!=null)return e;{let a=new To(r,e,i),c=e.eventCache.getNode(),l;if($(n)||V(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Pl(r,xr(e));else{let d=e.serverCache.getNode();m(d instanceof O,"serverChildren would be complete if leaf node"),u=Tg(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=V(n),d=Sg(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,te(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,O.EMPTY_NODE,te(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Pl(r,xr(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||kl(r,q())!=null,Eo(e,l,o,t.filter.filtersNodes())}}var rg=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new bo(r.getIndex()),s=VF(r);this.processor_=sL(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(O.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(O.EMPTY_NODE,a.getNode(),null),u=new Xt(c,o.isFullyInitialized(),i.filtersNodes()),d=new Xt(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Wl(d,u),this.eventGenerator_=new Kp(this.query_)}get query(){return this.query_}};function fL(t){return t.viewCache_.serverCache.getNode()}function pL(t,e){let n=xr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$(e)&&!n.getImmediateChild(V(e)).isEmpty())?n.getChild(e):null}function Qw(t){return t.eventRegistrations_.length===0}function gL(t,e){t.eventRegistrations_.push(e)}function Jw(t,e,n){let r=[];if(n){m(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Xw(t,e,n,r){e.type===Nt.MERGE&&e.source.queryId!==null&&(m(xr(t.viewCache_),"We should always have a full cache before handling merges"),m(Zp(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=aL(t.processor_,i,e,n,r);return oL(t.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,GC(t,s.changes,s.viewCache.eventCache.getNode(),null)}function mL(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(se,(s,o)=>{r.push(Wi(s,o))}),n.isFullyInitialized()&&r.push(kC(n.getNode())),GC(t,r,n.getNode(),e)}function GC(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return $F(t.eventGenerator_,e,n,i)}var Ll,ig=class{constructor(){this.views=new Map}};function vL(t){m(!Ll,"__referenceConstructor has already been defined"),Ll=t}function yL(){return m(Ll,"Reference.ts has not been loaded"),Ll}function _L(t){return t.views.size===0}function Ag(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return m(s!=null,"SyncTree gave us an op for an invalid query."),Xw(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(Xw(o,e,n,r));return s}}function EL(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Pl(n,i?r:null),c=!1;a?c=!0:r instanceof O?(a=Tg(n,r),c=!1):(a=O.EMPTY_NODE,c=!1);let l=Wl(new Xt(a,c,!1),new Xt(r,i,!1));return new rg(e,l)}return o}function IL(t,e,n,r,i,s){let o=EL(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),gL(o,n),mL(o,n)}function wL(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=jn(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(Jw(l,n,r)),Qw(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(Jw(c,n,r)),Qw(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!jn(t)&&s.push(new(yL())(e._repo,e._path)),{removed:s,events:o}}function qC(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ji(t,e){let n=null;for(let r of t.views.values())n=n||pL(r,e);return n}function YC(t,e){if(e._queryParams.loadsAllData())return zl(t);{let r=e._queryIdentifier;return t.views.get(r)}}function KC(t,e){return YC(t,e)!=null}function jn(t){return zl(t)!=null}function zl(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Vl;function CL(t){m(!Vl,"__referenceConstructor has already been defined"),Vl=t}function DL(){return m(Vl,"Reference.ts has not been loaded"),Vl}var bL=1,jl=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Be(null),this.pendingWriteTree_=rL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function ZC(t,e,n,r,i){return GF(t.pendingWriteTree_,e,n,r,i),i?Ro(t,new zi(LC(),e,n)):[]}function Mr(t,e,n=!1){let r=qF(t.pendingWriteTree_,e);if(YF(t.pendingWriteTree_,e)){let s=new Be(null);return r.snap!=null?s=s.set(q(),!0):Ue(r.children,o=>{s=s.set(new Q(o),!0)}),Ro(t,new Yp(r.path,s,n))}else return[]}function Gl(t,e,n){return Ro(t,new zi(Cg(),e,n))}function TL(t,e,n){let r=Be.fromObject(n);return Ro(t,new Ol(Cg(),e,r))}function SL(t,e){return Ro(t,new xl(Cg(),e))}function AL(t,e,n){let r=Ng(t,n);if(r){let i=Rg(r),s=i.path,o=i.queryId,a=Ve(s,e),c=new xl(Dg(o),a);return xg(t,s,c)}else return[]}function sg(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||KC(o,e))){let c=wL(o,e,n,r);_L(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>jn(f));if(u&&!d){let h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=RL(h);for(let p=0;p<f.length;++p){let v=f[p],y=v.query,E=XC(t,v);t.listenProvider_.startListening(wo(y),Ul(t,y),E.hashFn,E.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(wo(e),null):l.forEach(h=>{let f=t.queryToTagMap.get(ql(h));t.listenProvider_.stopListening(wo(h),f)}))}xL(t,l)}return a}function ML(t,e,n,r){let i=Ng(t,r);if(i!=null){let s=Rg(i),o=s.path,a=s.queryId,c=Ve(o,e),l=new zi(Dg(a),c,n);return xg(t,o,l)}else return[]}function NL(t,e,n,r){let i=Ng(t,r);if(i){let s=Rg(i),o=s.path,a=s.queryId,c=Ve(o,e),l=Be.fromObject(n),u=new Ol(Dg(a),c,l);return xg(t,o,u)}else return[]}function eC(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{let p=Ve(h,i);s=s||ji(f,p),o=o||jn(f)});let a=t.syncPointTree_.get(i);a?(o=o||jn(a),s=s||ji(a,q())):(a=new ig,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=O.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{let v=ji(p,q());v&&(s=s.updateImmediateChild(f,v))}));let l=KC(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=ql(e);m(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=OL();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let u=bg(t.pendingWriteTree_,i),d=IL(a,e,n,u,s,c);if(!l&&!o&&!r){let h=YC(a,e);d=d.concat(PL(t,e,h))}return d}function Mg(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ve(o,e),l=ji(a,c);if(l)return l});return BC(i,e,s,n,!0)}function Ro(t,e){return QC(e,t.syncPointTree_,null,bg(t.pendingWriteTree_,q()))}function QC(t,e,n,r){if($(t.path))return JC(t,e,n,r);{let i=e.get(q());n==null&&i!=null&&(n=ji(i,q()));let s=[],o=V(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=$C(r,o);s=s.concat(QC(a,c,l,u))}return i&&(s=s.concat(Ag(i,t,r,n))),s}}function JC(t,e,n,r){let i=e.get(q());n==null&&i!=null&&(n=ji(i,q()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=$C(r,o),u=t.operationForChild(o);u&&(s=s.concat(JC(u,a,c,l)))}),i&&(s=s.concat(Ag(i,t,r,n))),s}function XC(t,e){let n=e.query,r=Ul(t,n);return{hashFn:()=>(fL(e)||O.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?AL(t,n._path,r):SL(t,n._path);{let s=Kk(i,n);return sg(t,n,null,s)}}}}function Ul(t,e){let n=ql(e);return t.queryToTagMap.get(n)}function ql(t){return t._path.toString()+"$"+t._queryIdentifier}function Ng(t,e){return t.tagToQueryMap.get(e)}function Rg(t){let e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}}function xg(t,e,n){let r=t.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=bg(t.pendingWriteTree_,e);return Ag(r,n,i,null)}function RL(t){return t.fold((e,n,r)=>{if(n&&jn(n))return[zl(n)];{let i=[];return n&&(i=qC(n)),Ue(r,(s,o)=>{i=i.concat(o)}),i}})}function wo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(DL())(t._repo,t._path):t}function xL(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=ql(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function OL(){return bL++}function PL(t,e,n){let r=e._path,i=Ul(t,e),s=XC(t,n),o=t.listenProvider_.startListening(wo(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)m(!jn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!$(l)&&u&&jn(u))return[zl(u).query];{let h=[];return u&&(h=h.concat(qC(u).map(f=>f.query))),Ue(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(wo(u),Ul(t,u))}}return o}var og=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},ag=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=pe(this.path_,e);return new t(this.syncTree_,n)}node(){return Mg(this.syncTree_,this.path_)}},kL=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},tC=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return FL(t[".sv"],e,n);if(typeof t[".sv"]=="object")return LL(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},FL=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},LL=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},VL=function(t,e,n,r){return Og(e,new ag(n,t),r)},eD=function(t,e,n){return Og(t,new og(e),n)};function Og(t,e,n){let r=t.getPriority().val(),i=tC(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=tC(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new $i(a,_e(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new $i(i))),o.forEachChild(se,(a,c)=>{let l=Og(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var So=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Pg(t,e){let n=e instanceof Q?e:new Q(e),r=t,i=V(n);for(;i!==null;){let s=vr(r.node.children,i)||{children:{},childCount:0};r=new So(i,r,s),n=te(n),i=V(n)}return r}function Ki(t){return t.node.value}function tD(t,e){t.node.value=e,cg(t)}function nD(t){return t.node.childCount>0}function jL(t){return Ki(t)===void 0&&!nD(t)}function Yl(t,e){Ue(t.node.children,(n,r)=>{e(new So(n,t,r))})}function rD(t,e,n,r){n&&!r&&e(t),Yl(t,i=>{rD(i,e,!0,r)}),n&&r&&e(t)}function UL(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function xo(t){return new Q(t.parent===null?t.name:xo(t.parent)+"/"+t.name)}function cg(t){t.parent!==null&&BL(t.parent,t.name,t)}function BL(t,e,n){let r=jL(n),i=Tt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,cg(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,cg(t))}var $L=/[\[\].#$\/\u0000-\u001F\u007F]/,HL=/[\[\].#$\u0000-\u001F\u007F]/,yp=10*1024*1024,iD=function(t){return typeof t=="string"&&t.length!==0&&!$L.test(t)},sD=function(t){return typeof t=="string"&&t.length!==0&&!HL.test(t)},WL=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sD(t)};var oD=function(t,e,n,r){r&&e===void 0||kg(Qc(t,"value"),e,n)},kg=function(t,e,n){let r=n instanceof Q?new xp(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Sr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Sr(r)+" with contents = "+e.toString());if(lC(e))throw new Error(t+"contains "+e.toString()+" "+Sr(r));if(typeof e=="string"&&e.length>yp/3&&Js(e)>yp)throw new Error(t+"contains a string greater than "+yp+" utf8 bytes "+Sr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ue(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!iD(o)))throw new Error(t+" contains an invalid key ("+o+") "+Sr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);DF(r,o),kg(t,a,r),bF(r)}),i&&s)throw new Error(t+' contains ".value" child '+Sr(r)+" in addition to actual children.")}};var aD=function(t,e,n,r){if(!(r&&n===void 0)&&!sD(n))throw new Error(Qc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},zL=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aD(t,e,n,r)},Fg=function(t,e){if(V(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},GL=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!iD(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!WL(n))throw new Error(Qc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var lg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Lg(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Eg(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function cD(t,e,n){Lg(t,n),lD(t,r=>Eg(r,e))}function en(t,e,n){Lg(t,n),lD(t,r=>pt(r,e)||pt(e,r))}function lD(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(qL(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function qL(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Nr&&De("event: "+n.toString()),Yi(r)}}}var YL="repo_interrupt",KL=25,ug=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rl(),this.transactionQueueTree_=new So,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function ZL(t,e,n){if(t.stats_=_g(t.repoInfo_),t.forceRestClient_||Xk())t.server_=new Hp(t.repoInfo_,(r,i,s,o)=>{nC(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>rC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{he(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ig(t.repoInfo_,e,(r,i,s,o)=>{nC(t,r,i,s,o)},r=>{rC(t,r)},r=>{QL(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=tF(t.repoInfo_,()=>new qp(t.stats_,t.server_)),t.infoData_=new Wp,t.infoSyncTree_=new jl({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Gl(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),jg(t,"connected",!1),t.serverSyncTree_=new jl({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);en(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function uD(t){let n=t.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Vg(t){return kL({timestamp:uD(t)})}function nC(t,e,n,r,i){t.dataUpdateCount++;let s=new Q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Qs(n,l=>_e(l));o=NL(t.serverSyncTree_,s,c,i)}else{let c=_e(n);o=ML(t.serverSyncTree_,s,c,i)}else if(r){let c=Qs(n,l=>_e(l));o=TL(t.serverSyncTree_,s,c)}else{let c=_e(n);o=Gl(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Kl(t,s)),en(t.eventQueue_,a,o)}function rC(t,e){jg(t,"connected",e),e===!1&&XL(t)}function QL(t,e){Ue(e,(n,r)=>{jg(t,n,r)})}function jg(t,e,n){let r=new Q("/.info/"+e),i=_e(n);t.infoData_.updateSnapshot(r,i);let s=Gl(t.infoSyncTree_,r,i);en(t.eventQueue_,r,s)}function dD(t){return t.nextWriteId_++}function JL(t,e,n,r,i){Ug(t,"set",{path:e.toString(),value:n,priority:r});let s=Vg(t),o=_e(n,r),a=Mg(t.serverSyncTree_,e),c=eD(o,a,s),l=dD(t),u=ZC(t.serverSyncTree_,e,c,l,!0);Lg(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{let p=h==="ok";p||je("set at "+e+" failed: "+h);let v=Mr(t.serverSyncTree_,l,!p);en(t.eventQueue_,e,v),n1(t,i,h,f)});let d=mD(t,e);Kl(t,d),en(t.eventQueue_,d,[])}function XL(t){Ug(t,"onDisconnectEvents");let e=Vg(t),n=Rl();zp(t.onDisconnect_,q(),(i,s)=>{let o=VL(i,s,t.serverSyncTree_,e);FC(n,i,o)});let r=[];zp(n,q(),(i,s)=>{r=r.concat(Gl(t.serverSyncTree_,i,s));let o=mD(t,i);Kl(t,o)}),t.onDisconnect_=Rl(),en(t.eventQueue_,q(),r)}function e1(t,e,n){let r;V(e._path)===".info"?r=eC(t.infoSyncTree_,e,n):r=eC(t.serverSyncTree_,e,n),cD(t.eventQueue_,e._path,r)}function iC(t,e,n){let r;V(e._path)===".info"?r=sg(t.infoSyncTree_,e,n):r=sg(t.serverSyncTree_,e,n),cD(t.eventQueue_,e._path,r)}function t1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(YL)}function Ug(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),De(n,...e)}function n1(t,e,n,r){e&&Yi(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function hD(t,e,n){return Mg(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function Bg(t,e=t.transactionQueueTree_){if(e||Zl(t,e),Ki(e)){let n=pD(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&r1(t,xo(e),n)}else nD(e)&&Yl(e,n=>{Bg(t,n)})}function r1(t,e,n){let r=n.map(l=>l.currentWriteId),i=hD(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ve(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Ug(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Mr(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Zl(t,Pg(t.transactionQueueTree_,e)),Bg(t,t.transactionQueueTree_),en(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Yi(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{je("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Kl(t,e)}},o)}function Kl(t,e){let n=fD(t,e),r=xo(n),i=pD(t,n);return i1(t,i,r),r}function i1(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ve(n,c.path),u=!1,d;if(m(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Mr(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=KL)u=!0,d="maxretry",i=i.concat(Mr(t.serverSyncTree_,c.currentWriteId,!0));else{let h=hD(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){kg("transaction failed: Data returned ",f,c.path);let p=_e(f);typeof f=="object"&&f!=null&&Tt(f,".priority")||(p=p.updatePriority(h.getPriority()));let y=c.currentWriteId,E=Vg(t),T=eD(p,h,E);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=T,c.currentWriteId=dD(t),o.splice(o.indexOf(y),1),i=i.concat(ZC(t.serverSyncTree_,c.path,T,c.currentWriteId,c.applyLocally)),i=i.concat(Mr(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",i=i.concat(Mr(t.serverSyncTree_,c.currentWriteId,!0))}en(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Zl(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Yi(r[a]);Bg(t,t.transactionQueueTree_)}function fD(t,e){let n,r=t.transactionQueueTree_;for(n=V(e);n!==null&&Ki(r)===void 0;)r=Pg(r,n),e=te(e),n=V(e);return r}function pD(t,e){let n=[];return gD(t,e,n),n.sort((r,i)=>r.order-i.order),n}function gD(t,e,n){let r=Ki(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Yl(e,i=>{gD(t,i,n)})}function Zl(t,e){let n=Ki(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,tD(e,n.length>0?n:void 0)}Yl(e,r=>{Zl(t,r)})}function mD(t,e){let n=xo(fD(t,e)),r=Pg(t.transactionQueueTree_,e);return UL(r,i=>{_p(t,i)}),_p(t,r),rD(r,i=>{_p(t,i)}),n}function _p(t,e){let n=Ki(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(m(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Mr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?tD(e,void 0):n.length=s+1,en(t.eventQueue_,xo(e),i);for(let o=0;o<r.length;o++)Yi(r[o])}}function s1(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function o1(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):je(`Invalid query segment '${n}' in query '${t}'`)}return e}var sC=function(t,e){let n=a1(t),r=n.namespace;n.domain==="firebase.com"&&Jt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Jt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Wk();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Cl(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Q(n.pathString)}},a1=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=s1(t.substring(u,d)));let h=o1(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var oC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",c1=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=oC.charAt(n%64),n=Math.floor(n/64);m(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=oC.charAt(e[i]);return m(o.length===20,"nextPushId: Length should be 20."),o}}();var Bl=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+he(this.snapshot.exportVal())}},$l=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var dg=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var hg=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return $(this._path)?null:SC(this._path)}get ref(){return new tn(this._repo,this._path)}get _queryIdentifier(){let e=Hw(this._queryParams),n=yg(e);return n==="{}"?"default":n}get _queryObject(){return Hw(this._queryParams)}isEqual(e){if(e=Le(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Eg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+CF(this._path)}};var tn=class t extends hg{constructor(e,n){super(e,n,new $p,!1)}get parent(){let e=MC(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Hl=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Q(e),r=Or(this.ref,e);return new t(this._node.getChild(n),r,se)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Or(this.ref,r),se)))}hasChild(e){let n=new Q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function vD(t,e){return t=Le(t),t._checkNotDeleted("ref"),e!==void 0?Or(t._root,e):t._root}function Or(t,e){return t=Le(t),V(t._path)===null?zL("child","path",e,!1):aD("child","path",e,!1),new tn(t._repo,pe(t._path,e))}function yD(t,e){t=Le(t),Fg("push",t._path),oD("push",e,t._path,!0);let n=uD(t._repo),r=c1(n),i=Or(t,r),s=Or(t,r),o;return e!=null?o=Ql(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function _D(t){return Fg("remove",t._path),Ql(t,null)}function Ql(t,e){t=Le(t),Fg("set",t._path),oD("set",e,t._path,!1);let n=new Mn;return JL(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var fg=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Bl("value",this,new Hl(e.snapshotNode,new tn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $l(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},pg=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $l(this,e,n):null}createEvent(e,n){m(e.childName!=null,"Child events should have a childName.");let r=Or(new tn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Bl(e.type,this,new Hl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function l1(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{iC(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new dg(n,s||void 0),a=e==="value"?new fg(o):new pg(e,o);return e1(t._repo,t,a),()=>iC(t._repo,t,a)}function $g(t,e,n,r){return l1(t,"value",e,n,r)}vL(tn);CL(tn);var u1="FIREBASE_DATABASE_EMULATOR_HOST",gg={},d1=!1;function h1(t,e,n,r){t.repoInfo_=new Cl(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function f1(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Jt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),De("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=sC(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[u1]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=sC(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new _o(_o.OWNER):new bp(t.name,t.options,e);GL("Invalid Firebase Database URL",o),$(o.path)||Jt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=g1(a,t,u,new Dp(t.name,n));return new mg(d,t)}function p1(t,e){let n=gg[e];(!n||n[t.key]!==t)&&Jt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),t1(t),delete n[t.key]}function g1(t,e,n,r){let i=gg[e.name];i||(i={},gg[e.name]=i);let s=i[t.toURLString()];return s&&Jt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new ug(t,d1,n,r),i[t.toURLString()]=s,s}var mg=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ZL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new tn(this._repo,q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(p1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Jt("Cannot call "+e+" on a deleted database.")}};function ED(t=Mi(),e){let n=no(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=cI("database");r&&ID(n,...r)}return n}function ID(t,e,n,r={}){t=Le(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Jt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new _o(_o.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:lI(r.mockUserToken,t.app.options.projectId);s=new _o(o)}h1(i,e,n,s)}function m1(t){Bk(On),xn(new tt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return f1(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),fe(Tw,Sw,t),fe(Tw,Sw,"esm2017")}Ig.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ig.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};m1();var kr=class{constructor(e){return e}},wD="database",Hg=class{constructor(){return ro(wD)}};var Wg=new w("angularfire2.database-instances");function v1(t,e){let n=nl(wD,t,e);return n&&new kr(n)}function y1(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new kr(r)}}var _1={provide:Hg,deps:[[new Fe,Wg]]},E1={provide:kr,useFactory:v1,deps:[[new Fe,Wg],Kt]};function CD(t,...e){return fe("angularfire",Ir.full,"rtdb"),ct([E1,_1,{provide:Wg,useFactory:y1(t),multi:!0,deps:[K,ke,xi,wr,[new Fe,ho],[new Fe,Ri],...e]}])}var DD=At(ED,!0);var bD=At(yD,!0);var Oo=At(vD,!0);var TD=At(_D,!0);var zg=At(Ql,!0);var P="primary",Zo=Symbol("RouteTitle"),Zg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ts(t){return new Zg(t)}function w1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function C1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Rt(t[n],e[n]))return!1;return!0}function Rt(t,e){let n=t?Qg(t):void 0,r=e?Qg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!PD(t[i],e[i]))return!1;return!0}function Qg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function PD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function kD(t){return t.length>0?t[t.length-1]:null}function Un(t){return Ku(t)?t:gr(t)?re(Promise.resolve(t)):S(t)}var D1={exact:LD,subset:VD},FD={exact:b1,subset:T1,ignored:()=>!0};function SD(t,e,n){return D1[n.paths](t.root,e.root,n.matrixParams)&&FD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function b1(t,e){return Rt(t,e)}function LD(t,e,n){if(!Lr(t.segments,e.segments)||!eu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!LD(t.children[r],e.children[r],n))return!1;return!0}function T1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>PD(t[n],e[n]))}function VD(t,e,n){return jD(t,e,e.segments,n)}function jD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Lr(i,n)||e.hasChildren()||!eu(i,n,r))}else if(t.segments.length===n.length){if(!Lr(t.segments,n)||!eu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!VD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Lr(t.segments,i)||!eu(t.segments,i,r)||!t.children[P]?!1:jD(t.children[P],e,s,r)}}function eu(t,e,n){return e.every((r,i)=>FD[n](t[i].parameters,r.parameters))}var rn=class{constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ts(this.queryParams),this._queryParamMap}toString(){return M1.serialize(this)}},Y=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tu(this)}},Fr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ts(this.parameters),this._parameterMap}toString(){return BD(this)}};function S1(t,e){return Lr(t,e)&&t.every((n,r)=>Rt(n.parameters,e[r].parameters))}function Lr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function A1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===P&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==P&&(n=n.concat(e(i,r)))}),n}var Cm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new Uo,providedIn:"root"});let t=e;return t})(),Uo=class{parse(e){let n=new Xg(e);return new rn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Po(e.root,!0)}`,r=x1(e.queryParams),i=typeof e.fragment=="string"?`#${N1(e.fragment)}`:"";return`${n}${r}${i}`}},M1=new Uo;function tu(t){return t.segments.map(e=>BD(e)).join("/")}function Po(t,e){if(!t.hasChildren())return tu(t);if(e){let n=t.children[P]?Po(t.children[P],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==P&&r.push(`${i}:${Po(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=A1(t,(r,i)=>i===P?[Po(t.children[P],!1)]:[`${i}:${Po(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[P]!=null?`${tu(t)}/${n[0]}`:`${tu(t)}/(${n.join("//")})`}}function UD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jl(t){return UD(t).replace(/%3B/gi,";")}function N1(t){return encodeURI(t)}function Jg(t){return UD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nu(t){return decodeURIComponent(t)}function AD(t){return nu(t.replace(/\+/g,"%20"))}function BD(t){return`${Jg(t.path)}${R1(t.parameters)}`}function R1(t){return Object.entries(t).map(([e,n])=>`;${Jg(e)}=${Jg(n)}`).join("")}function x1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Jl(n)}=${Jl(i)}`).join("&"):`${Jl(n)}=${Jl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var O1=/^[^\/()?;#]+/;function Gg(t){let e=t.match(O1);return e?e[0]:""}var P1=/^[^\/()?;=#]+/;function k1(t){let e=t.match(P1);return e?e[0]:""}var F1=/^[^=?&#]+/;function L1(t){let e=t.match(F1);return e?e[0]:""}var V1=/^[^&#]+/;function j1(t){let e=t.match(V1);return e?e[0]:""}var Xg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[P]=new Y(e,n)),r}parseSegment(){let e=Gg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new D(4009,!1);return this.capture(e),new Fr(nu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=k1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Gg(this.remaining);i&&(r=i,this.capture(r))}e[nu(n)]=nu(r)}parseQueryParam(e){let n=L1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=j1(this.remaining);o&&(r=o,this.capture(r))}let i=AD(n),s=AD(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Gg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new D(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=P);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[P]:new Y([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new D(4011,!1)}};function $D(t){return t.segments.length>0?new Y([],{[P]:t}):t}function HD(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=HD(i);if(r===P&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Y(t.segments,e);return U1(n)}function U1(t){if(t.numberOfChildren===1&&t.children[P]){let e=t.children[P];return new Y(t.segments.concat(e.segments),e.children)}return t}function Bo(t){return t instanceof rn}function B1(t,e,n=null,r=null){let i=WD(t);return zD(i,e,n,r)}function WD(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Y(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=$D(r);return e??i}function zD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return qg(i,i,i,n,r);let s=$1(e);if(s.toRoot())return qg(i,i,new Y([],{}),n,r);let o=H1(s,i,t),a=o.processChildren?Lo(o.segmentGroup,o.index,s.commands):qD(o.segmentGroup,o.index,s.commands);return qg(i,o.segmentGroup,a,n,r)}function ru(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function $o(t){return typeof t=="object"&&t!=null&&t.outlets}function qg(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=GD(t,e,n);let a=$D(HD(o));return new rn(a,s,i)}function GD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=GD(s,e,n)}),new Y(t.segments,r)}var iu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ru(r[0]))throw new D(4003,!1);let i=r.find($o);if(i&&i!==kD(r))throw new D(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new iu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new iu(n,e,r)}var Ji=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function H1(t,e,n){if(t.isAbsolute)return new Ji(e,!0,0);if(!n)return new Ji(e,!1,NaN);if(n.parent===null)return new Ji(n,!0,0);let r=ru(t.commands[0])?0:1,i=n.segments.length-1+r;return W1(n,i,t.numberOfDoubleDots)}function W1(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new D(4005,!1);i=r.segments.length}return new Ji(r,!1,i-s)}function z1(t){return $o(t[0])?t[0].outlets:{[P]:t}}function qD(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return Lo(t,e,n);let r=G1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Y(t.segments.slice(0,r.pathIndex),{});return s.children[P]=new Y(t.segments.slice(r.pathIndex),t.children),Lo(s,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?em(t,e,n):r.match?Lo(t,0,i):em(t,e,n)}function Lo(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=z1(n),i={};if(Object.keys(r).some(s=>s!==P)&&t.children[P]&&t.numberOfChildren===1&&t.children[P].segments.length===0){let s=Lo(t.children[P],e,n);return new Y(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=qD(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Y(t.segments,i)}}function G1(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if($o(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ND(c,l,o))return s;r+=2}else{if(!ND(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function em(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if($o(s)){let c=q1(s.outlets);return new Y(r,c)}if(i===0&&ru(n[0])){let c=t.segments[e];r.push(new Fr(c.path,MD(n[0]))),i++;continue}let o=$o(s)?s.outlets[P]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ru(a)?(r.push(new Fr(o,MD(a))),i+=2):(r.push(new Fr(o,{})),i++)}return new Y(r,{})}function q1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=em(new Y([],{}),0,r))}),e}function MD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ND(t,e,n){return t==n.path&&Rt(e,n.parameters)}var Vo="imperative",Ee=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ee||{}),rt=class{constructor(e,n){this.id=e,this.url=n}},Ho=class extends rt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ee.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vr=class extends rt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ee.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ke=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ke||{}),tm=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(tm||{}),nn=class extends rt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ee.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},jr=class extends rt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ee.NavigationSkipped}},Wo=class extends rt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ee.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},su=class extends rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nm=class extends rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rm=class extends rt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ee.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},im=class extends rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sm=class extends rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},om=class{constructor(e){this.route=e,this.type=Ee.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},am=class{constructor(e){this.route=e,this.type=Ee.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cm=class{constructor(e){this.snapshot=e,this.type=Ee.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lm=class{constructor(e){this.snapshot=e,this.type=Ee.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},um=class{constructor(e){this.snapshot=e,this.type=Ee.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dm=class{constructor(e){this.snapshot=e,this.type=Ee.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zo=class{},ns=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Y1(t,e){return t.providers&&!t._injector&&(t._injector=Uh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function mt(t){return t.outlet||P}function K1(t,e){let n=t.filter(r=>mt(r)===e);return n.push(...t.filter(r=>mt(r)!==e)),n}function Qo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var hm=class{get injector(){return Qo(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new hu(this.rootInjector),this.attachRef=null}},hu=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new hm(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(b(Pe))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ou=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=fm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=fm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=pm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pm(e,this._root).map(n=>n.value)}};function fm(t,e){if(t===e.value)return e;for(let n of e.children){let r=fm(t,n);if(r)return r}return null}function pm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=pm(t,n);if(r.length)return r.unshift(e),r}return[]}var Ye=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Qi(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var au=class extends ou{constructor(e,n){super(e),this.snapshot=n,Dm(this,e)}toString(){return this.snapshot.toString()}};function YD(t){let e=Z1(t),n=new ve([new Fr("",{})]),r=new ve({}),i=new ve({}),s=new ve({}),o=new ve(""),a=new rs(n,r,s,o,i,P,t,e.root);return a.snapshot=e.root,new au(new Ye(a,[]),e)}function Z1(t){let e={},n={},r={},i="",s=new Xi([],e,r,i,n,P,t,null,{});return new lu("",new Ye(s,[]))}var rs=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(R(l=>l[Zo]))??S(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(R(e=>ts(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(R(e=>ts(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cu(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),i?.data),t._resolvedData)}:r={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},i&&ZD(i)&&(r.resolve[Zo]=i.title),r}var Xi=class{get title(){return this.data?.[Zo]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ts(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ts(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},lu=class extends ou{constructor(e,n){super(n),this.url=e,Dm(this,n)}toString(){return KD(this._root)}};function Dm(t,e){e.value._routerState=t,e.children.forEach(n=>Dm(t,n))}function KD(t){let e=t.children.length>0?` { ${t.children.map(KD).join(", ")} } `:"";return`${t.value}${e}`}function Yg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Rt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Rt(e.params,n.params)||t.paramsSubject.next(n.params),C1(e.url,n.url)||t.urlSubject.next(n.url),Rt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function gm(t,e){let n=Rt(t.params,e.params)&&S1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||gm(t.parent,e.parent))}function ZD(t){return typeof t.title=="string"||t.title===null}var bm=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=P,this.activateEvents=new ce,this.deactivateEvents=new ce,this.attachEvents=new ce,this.detachEvents=new ce,this.parentContexts=_(hu),this.location=_(Nc),this.changeDetector=_(Di),this.inputBinder=_(Tm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new D(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new mm(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Me({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[En]});let t=e;return t})(),mm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===rs?this.route:e===hu?this.childContexts:this.parent.get(e,n)}},Tm=new w("");function Q1(t,e,n){let r=Go(t,e._root,n?n._root:void 0);return new au(r,e)}function Go(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=J1(t,e,n);return new Ye(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Go(t,a)),o}}let r=X1(e.value),i=e.children.map(s=>Go(t,s));return new Ye(r,i)}}function J1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Go(t,r,i);return Go(t,r)})}function X1(t){return new rs(new ve(t.url),new ve(t.params),new ve(t.queryParams),new ve(t.fragment),new ve(t.data),t.outlet,t.component,t)}var qo=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},QD="ngNavigationCancelingError";function uu(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Bo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JD(!1,Ke.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function JD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[QD]=!0,n.cancellationCode=e,n}function eV(t){return XD(t)&&Bo(t.url)}function XD(t){return!!t&&t[QD]}var tV=(t,e,n,r)=>R(i=>(new vm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),vm=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Yg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Qi(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Qi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Qi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Qi(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new dm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new lm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Yg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Yg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},du=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},es=class{constructor(e,n){this.component=e,this.route=n}};function nV(t,e,n){let r=t._root,i=e?e._root:null;return ko(r,i,n,[r.value])}function rV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ss(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!fy(t)?t:e.get(t):r}function ko(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Qi(e);return t.children.forEach(o=>{iV(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>jo(a,n.getContext(o),i)),i}function iV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=sV(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new du(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ko(t,e,a?a.children:null,r,i):ko(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new es(a.outlet.component,o))}else o&&jo(e,a,i),i.canActivateChecks.push(new du(r)),s.component?ko(t,null,a?a.children:null,r,i):ko(t,null,n,r,i);return i}function sV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Lr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Lr(t.url,e.url)||!Rt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gm(t,e)||!Rt(t.queryParams,e.queryParams);case"paramsChange":default:return!gm(t,e)}}function jo(t,e,n){let r=Qi(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?jo(o,e.children.getContext(s),n):jo(o,null,n):jo(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new es(e.outlet.component,i)):n.canDeactivateChecks.push(new es(null,i)):n.canDeactivateChecks.push(new es(null,i))}function Jo(t){return typeof t=="function"}function oV(t){return typeof t=="boolean"}function aV(t){return t&&Jo(t.canLoad)}function cV(t){return t&&Jo(t.canActivate)}function lV(t){return t&&Jo(t.canActivateChild)}function uV(t){return t&&Jo(t.canDeactivate)}function dV(t){return t&&Jo(t.canMatch)}function eb(t){return t instanceof xt||t?.name==="EmptyError"}var Xl=Symbol("INITIAL_VALUE");function is(){return ze(t=>Oa(t.map(e=>e.pipe(Ot(1),td(Xl)))).pipe(R(e=>{for(let n of e)if(n!==!0){if(n===Xl)return Xl;if(n===!1||hV(n))return n}return!0}),We(e=>e!==Xl),Ot(1)))}function hV(t){return Bo(t)||t instanceof qo}function fV(t,e){return ue(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?S(H(I({},n),{guardsResult:!0})):pV(o,r,i,t).pipe(ue(a=>a&&oV(a)?gV(r,s,t,e):S(a)),R(a=>H(I({},n),{guardsResult:a})))})}function pV(t,e,n,r){return re(t).pipe(ue(i=>EV(i.component,i.route,n,e,r)),vt(i=>i!==!0,!0))}function gV(t,e,n,r){return re(e).pipe(dn(i=>Jr(vV(i.route.parent,r),mV(i.route,r),_V(t,i.path,n),yV(t,i.route,n))),vt(i=>i!==!0,!0))}function mV(t,e){return t!==null&&e&&e(new um(t)),S(!0)}function vV(t,e){return t!==null&&e&&e(new cm(t)),S(!0)}function yV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return S(!0);let i=r.map(s=>Pa(()=>{let o=Qo(e)??n,a=ss(s,o),c=cV(a)?a.canActivate(e,t):lt(o,()=>a(e,t));return Un(c).pipe(vt())}));return S(i).pipe(is())}function _V(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>rV(o)).filter(o=>o!==null).map(o=>Pa(()=>{let a=o.guards.map(c=>{let l=Qo(o.node)??n,u=ss(c,l),d=lV(u)?u.canActivateChild(r,t):lt(l,()=>u(r,t));return Un(d).pipe(vt())});return S(a).pipe(is())}));return S(s).pipe(is())}function EV(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return S(!0);let o=s.map(a=>{let c=Qo(e)??i,l=ss(a,c),u=uV(l)?l.canDeactivate(t,e,n,r):lt(c,()=>l(t,e,n,r));return Un(u).pipe(vt())});return S(o).pipe(is())}function IV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return S(!0);let s=i.map(o=>{let a=ss(o,t),c=aV(a)?a.canLoad(e,n):lt(t,()=>a(e,n));return Un(c)});return S(s).pipe(is(),tb(r))}function tb(t){return Bu(ae(e=>{if(typeof e!="boolean")throw uu(t,e)}),R(e=>e===!0))}function wV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return S(!0);let s=i.map(o=>{let a=ss(o,t),c=dV(a)?a.canMatch(e,n):lt(t,()=>a(e,n));return Un(c)});return S(s).pipe(is(),tb(r))}var Yo=class{constructor(e){this.segmentGroup=e||null}},Ko=class extends Error{constructor(e){super(),this.urlTree=e}};function Zi(t){return Qr(new Yo(t))}function CV(t){return Qr(new D(4e3,!1))}function DV(t){return Qr(JD(!1,Ke.GuardRejected))}var ym=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return S(r);if(i.numberOfChildren>1||!i.children[P])return CV(`${e.redirectTo}`);i=i.children[P]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,params:f,data:p,title:v}=i,y=lt(s,()=>a({params:f,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,title:v}));if(y instanceof rn)throw new Ko(y);n=y}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Ko(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new rn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Y(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new D(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},_m={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bV(t,e,n,r,i){let s=nb(t,e,n);return s.matched?(r=Y1(e,r),wV(r,e,n,i).pipe(R(o=>o===!0?s:I({},_m)))):S(s)}function nb(t,e,n){if(e.path==="**")return TV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},_m):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||w1)(n,t,e);if(!i)return I({},_m);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?I(I({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function TV(t){return{matched:!0,parameters:t.length>0?kD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function RD(t,e,n,r){return n.length>0&&MV(t,n,r)?{segmentGroup:new Y(e,AV(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&NV(t,n,r)?{segmentGroup:new Y(t.segments,SV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function SV(t,e,n,r){let i={};for(let s of n)if(fu(t,e,s)&&!r[mt(s)]){let o=new Y([],{});i[mt(s)]=o}return I(I({},r),i)}function AV(t,e){let n={};n[P]=e;for(let r of t)if(r.path===""&&mt(r)!==P){let i=new Y([],{});n[mt(r)]=i}return n}function MV(t,e,n){return n.some(r=>fu(t,e,r)&&mt(r)!==P)}function NV(t,e,n){return n.some(r=>fu(t,e,r))}function fu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function RV(t,e,n){return e.length===0&&!t.children[n]}var Em=class{};function xV(t,e,n,r,i,s,o="emptyOnly"){return new Im(t,e,n,r,i,o,s).recognize()}var OV=31,Im=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new ym(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new D(4002,`'${e.segmentGroup}'`)}recognize(){let e=RD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(R(({children:n,rootSnapshot:r})=>{let i=new Ye(r,n),s=new lu("",i),o=B1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Xi([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),P,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,P,n).pipe(R(r=>({children:r,rootSnapshot:n})),un(r=>{if(r instanceof Ko)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yo?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(R(o=>o instanceof Ye?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return re(s).pipe(dn(o=>{let a=r.children[o],c=K1(n,o);return this.processSegmentGroup(e,c,a,o,i)}),ed((o,a)=>(o.push(...a),o)),hn(null),Xu(),ue(o=>{if(o===null)return Zi(r);let a=rb(o);return PV(a),S(a)}))}processSegment(e,n,r,i,s,o,a){return re(n).pipe(dn(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(un(l=>{if(l instanceof Yo)return S(null);throw l}))),vt(c=>!!c),un(c=>{if(eb(c))return RV(r,i,s)?S(new Em):Zi(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return mt(r)!==o&&(o===P||!fu(i,s,r))?Zi(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):Zi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=nb(n,i,s);if(!c)return Zi(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>OV&&(this.allowRedirects=!1));let f=new Xi(s,l,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,xD(i),mt(i),i.component??i._loadedComponent??null,i,OD(i)),p=cu(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let v=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(ue(y=>this.processSegment(e,r,n,y.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=bV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ze(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ze(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=c,p=new Xi(h,d,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,xD(r),mt(r),r.component??r._loadedComponent??null,r,OD(r)),v=cu(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);let{segmentGroup:y,slicedSegments:E}=RD(n,h,f,l);if(E.length===0&&y.hasChildren())return this.processChildren(u,l,y,p).pipe(R(G=>new Ye(p,G)));if(l.length===0&&E.length===0)return S(new Ye(p,[]));let T=mt(r)===s;return this.processSegment(u,l,y,E,T?P:s,!0,p).pipe(R(G=>new Ye(p,G instanceof Ye?[G]:[])))}))):Zi(n)))}getChildConfig(e,n,r){return n.children?S({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?S({routes:n._loadedRoutes,injector:n._loadedInjector}):IV(e,n,r,this.urlSerializer).pipe(ue(i=>i?this.configLoader.loadChildren(e,n).pipe(ae(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):DV(n))):S({routes:[],injector:e})}};function PV(t){t.sort((e,n)=>e.value.outlet===P?-1:n.value.outlet===P?1:e.value.outlet.localeCompare(n.value.outlet))}function kV(t){let e=t.value.routeConfig;return e&&e.path===""}function rb(t){let e=[],n=new Set;for(let r of t){if(!kV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=rb(r.children);e.push(new Ye(r.value,i))}return e.filter(r=>!n.has(r))}function xD(t){return t.data||{}}function OD(t){return t.resolve||{}}function FV(t,e,n,r,i,s){return ue(o=>xV(t,e,n,r,o.extractedUrl,i,s).pipe(R(({state:a,tree:c})=>H(I({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function LV(t,e){return ue(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return S(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of ib(c))o.add(l);let a=0;return re(o).pipe(dn(c=>s.has(c)?VV(c,r,t,e):(c.data=cu(c,c.parent,t).resolve,S(void 0))),ae(()=>a++),Xr(1),ue(c=>a===o.size?S(n):He))})}function ib(t){let e=t.children.map(n=>ib(n)).flat();return[t,...e]}function VV(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!ZD(i)&&(s[Zo]=i.title),jV(s,t,e,r).pipe(R(o=>(t._resolvedData=o,t.data=cu(t,t.parent,n).resolve,null)))}function jV(t,e,n,r){let i=Qg(t);if(i.length===0)return S({});let s={};return re(i).pipe(ue(o=>UV(t[o],e,n,r).pipe(vt(),ae(a=>{if(a instanceof qo)throw uu(new Uo,a);s[o]=a}))),Xr(1),Ju(s),un(o=>eb(o)?He:Qr(o)))}function UV(t,e,n,r){let i=Qo(e)??r,s=ss(t,i),o=s.resolve?s.resolve(e,n):lt(i,()=>s(e,n));return Un(o)}function Kg(t){return ze(e=>{let n=t(e);return n?re(n).pipe(R(()=>e)):S(e)})}var sb=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===P);return i}getResolvedTitleForRoute(r){return r.data[Zo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>_(BV),providedIn:"root"});let t=e;return t})(),BV=(()=>{let e=class e extends sb{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(b(rI))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Sm=new w("",{providedIn:"root",factory:()=>({})}),$V=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=yi({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ci],decls:1,vars:0,template:function(i,s){i&1&&dt(0,"router-outlet")},dependencies:[bm],encapsulation:2});let t=e;return t})();function Am(t){let e=t.children&&t.children.map(Am),n=e?H(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==P&&(n.component=$V),n}var Mm=new w(""),HV=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(Hh)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return S(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Un(r.loadComponent()).pipe(R(ob),ae(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Yn(()=>{this.componentLoaders.delete(r)})),s=new qr(i,()=>new me).pipe(Gr());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return S({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=WV(i,this.compiler,r,this.onLoadEndListener).pipe(Yn(()=>{this.childrenLoaders.delete(i)})),a=new qr(o,()=>new me).pipe(Gr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WV(t,e,n,r){return Un(t.loadChildren()).pipe(R(ob),ue(i=>i instanceof Ss||Array.isArray(i)?S(i):re(e.compileModuleAsync(i))),R(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Mm,[],{optional:!0,self:!0}).flat()),{routes:o.map(Am),injector:s}}))}function zV(t){return t&&typeof t=="object"&&"default"in t}function ob(t){return zV(t)?t.default:t}var Nm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>_(GV),providedIn:"root"});let t=e;return t})(),GV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qV=new w("");var YV=new w(""),KV=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new me,this.transitionAbortSubject=new me,this.configLoader=_(HV),this.environmentInjector=_(Pe),this.urlSerializer=_(Cm),this.rootContexts=_(hu),this.location=_(Vs),this.inputBindingEnabled=_(Tm,{optional:!0})!==null,this.titleStrategy=_(sb),this.options=_(Sm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(Nm),this.createViewTransition=_(qV,{optional:!0}),this.navigationErrorHandler=_(YV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>S(void 0),this.rootComponentType=null;let r=s=>this.events.next(new om(s)),i=s=>this.events.next(new am(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(H(I(I({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ve({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Vo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(We(o=>o.id!==0),R(o=>H(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ze(o=>{let a=!1,c=!1;return S(o).pipe(ze(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ke.SupersededByNewNavigation),He;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?H(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new jr(l.id,this.urlSerializer.serialize(l.rawUrl),h,tm.IgnoredSameUrlNavigation)),l.resolve(!1),He}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return S(l).pipe(ze(h=>{let f=this.transitions?.getValue();return this.events.next(new Ho(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?He:Promise.resolve(h)}),FV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ae(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=H(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new su(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:v,extras:y}=l,E=new Ho(h,this.urlSerializer.serialize(f),p,v);this.events.next(E);let T=YD(this.rootComponentType).snapshot;return this.currentTransition=o=H(I({},l),{targetSnapshot:T,urlAfterRedirects:f,extras:H(I({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,S(o)}else{let h="";return this.events.next(new jr(l.id,this.urlSerializer.serialize(l.extractedUrl),h,tm.IgnoredByUrlHandlingStrategy)),l.resolve(!1),He}}),ae(l=>{let u=new nm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),R(l=>(this.currentTransition=o=H(I({},l),{guards:nV(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),fV(this.environmentInjector,l=>this.events.next(l)),ae(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw uu(this.urlSerializer,l.guardsResult);let u=new rm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),We(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ke.GuardRejected),!1)),Kg(l=>{if(l.guards.canActivateChecks.length)return S(l).pipe(ae(u=>{let d=new im(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ze(u=>{let d=!1;return S(u).pipe(LV(this.paramsInheritanceStrategy,this.environmentInjector),ae({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Ke.NoDataFromResolver)}}))}),ae(u=>{let d=new sm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Kg(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ae(f=>{d.component=f}),R(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Oa(u(l.targetSnapshot.root)).pipe(hn(null),Ot(1))}),Kg(()=>this.afterPreactivation()),ze(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?re(d).pipe(R(()=>o)):S(o)}),R(l=>{let u=Q1(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=H(I({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),ae(()=>{this.events.next(new zo)}),tV(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ot(1),ae({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),nd(this.transitionAbortSubject.pipe(ae(l=>{throw l}))),Yn(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Ke.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),un(l=>{if(c=!0,XD(l))this.events.next(new nn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),eV(l)?this.events.next(new ns(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Wo(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let d=lt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof qo){let{message:h,cancellationCode:f}=uu(this.urlSerializer,d);this.events.next(new nn(o.id,this.urlSerializer.serialize(o.extractedUrl),h,f)),this.events.next(new ns(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let h=r.errorHandler(l);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return He}))}))}cancelNavigationTransition(r,i,s){let o=new nn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZV(t){return t!==Vo}var QV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>_(JV),providedIn:"root"});let t=e;return t})(),wm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},JV=(()=>{let e=class e extends wm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ur(e)))(s||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ab=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>_(XV),providedIn:"root"});let t=e;return t})(),XV=(()=>{let e=class e extends ab{constructor(){super(...arguments),this.location=_(Vs),this.urlSerializer=_(Cm),this.options=_(Sm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(Nm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new rn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=YD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ho)this.stateMemento=this.createStateMemento();else if(r instanceof jr)this.rawUrlTree=i.initialUrl;else if(r instanceof su){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof zo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof nn&&(r.code===Ke.GuardRejected||r.code===Ke.NoDataFromResolver)?this.restoreHistory(i):r instanceof Wo?this.restoreHistory(i,!0):r instanceof Vr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof rn?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=I(I({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=I(I({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ur(e)))(s||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Fo||{});function ej(t,e){t.events.pipe(We(n=>n instanceof Vr||n instanceof nn||n instanceof Wo||n instanceof jr),R(n=>n instanceof Vr||n instanceof jr?Fo.COMPLETE:(n instanceof nn?n.code===Ke.Redirect||n.code===Ke.SupersededByNewNavigation:!1)?Fo.REDIRECTING:Fo.FAILED),We(n=>n!==Fo.REDIRECTING),Ot(1)).subscribe(()=>{e()})}function tj(t){throw t}var nj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},cb=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=_(kc),this.stateManager=_(ab),this.options=_(Sm,{optional:!0})||{},this.pendingTasks=_(wn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(KV),this.urlSerializer=_(Cm),this.location=_(Vs),this.urlHandlingStrategy=_(Nm),this._events=new me,this.errorHandler=this.options.errorHandler||tj,this.navigated=!1,this.routeReuseStrategy=_(QV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(Mm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(Tm,{optional:!0}),this.eventsSubscription=new ie,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof nn&&i.code!==Ke.Redirect&&i.code!==Ke.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Vr)this.navigated=!0;else if(i instanceof ns){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=I({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ZV(s.source)},a);this.scheduleNavigation(c,Vo,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}sj(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=I({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Am),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":d=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=WD(f)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),h=this.currentUrlTree.root}return zD(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Bo(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Vo,null,i)}navigate(r,i={skipLocationChange:!1}){return ij(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=I({},nj):i===!1?s=I({},rj):s=i,Bo(r))return SD(this.currentUrlTree,r,s);let o=this.parseUrl(r);return SD(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return ej(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ij(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new D(4008,!1)}function sj(t){return!(t instanceof zo)&&!(t instanceof ns)}var oj=new w("");function lb(t,...e){return ct([{provide:Mm,multi:!0,useValue:t},[],{provide:rs,useFactory:aj,deps:[cb]},{provide:Fc,multi:!0,useFactory:lj},e.map(n=>n.\u0275providers)])}function aj(t){return t.routerState.root}function cj(t,e){return{\u0275kind:t,\u0275providers:e}}function lj(){let t=_(ke);return e=>{let n=t.get(bn);if(e!==n.components[0])return;let r=t.get(cb),i=t.get(uj);t.get(dj)===1&&r.initialNavigation(),t.get(hj,null,F.Optional)?.setUpPreloading(),t.get(oj,null,F.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var uj=new w("",{factory:()=>new me}),dj=new w("",{providedIn:"root",factory:()=>1});var hj=new w("");function ub(){return cj(6,[{provide:Ti,useClass:OE}])}var pu=class t{title="testFirebase";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=yi({type:t,selectors:[["app-root"]],standalone:!0,features:[Ci],decls:1,vars:0,template:function(n,r){n&1&&dt(0,"router-outlet")},dependencies:[bm]})};var db={production:!1,firebaseConfig:{apiKey:"AIzaSyDnJSTICyChUYYi87twY8f9XRaZmAeNDaA",authDomain:"testangular-66666.firebaseapp.com",databaseURL:"https://testangular-66666-default-rtdb.asia-southeast1.firebasedatabase.app/",projectId:"testangular-66666",storageBucket:"testangular-66666.appspot.com",messagingSenderId:"859113310407",appId:"1:859113310407:web:1997ddab460984170256e2",measurementId:"G-6CJWHZN9RE"}};var _b=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ee(Ei),ee(dr))},e.\u0275dir=Me({type:e});let t=e;return t})(),Eb=(()=>{let e=class e extends _b{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ur(e)))(s||e)}})(),e.\u0275dir=Me({type:e,features:[Ct]});let t=e;return t})(),Pm=new w("");var pj={provide:Pm,useExisting:_n(()=>bu),multi:!0};function gj(){let t=Wt()?Wt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var mj=new w(""),bu=(()=>{let e=class e extends _b{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gj())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ee(Ei),ee(dr),ee(mj,8))},e.\u0275dir=Me({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Dt("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[wi([pj]),Ct]});let t=e;return t})();function Bn(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Ib(t){return t!=null&&typeof t.length=="number"}var km=new w(""),wb=new w(""),vj=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ur=class{static min(e){return Cb(e)}static max(e){return yj(e)}static required(e){return _j(e)}static requiredTrue(e){return Ej(e)}static email(e){return Ij(e)}static minLength(e){return wj(e)}static maxLength(e){return Cj(e)}static pattern(e){return Dj(e)}static nullValidator(e){return mu(e)}static compose(e){return Mb(e)}static composeAsync(e){return Rb(e)}};function Cb(t){return e=>{if(Bn(e.value)||Bn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function yj(t){return e=>{if(Bn(e.value)||Bn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function _j(t){return Bn(t.value)?{required:!0}:null}function Ej(t){return t.value===!0?null:{required:!0}}function Ij(t){return Bn(t.value)||vj.test(t.value)?null:{email:!0}}function wj(t){return e=>Bn(e.value)||!Ib(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Cj(t){return e=>Ib(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function Dj(t){if(!t)return mu;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Bn(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function mu(t){return null}function Db(t){return t!=null}function bb(t){return gr(t)?re(t):t}function Tb(t){let e={};return t.forEach(n=>{e=n!=null?I(I({},e),n):e}),Object.keys(e).length===0?null:e}function Sb(t,e){return e.map(n=>n(t))}function bj(t){return!t.validate}function Ab(t){return t.map(e=>bj(e)?e:n=>e.validate(n))}function Mb(t){if(!t)return null;let e=t.filter(Db);return e.length==0?null:function(n){return Tb(Sb(n,e))}}function Nb(t){return t!=null?Mb(Ab(t)):null}function Rb(t){if(!t)return null;let e=t.filter(Db);return e.length==0?null:function(n){let r=Sb(n,e).map(bb);return Qu(r).pipe(R(Tb))}}function xb(t){return t!=null?Rb(Ab(t)):null}function hb(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ob(t){return t._rawValidators}function Pb(t){return t._rawAsyncValidators}function Rm(t){return t?Array.isArray(t)?t:[t]:[]}function vu(t,e){return Array.isArray(t)?t.includes(e):t===e}function fb(t,e){let n=Rm(e);return Rm(t).forEach(i=>{vu(n,i)||n.push(i)}),n}function pb(t,e){return Rm(e).filter(n=>!vu(t,n))}var yu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Nb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},cs=class extends yu{get formDirective(){return null}get path(){return null}},ra=class extends yu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},_u=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Tj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},n4=H(I({},Tj),{"[class.ng-submitted]":"isSubmitted"}),kb=(()=>{let e=class e extends _u{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ee(ra,2))},e.\u0275dir=Me({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Oc("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ct]});let t=e;return t})(),Fb=(()=>{let e=class e extends _u{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ee(cs,10))},e.\u0275dir=Me({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Oc("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ct]});let t=e;return t})();var Xo="VALID",gu="INVALID",os="PENDING",ea="DISABLED",$n=class{},Eu=class extends $n{constructor(e,n){super(),this.value=e,this.source=n}},ta=class extends $n{constructor(e,n){super(),this.pristine=e,this.source=n}},na=class extends $n{constructor(e,n){super(),this.touched=e,this.source=n}},as=class extends $n{constructor(e,n){super(),this.status=e,this.source=n}},xm=class extends $n{constructor(e){super(),this.source=e}},Om=class extends $n{constructor(e){super(),this.source=e}};function Lb(t){return(Tu(t)?t.validators:t)||null}function Sj(t){return Array.isArray(t)?Nb(t):t||null}function Vb(t,e){return(Tu(e)?e.asyncValidators:t)||null}function Aj(t){return Array.isArray(t)?xb(t):t||null}function Tu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Mj(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new D(1e3,"");if(!r[n])throw new D(1001,"")}function Nj(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new D(1002,"")})}var Iu=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ks(()=>this.statusReactive()),this.statusReactive=Os(void 0),this._pristine=ks(()=>this.pristineReactive()),this.pristineReactive=Os(!0),this._touched=ks(()=>this.touchedReactive()),this.touchedReactive=Os(!1),this._events=new me,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ut(this.statusReactive)}set status(e){Ut(()=>this.statusReactive.set(e))}get valid(){return this.status===Xo}get invalid(){return this.status===gu}get pending(){return this.status==os}get disabled(){return this.status===ea}get enabled(){return this.status!==ea}get pristine(){return Ut(this.pristineReactive)}set pristine(e){Ut(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ut(this.touchedReactive)}set touched(e){Ut(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pb(e,this._rawAsyncValidators))}hasValidator(e){return vu(this._rawValidators,e)}hasAsyncValidator(e){return vu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(H(I({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new na(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new na(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(H(I({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ta(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ta(!0,r))}markAsPending(e={}){this.status=os;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new as(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(H(I({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ea,this.errors=null,this._forEachChild(i=>{i.disable(H(I({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eu(this.value,r)),this._events.next(new as(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(H(I({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xo,this._forEachChild(r=>{r.enable(H(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(H(I({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xo||this.status===os)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eu(this.value,n)),this._events.next(new as(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(H(I({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ea:Xo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=os,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=bb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new as(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ce,this.statusChanges=new ce}_calculateStatus(){return this._allControlsDisabled()?ea:this.errors?gu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(os)?os:this._anyControlsHaveStatus(gu)?gu:Xo}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ta(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new na(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Sj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Aj(this._rawAsyncValidators)}},wu=class extends Iu{constructor(e,n,r){super(Lb(n),Vb(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Nj(this,!0,e),Object.keys(e).forEach(r=>{Mj(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var jb=new w("CallSetDisabledState",{providedIn:"root",factory:()=>Fm}),Fm="always";function Rj(t,e){return[...e.path,t]}function gb(t,e,n=Fm){Lm(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Oj(t,e),kj(t,e),Pj(t,e),xj(t,e)}function mb(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Du(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Cu(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function xj(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Lm(t,e){let n=Ob(t);e.validator!==null?t.setValidators(hb(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Pb(t);e.asyncValidator!==null?t.setAsyncValidators(hb(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Cu(e._rawValidators,i),Cu(e._rawAsyncValidators,i)}function Du(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=Ob(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=Pb(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Cu(e._rawValidators,r),Cu(e._rawAsyncValidators,r),n}function Oj(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Ub(t,e)})}function Pj(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Ub(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Ub(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function kj(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Fj(t,e){t==null,Lm(t,e)}function Lj(t,e){return Du(t,e)}function Vj(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function jj(t){return Object.getPrototypeOf(t.constructor)===Eb}function Uj(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Bj(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===bu?n=s:jj(s)?r=s:i=s}),i||r||n||null}function $j(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function vb(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function yb(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ia=class extends Iu{constructor(e=null,n,r){super(Lb(n),Vb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(yb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){yb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Hj=t=>t instanceof ia;var Bb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Me({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),Wj={provide:Pm,useExisting:_n(()=>Vm),multi:!0},Vm=(()=>{let e=class e extends Eb{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ur(e)))(s||e)}})(),e.\u0275dir=Me({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Dt("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[wi([Wj]),Ct]});let t=e;return t})();var $b=new w("");var zj={provide:cs,useExisting:_n(()=>jm)},jm=(()=>{let e=class e extends cs{get submitted(){return Ut(this._submittedReactive)}set submitted(r){this._submittedReactive.set(r)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=ks(()=>this._submittedReactive()),this._submittedReactive=Os(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ce,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Du(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return gb(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){mb(r.control||null,r,!1),$j(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this._submittedReactive.set(!0),Uj(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new xm(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this._submittedReactive.set(!1),this.form._events.next(new Om(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(mb(i||null,r),Hj(s)&&(gb(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);Fj(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&Lj(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Lm(this.form,this),this._oldForm&&Du(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(ee(km,10),ee(wb,10),ee(jb,8))},e.\u0275dir=Me({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Dt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[wi([zj]),Ct,En]});let t=e;return t})();var Gj={provide:ra,useExisting:_n(()=>Um)},Um=(()=>{let e=class e extends ra{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ce,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Bj(this,o)}ngOnChanges(r){this._added||this._setUpControl(),Vj(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return Rj(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(ee(cs,13),ee(km,10),ee(wb,10),ee(Pm,10),ee($b,8))},e.\u0275dir=Me({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[wi([Gj]),Ct,En]});let t=e;return t})();function qj(t){return typeof t=="number"?t:parseFloat(t)}var Yj=(()=>{let e=class e{constructor(){this._validator=mu}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):mu,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Me({type:e,features:[En]});let t=e;return t})();var Kj={provide:km,useExisting:_n(()=>Bm),multi:!0},Bm=(()=>{let e=class e extends Yj{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>qj(r),this.createValidator=r=>Cb(r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ur(e)))(s||e)}})(),e.\u0275dir=Me({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,s){i&2&&Rc("min",s._enabled?s.min:null)},inputs:{min:"min"},features:[wi([Kj]),Ct]});let t=e;return t})();var Zj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cr({type:e}),e.\u0275inj=ar({});let t=e;return t})();var Hb=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:$b,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:jb,useValue:r.callSetDisabledState??Fm}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cr({type:e}),e.\u0275inj=ar({imports:[Zj]});let t=e;return t})();var Su=class t{constructor(e){this.db=e}dbPath="/products";addProduct(e){let n=Oo(this.db,this.dbPath),r=bD(n);zg(r,e).then(()=>console.log("Product added successfully!")).catch(i=>console.error("Error adding product: ",i))}getProducts(){let e=Oo(this.db,this.dbPath);return new k(n=>{$g(e,r=>{let i=r.val();n.next(i?Object.entries(i).map(([s,o])=>({key:s,value:o})):[])})})}deleteProduct(e){let n=Oo(this.db,`${this.dbPath}/${e}`);TD(n).then(()=>console.log("Product deleted successfully!")).catch(r=>console.error("Error deleting product: ",r))}editProduct(e,n){let r=Oo(this.db,`${this.dbPath}/${e}`);zg(r,n).then(()=>console.log("Product updated successfully!")).catch(i=>console.error("Error updating product: ",i))}createProductForm(){return new wu({name:new ia("",Ur.required),price:new ia("",[Ur.required,Ur.min(0)]),description:new ia("",Ur.required)})}static \u0275fac=function(n){return new(n||t)(b(kr))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})};function Xj(t,e){t&1&&(we(0,"div",0)(1,"div",2),dt(2,"i",3),de()())}function eU(t,e){if(t&1){let n=$h();we(0,"div",14)(1,"h3"),et(2),de(),we(3,"p"),et(4),de(),we(5,"p"),et(6),fE(7,"currency"),de(),we(8,"div",4)(9,"button",15),Dt("click",function(){let i=wc(n).$implicit,s=Ps(2);return Cc(s.deleteProduct(i.key))}),et(10,"Delete"),de(),we(11,"button",16),Dt("click",function(){let i=wc(n).$implicit,s=Ps(2);return Cc(s.populateForm(i))}),et(12,"Edit"),de()()()}if(t&2){let n=e.$implicit;Dn(2),Ii(" Product Name : ",n.value.name,""),Dn(2),Ii(" Description : ",n.value.description,""),Dn(2),Ii(" Price : ",pE(7,3,n.value.price),"")}}function tU(t,e){if(t&1){let n=$h();we(0,"div",1)(1,"h1",4),et(2,"Add New Product"),de(),we(3,"form",5),Dt("ngSubmit",function(){wc(n);let i=Ps();return Cc(i.editingProductId?i.editProduct(i.editingProductId):i.onSubmit())}),we(4,"div",6)(5,"label",7),et(6,"Product Name"),de(),dt(7,"input",8),de(),we(8,"div",6)(9,"label",9),et(10,"Price"),de(),dt(11,"input",10),de(),we(12,"div",6)(13,"label",11),et(14,"Description"),de(),dt(15,"input",12),de(),we(16,"div",4)(17,"button",13),et(18),de()()(),dt(19,"hr"),we(20,"h2",4),et(21,"All The Products"),de(),uE(22,eU,13,5,"div",14,lE),de()}if(t&2){let n=Ps();Dn(3),xc("formGroup",n.productForm),Dn(14),xc("disabled",!n.productForm.valid),Dn(),Ii(" ",n.editingProductId?"Update Product":"Add Product"," "),Dn(4),dE(n.products)}}var Au=class t{constructor(e){this.productService=e}productForm;products=[];isLoaded=!1;editingProductId=null;ngOnInit(){this.productForm=this.productService.createProductForm(),setInterval(()=>{this.productService.getProducts().subscribe(e=>{this.products=e,this.isLoaded=!0})},2e3)}onSubmit(){this.productForm.valid&&(this.productService.addProduct(this.productForm.value),this.productForm.reset())}deleteProduct(e){this.productService.deleteProduct(e)}editProduct(e){this.productForm.valid&&(this.productService.editProduct(e,this.productForm.value),this.productForm.reset())}populateForm(e){this.editingProductId=e.key,this.productForm.patchValue({name:e.value.name,price:e.value.price,description:e.value.description})}static \u0275fac=function(n){return new(n||t)(ee(Su))};static \u0275cmp=yi({type:t,selectors:[["app-home"]],standalone:!0,features:[Ci],decls:2,vars:1,consts:[[1,"d-flex","justify-content-center","align-items-center","min-vh-100","text-center"],[1,"container","py-5","min-vh-100"],[1,"fs-1","text-primary"],[1,"fa-solid","fa-circle-notch","fa-spin"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","name"],["id","name","formControlName","name","type","text",1,"form-control"],["for","price"],["id","price","formControlName","price","type","number","min","1",1,"form-control"],["for","description"],["id","description","formControlName","description","type","text",1,"form-control"],["type","submit",1,"btn","btn-primary","mt-3",3,"disabled"],[1,"alert","alert-primary"],[1,"btn","btn-danger","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(n,r){n&1&&Bh(0,Xj,3,0,"div",0)(1,tU,24,3,"div",1),n&2&&cE(r.isLoaded?1:0)},dependencies:[FE,Hb,Bb,bu,Vm,kb,Fb,Bm,jm,Um]})};var Wb=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",title:"Welcome to home",component:Au}];var zb={providers:[lb(Wb,ub()),YE()]};nI(pu,{providers:[zb.providers,OI(()=>PI(db.firebaseConfig)),Dw(()=>bw()),CD(()=>DD())]}).catch(t=>console.error(t));
