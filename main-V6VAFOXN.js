var uI=Object.defineProperty,dI=Object.defineProperties;var fI=Object.getOwnPropertyDescriptors;var uh=Object.getOwnPropertySymbols,hI=Object.getPrototypeOf,pI=Object.prototype.hasOwnProperty,gI=Object.prototype.propertyIsEnumerable,mI=Reflect.get;var dh=(t,e,n)=>e in t?uI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U=(t,e)=>{for(var n in e||={})pI.call(e,n)&&dh(t,n,e[n]);if(uh)for(var n of uh(e))gI.call(e,n)&&dh(t,n,e[n]);return t},z=(t,e)=>dI(t,fI(e));var Gt=(t,e,n)=>mI(hI(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function fh(t,e){return Object.is(t,e)}var Q=null,ps=!1,gs=1,Et=Symbol("SIGNAL");function M(t){let e=Q;return Q=t,e}function hh(){return Q}var Ur={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xa(t){if(ps)throw new Error("");if(Q===null)return;Q.consumerOnSignalRead(t);let e=Q.nextProducerIndex++;if(_s(Q),e<Q.producerNode.length&&Q.producerNode[e]!==t&&jr(Q)){let n=Q.producerNode[e];ys(n,Q.producerIndexOfThis[e])}Q.producerNode[e]!==t&&(Q.producerNode[e]=t,Q.producerIndexOfThis[e]=jr(Q)?vh(t,Q,e):0),Q.producerLastReadVersion[e]=t.version}function vI(){gs++}function ph(t){if(!(jr(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===gs)){if(!t.producerMustRecompute(t)&&!tc(t)){t.dirty=!1,t.lastCleanEpoch=gs;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=gs}}function gh(t){if(t.liveConsumerNode===void 0)return;let e=ps;ps=!0;try{for(let n of t.liveConsumerNode)n.dirty||yI(n)}finally{ps=e}}function mh(){return Q?.consumerAllowSignalWrites!==!1}function yI(t){t.dirty=!0,gh(t),t.consumerMarkedDirty?.(t)}function vs(t){return t&&(t.nextProducerIndex=0),M(t)}function ec(t,e){if(M(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(jr(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ys(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function tc(t){_s(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ph(n),r!==n.version))return!0}return!1}function nc(t){if(_s(t),jr(t))for(let e=0;e<t.producerNode.length;e++)ys(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function vh(t,e,n){if(yh(t),t.liveConsumerNode.length===0&&_h(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=vh(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function ys(t,e){if(yh(t),t.liveConsumerNode.length===1&&_h(t))for(let r=0;r<t.producerNode.length;r++)ys(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];_s(i),i.producerIndexOfThis[r]=e}}function jr(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _s(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function yh(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function _h(t){return t.producerNode!==void 0}function Eh(t){let e=Object.create(_I);e.computation=t;let n=()=>{if(ph(e),Xa(e),e.value===ms)throw e.error;return e.value};return n[Et]=e,n}var Qa=Symbol("UNSET"),Ja=Symbol("COMPUTING"),ms=Symbol("ERRORED"),_I=z(U({},Ur),{value:Qa,dirty:!0,error:null,equal:fh,producerMustRecompute(t){return t.value===Qa||t.value===Ja},producerRecomputeValue(t){if(t.value===Ja)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Ja;let n=vs(t),r;try{r=t.computation()}catch(i){r=ms,t.error=i}finally{ec(t,n)}if(e!==Qa&&e!==ms&&r!==ms&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function EI(){throw new Error}var Ih=EI;function wh(){Ih()}function Dh(t){Ih=t}var II=null;function Ch(t){let e=Object.create(Th);e.value=t;let n=()=>(Xa(e),e.value);return n[Et]=e,n}function rc(t,e){mh()||wh(),t.equal(t.value,e)||(t.value=e,wI(t))}function bh(t,e){mh()||wh(),rc(t,e(t.value))}var Th=z(U({},Ur),{equal:fh,value:void 0});function wI(t){t.version++,vI(),gh(t),II?.()}function O(t){return typeof t=="function"}function Es(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Is=Es(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function zt(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ne=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(O(r))try{r()}catch(s){e=s instanceof Is?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Sh(s)}catch(o){e=e??[],o instanceof Is?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Is(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Sh(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&zt(n,e)}remove(e){let{_finalizers:n}=this;n&&zt(n,e),e instanceof t&&e._removeParent(this)}};ne.EMPTY=(()=>{let t=new ne;return t.closed=!0,t})();var ic=ne.EMPTY;function ws(t){return t instanceof ne||t&&"closed"in t&&O(t.remove)&&O(t.add)&&O(t.unsubscribe)}function Sh(t){O(t)?t():t.unsubscribe()}var Ae={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Vn={setTimeout(t,e,...n){let{delegate:r}=Vn;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Vn;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ds(t){Vn.setTimeout(()=>{let{onUnhandledError:e}=Ae;if(e)e(t);else throw t})}function sc(){}var Ah=oc("C",void 0,void 0);function Nh(t){return oc("E",void 0,t)}function Mh(t){return oc("N",t,void 0)}function oc(t,e,n){return{kind:t,value:e,error:n}}var qt=null;function jn(t){if(Ae.useDeprecatedSynchronousErrorHandling){let e=!qt;if(e&&(qt={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=qt;if(qt=null,n)throw r}}else t()}function Rh(t){Ae.useDeprecatedSynchronousErrorHandling&&qt&&(qt.errorThrown=!0,qt.error=t)}var Yt=class extends ne{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ws(e)&&e.add(this)):this.destination=bI}static create(e,n,r){return new Un(e,n,r)}next(e){this.isStopped?cc(Mh(e),this):this._next(e)}error(e){this.isStopped?cc(Nh(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cc(Ah,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DI=Function.prototype.bind;function ac(t,e){return DI.call(t,e)}var lc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Cs(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Cs(r)}else Cs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Cs(n)}}},Un=class extends Yt{constructor(e,n,r){super();let i;if(O(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ae.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ac(e.next,s),error:e.error&&ac(e.error,s),complete:e.complete&&ac(e.complete,s)}):i=e}this.destination=new lc(i)}};function Cs(t){Ae.useDeprecatedSynchronousErrorHandling?Rh(t):Ds(t)}function CI(t){throw t}function cc(t,e){let{onStoppedNotification:n}=Ae;n&&Vn.setTimeout(()=>n(t,e))}var bI={closed:!0,next:sc,error:CI,complete:sc};var Bn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bs(t){return t}function xh(t){return t.length===0?bs:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var G=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=SI(n)?n:new Un(n,r,i);return jn(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Oh(r),new r((i,s)=>{let o=new Un({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Bn](){return this}pipe(...n){return xh(n)(this)}toPromise(n){return n=Oh(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Oh(t){var e;return(e=t??Ae.Promise)!==null&&e!==void 0?e:Promise}function TI(t){return t&&O(t.next)&&O(t.error)&&O(t.complete)}function SI(t){return t&&t instanceof Yt||TI(t)&&ws(t)}function AI(t){return O(t?.lift)}function It(t){return e=>{if(AI(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(t,e,n,r,i){return new uc(t,e,n,r,i)}var uc=class extends Yt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Ph=Es(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class t extends G{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ts(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ph}next(n){jn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){jn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){jn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ic:(this.currentObservers=null,s.push(n),new ne(()=>{this.currentObservers=null,zt(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new G;return n.source=this,n}}return t.create=(e,n)=>new Ts(e,n),t})(),Ts=class extends Ve{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ic}};var Br=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var dc={now(){return(dc.delegate||Date).now()},delegate:void 0};var Ss=class extends ne{constructor(e,n){super()}schedule(e,n=0){return this}};var Hr={setInterval(t,e,...n){let{delegate:r}=Hr;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Hr;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Hn=class extends Ss{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Hr.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Hr.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,zt(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var $n=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};$n.now=dc.now;var Wn=class extends $n{constructor(e,n=$n.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fc=new Wn(Hn);var As=class extends Hn{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ns=class extends Wn{};var hc=new Ns(As);function NI(t){return t[t.length-1]}function kh(t){return O(NI(t))?t.pop():void 0}function pc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Lh(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Fh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(t){return this instanceof Kt?(this.v=t,this):new Kt(t)}function Vh(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(v){return new Promise(function(y,S){s.push([h,v,y,S])>1||c(h,v)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(v){f(s[0][3],v)}}function l(h){h.value instanceof Kt?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function jh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Fh=="function"?Fh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Ms=t=>t&&typeof t.length=="number"&&typeof t!="function";function Rs(t){return O(t?.then)}function xs(t){return O(t[Bn])}function Os(t){return Symbol.asyncIterator&&O(t?.[Symbol.asyncIterator])}function Ps(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ks=MI();function Fs(t){return O(t?.[ks])}function Ls(t){return Vh(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Kt(n.read());if(i)return yield Kt(void 0);yield yield Kt(r)}}finally{n.releaseLock()}})}function Vs(t){return O(t?.getReader)}function Dt(t){if(t instanceof G)return t;if(t!=null){if(xs(t))return RI(t);if(Ms(t))return xI(t);if(Rs(t))return OI(t);if(Os(t))return Uh(t);if(Fs(t))return PI(t);if(Vs(t))return kI(t)}throw Ps(t)}function RI(t){return new G(e=>{let n=t[Bn]();if(O(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function xI(t){return new G(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function OI(t){return new G(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ds)})}function PI(t){return new G(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Uh(t){return new G(e=>{FI(t,e).catch(n=>e.error(n))})}function kI(t){return Uh(Ls(t))}function FI(t,e){var n,r,i,s;return Lh(this,void 0,void 0,function*(){try{for(n=jh(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function je(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ct(t,e=0){return It((n,r)=>{n.subscribe(wt(r,i=>je(r,t,()=>r.next(i),e),()=>je(r,t,()=>r.complete(),e),i=>je(r,t,()=>r.error(i),e)))})}function bt(t,e=0){return It((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Bh(t,e){return Dt(t).pipe(bt(e),Ct(e))}function Hh(t,e){return Dt(t).pipe(bt(e),Ct(e))}function $h(t,e){return new G(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Wh(t,e){return new G(n=>{let r;return je(n,e,()=>{r=t[ks](),je(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>O(r?.return)&&r.return()})}function js(t,e){if(!t)throw new Error("Iterable cannot be null");return new G(n=>{je(n,e,()=>{let r=t[Symbol.asyncIterator]();je(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Gh(t,e){return js(Ls(t),e)}function zh(t,e){if(t!=null){if(xs(t))return Bh(t,e);if(Ms(t))return $h(t,e);if(Rs(t))return Hh(t,e);if(Os(t))return js(t,e);if(Fs(t))return Wh(t,e);if(Vs(t))return Gh(t,e)}throw Ps(t)}function gc(t,e){return e?zh(t,e):Dt(t)}function Zt(t,e){return It((n,r)=>{let i=0;n.subscribe(wt(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:LI}=Array;function VI(t,e){return LI(e)?t(...e):t(e)}function qh(t){return Zt(e=>VI(t,e))}var{isArray:jI}=Array,{getPrototypeOf:UI,prototype:BI,keys:HI}=Object;function Yh(t){if(t.length===1){let e=t[0];if(jI(e))return{args:e,keys:null};if($I(e)){let n=HI(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function $I(t){return t&&typeof t=="object"&&UI(t)===BI}function Kh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function mc(...t){let e=kh(t),{args:n,keys:r}=Yh(t),i=new G(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Dt(n[u]).subscribe(wt(s,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?Kh(r,a):a),s.complete())}))}});return e?i.pipe(qh(e)):i}function vc(t,e,n){let r=O(t)||e||n?{next:t,error:e,complete:n}:t;return r?It((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(wt(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):bs}var WI="https://g.co/ng/security#xss",D=class extends Error{constructor(e,n){super(Dl(e,n)),this.code=e}};function Dl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ni(t){return{toString:t}.toString()}var Us="__parameters__";function GI(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function zI(t,e,n){return ni(()=>{let r=GI(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Us)?c[Us]:Object.defineProperty(c,Us,{value:[]})[Us];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var $r=globalThis;function $(t){for(let e in t)if(t[e]===$)return e;throw Error("Could not find renamed property on target object.")}function qI(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ie(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ie).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Zh(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var YI=$({__forward_ref__:$});function cn(t){return t.__forward_ref__=cn,t.toString=function(){return Ie(this())},t}function oe(t){return kp(t)?t():t}function kp(t){return typeof t=="function"&&t.hasOwnProperty(YI)&&t.__forward_ref__===cn}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ri(t){return{providers:t.providers||[],imports:t.imports||[]}}function Cl(t){return Qh(t,Fp)||Qh(t,Lp)}function Qh(t,e){return t.hasOwnProperty(e)?t[e]:null}function KI(t){let e=t&&(t[Fp]||t[Lp]);return e||null}function Jh(t){return t&&(t.hasOwnProperty(Xh)||t.hasOwnProperty(ZI))?t[Xh]:null}var Fp=$({\u0275prov:$}),Xh=$({\u0275inj:$}),Lp=$({ngInjectableDef:$}),ZI=$({ngInjectorDef:$}),I=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Vp(t){return t&&!!t.\u0275providers}var QI=$({\u0275cmp:$}),JI=$({\u0275dir:$}),XI=$({\u0275pipe:$});var Ks=$({\u0275fac:$}),zr=$({__NG_ELEMENT_ID__:$}),ep=$({__NG_ENV_ID__:$});function jp(t){return typeof t=="string"?t:t==null?"":String(t)}function ew(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():jp(t)}function tw(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new D(-200,t)}function bl(t,e){throw new D(-201,!1)}var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(N||{}),xc;function Up(){return xc}function _e(t){let e=xc;return xc=t,e}function Bp(t,e,n){let r=Cl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&N.Optional)return null;if(e!==void 0)return e;bl(t,"Injector")}var nw={},qr=nw,Oc="__NG_DI_FLAG__",Zs="ngTempTokenPath",rw="ngTokenPath",iw=/\n/gm,sw="\u0275",tp="__source",Kn;function ow(){return Kn}function Gn(t){let e=Kn;return Kn=t,e}function aw(t,e=N.Default){if(Kn===void 0)throw new D(-203,!1);return Kn===null?Bp(t,void 0,e):Kn.get(t,e&N.Optional?null:void 0,e)}function P(t,e=N.Default){return(Up()||aw)(oe(t),e)}function k(t,e=N.Default){return P(t,po(e))}function po(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Pc(t){let e=[];for(let n=0;n<t.length;n++){let r=oe(t[n]);if(Array.isArray(r)){if(r.length===0)throw new D(900,!1);let i,s=N.Default;for(let o=0;o<r.length;o++){let a=r[o],c=lw(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(P(i,s))}else e.push(P(r))}return e}function cw(t,e){return t[Oc]=e,t.prototype[Oc]=e,t}function lw(t){return t[Oc]}function uw(t,e,n,r){let i=t[Zs];throw e[tp]&&i.unshift(e[tp]),t.message=dw(`
`+t.message,i,n,r),t[rw]=i,t[Zs]=null,t}function dw(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==sw?t.slice(2):t;let i=Ie(e);if(Array.isArray(e))i=e.map(Ie).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ie(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(iw,`
  `)}`}var ve=cw(zI("Optional"),8);function en(t,e){let n=t.hasOwnProperty(Ks);return n?t[Ks]:null}function Tl(t,e){t.forEach(n=>Array.isArray(n)?Tl(n,e):e(n))}function fw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Hp(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function pw(t,e,n){let r=ii(t,e);return r>=0?t[r|1]=n:(r=~r,hw(t,r,e,n)),r}function yc(t,e){let n=ii(t,e);if(n>=0)return t[n|1]}function ii(t,e){return gw(t,e,1)}function gw(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Qn={},Ee=[],Yr=new I(""),$p=new I("",-1),Wp=new I(""),Qs=class{get(e,n=qr){if(n===qr){let r=new Error(`NullInjectorError: No provider for ${Ie(e)}!`);throw r.name="NullInjectorError",r}return n}},Gp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Gp||{}),He=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(He||{}),At=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(At||{});function mw(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function kc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];yw(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function vw(t){return t===3||t===4||t===6}function yw(t){return t.charCodeAt(0)===64}function Kr(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?np(t,n,i,null,e[++r]):np(t,n,i,null,null))}}return t}function np(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var zp="ng-template";function _w(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&mw(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Sl(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Sl(t){return t.type===4&&t.value!==zp}function Ew(t,e,n){let r=t.type===4&&!n?zp:t.value;return e===r}function Iw(t,e,n){let r=4,i=t.attrs,s=i!==null?Cw(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Ne(r)&&!Ne(c))return!1;if(o&&Ne(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Ew(t,c,n)||c===""&&e.length===1){if(Ne(r))return!1;o=!0}}else if(r&8){if(i===null||!_w(t,i,c,n)){if(Ne(r))return!1;o=!0}}else{let l=e[++a],u=ww(c,i,Sl(t),n);if(u===-1){if(Ne(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Ne(r))return!1;o=!0}}}}return Ne(r)||o}function Ne(t){return(t&1)===0}function ww(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return bw(e,t)}function Dw(t,e,n=!1){for(let r=0;r<e.length;r++)if(Iw(t,e[r],n))return!0;return!1}function Cw(t){for(let e=0;e<t.length;e++){let n=t[e];if(vw(n))return e}return t.length}function bw(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rp(t,e){return t?":not("+e.trim()+")":e}function Tw(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ne(o)&&(e+=rp(s,i),i=""),r=o,s=s||!Ne(r);n++}return i!==""&&(e+=rp(s,i)),e}function Sw(t){return t.map(Tw).join(",")}function Aw(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ne(i))break;i=s}r++}return{attrs:e,classes:n}}function qp(t){return ni(()=>{let e=Qp(t),n=z(U({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Gp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||He.Emulated,styles:t.styles||Ee,_:null,schemas:t.schemas||null,tView:null,id:""});Jp(n);let r=t.dependencies;return n.directiveDefs=sp(r,!1),n.pipeDefs=sp(r,!0),n.id=xw(n),n})}function Nw(t){return go(t)||Kp(t)}function Mw(t){return t!==null}function si(t){return ni(()=>({type:t.type,bootstrap:t.bootstrap||Ee,declarations:t.declarations||Ee,imports:t.imports||Ee,exports:t.exports||Ee,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ip(t,e){if(t==null)return Qn;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=At.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==At.None?[r,a]:r,e[s]=o):n[s]=r}return n}function xe(t){return ni(()=>{let e=Qp(t);return Jp(e),e})}function Yp(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function go(t){return t[QI]||null}function Kp(t){return t[JI]||null}function Zp(t){return t[XI]||null}function Rw(t){let e=go(t)||Kp(t)||Zp(t);return e!==null?e.standalone:!1}function Qp(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Qn,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ee,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ip(t.inputs,e),outputs:ip(t.outputs),debugInfo:null}}function Jp(t){t.features?.forEach(e=>e(t))}function sp(t,e){if(!t)return null;let n=e?Zp:Nw;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Mw)}function xw(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ln(t){return{\u0275providers:t}}function Ow(...t){return{\u0275providers:Xp(!0,t),\u0275fromNgModule:!0}}function Xp(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Tl(e,o=>{let a=o;Fc(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&eg(i,s),n}function eg(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Al(i,s=>{e(s,r)})}}function Fc(t,e,n,r){if(t=oe(t),!t)return!1;let i=null,s=Jh(t),o=!s&&go(t);if(!s&&!o){let c=t.ngModule;if(s=Jh(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Fc(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Tl(s.imports,u=>{Fc(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&eg(l,e)}if(!a){let l=en(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ee},i),e({provide:Wp,useValue:i,multi:!0},i),e({provide:Yr,useValue:()=>P(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;Al(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Al(t,e){for(let n of t)Vp(n)&&(n=n.\u0275providers),Array.isArray(n)?Al(n,e):e(n)}var Pw=$({provide:String,useValue:$});function tg(t){return t!==null&&typeof t=="object"&&Pw in t}function kw(t){return!!(t&&t.useExisting)}function Fw(t){return!!(t&&t.useFactory)}function Jn(t){return typeof t=="function"}function Lw(t){return!!t.useClass}var mo=new I(""),Ws={},Vw={},_c;function Nl(){return _c===void 0&&(_c=new Qs),_c}var tn=class{},Js=class extends tn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vc(e,o=>this.processProvider(o)),this.records.set($p,zn(void 0,this)),i.has("environment")&&this.records.set(tn,zn(void 0,this));let s=this.records.get(mo);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Wp,Ee,N.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=M(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),M(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Gn(this),r=_e(void 0),i;try{return e()}finally{Gn(n),_e(r)}}get(e,n=qr,r=N.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ep))return e[ep](this);r=po(r);let i,s=Gn(this),o=_e(void 0);try{if(!(r&N.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=$w(e)&&Cl(e);l&&this.injectableDefInScope(l)?c=zn(Lc(e),Ws):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&N.Self?Nl():this.parent;return n=r&N.Optional&&n===qr?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Zs]=a[Zs]||[]).unshift(Ie(e)),s)throw a;return uw(a,e,"R3InjectorError",this.source)}else throw a}finally{_e(o),Gn(s)}}resolveInjectorInitializers(){let e=M(null),n=Gn(this),r=_e(void 0),i;try{let s=this.get(Yr,Ee,N.Self);for(let o of s)o()}finally{Gn(n),_e(r),M(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ie(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new D(205,!1)}processProvider(e){e=oe(e);let n=Jn(e)?e:oe(e&&e.provide),r=Uw(e);if(!Jn(e)&&e.multi===!0){let i=this.records.get(n);i||(i=zn(void 0,Ws,!0),i.factory=()=>Pc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=M(null);try{return n.value===Ws&&(n.value=Vw,n.value=n.factory()),typeof n.value=="object"&&n.value&&Hw(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{M(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=oe(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Lc(t){let e=Cl(t),n=e!==null?e.factory:en(t);if(n!==null)return n;if(t instanceof I)throw new D(204,!1);if(t instanceof Function)return jw(t);throw new D(204,!1)}function jw(t){if(t.length>0)throw new D(204,!1);let n=KI(t);return n!==null?()=>n.factory(t):()=>new t}function Uw(t){if(tg(t))return zn(void 0,t.useValue);{let e=ng(t);return zn(e,Ws)}}function ng(t,e,n){let r;if(Jn(t)){let i=oe(t);return en(i)||Lc(i)}else if(tg(t))r=()=>oe(t.useValue);else if(Fw(t))r=()=>t.useFactory(...Pc(t.deps||[]));else if(kw(t))r=()=>P(oe(t.useExisting));else{let i=oe(t&&(t.useClass||t.provide));if(Bw(t))r=()=>new i(...Pc(t.deps));else return en(i)||Lc(i)}return r}function zn(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Bw(t){return!!t.deps}function Hw(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function $w(t){return typeof t=="function"||typeof t=="object"&&t instanceof I}function Vc(t,e){for(let n of t)Array.isArray(n)?Vc(n,e):n&&Vp(n)?Vc(n.\u0275providers,e):e(n)}function Ww(){return Up()!==void 0||ow()!=null}var it=0,C=1,_=2,De=3,Me=4,We=5,Zr=6,Xs=7,me=8,Xn=9,et=10,ae=11,Qr=12,op=13,oi=14,$e=15,er=16,qn=17,tr=18,vo=19,rg=20,Tt=21,Ec=22,we=23,Re=25,ig=1;var Jr=7,Gw=8,eo=9,ue=10,to=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(to||{});function St(t){return Array.isArray(t)&&typeof t[ig]=="object"}function un(t){return Array.isArray(t)&&t[ig]===!0}function sg(t){return(t.flags&4)!==0}function Ml(t){return t.componentOffset>-1}function Rl(t){return(t.flags&1)===1}function Nt(t){return!!t.template}function jc(t){return(t[_]&512)!==0}var Uc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function og(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ai(){return ag}function ag(t){return t.type.prototype.ngOnChanges&&(t.setInput=qw),zw}ai.ngInherit=!0;function zw(){let t=lg(this),e=t?.current;if(e){let n=t.previous;if(n===Qn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qw(t,e,n,r,i){let s=this.declaredInputs[r],o=lg(t)||Yw(t,{previous:Qn,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Uc(l&&l.currentValue,n,c===Qn),og(t,e,i,n)}var cg="__ngSimpleChanges__";function lg(t){return t[cg]||null}function Yw(t,e){return t[cg]=e}var ap=null;var Ue=function(t,e,n){ap?.(t,e,n)},Kw="svg",Zw="math";function tt(t){for(;Array.isArray(t);)t=t[it];return t}function ug(t,e){return tt(e[t])}function Ge(t,e){return tt(e[t.index])}function xl(t,e){return t.data[e]}function Qw(t,e){return t[e]}function dn(t,e){let n=e[t];return St(n)?n:n[it]}function Ol(t){return(t[_]&128)===128}function Xr(t,e){return e==null?null:t[e]}function dg(t){t[qn]=0}function fg(t){t[_]&1024||(t[_]|=1024,Ol(t)&&_o(t))}function yo(t){return!!(t[_]&9216||t[we]?.dirty)}function Bc(t){t[et].changeDetectionScheduler?.notify(8),t[_]&64&&(t[_]|=1024),yo(t)&&_o(t)}function _o(t){t[et].changeDetectionScheduler?.notify(0);let e=nn(t);for(;e!==null&&!(e[_]&8192||(e[_]|=8192,!Ol(e)));)e=nn(e)}function hg(t,e){if((t[_]&256)===256)throw new D(911,!1);t[Tt]===null&&(t[Tt]=[]),t[Tt].push(e)}function Jw(t,e){if(t[Tt]===null)return;let n=t[Tt].indexOf(e);n!==-1&&t[Tt].splice(n,1)}function nn(t){let e=t[De];return un(e)?e[De]:e}var x={lFrame:wg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pg=!1;function Xw(){return x.lFrame.elementDepthCount}function eD(){x.lFrame.elementDepthCount++}function tD(){x.lFrame.elementDepthCount--}function gg(){return x.bindingsEnabled}function nD(){return x.skipHydrationRootTNode!==null}function rD(t){return x.skipHydrationRootTNode===t}function iD(){x.skipHydrationRootTNode=null}function Y(){return x.lFrame.lView}function Oe(){return x.lFrame.tView}function ze(){let t=mg();for(;t!==null&&t.type===64;)t=t.parent;return t}function mg(){return x.lFrame.currentTNode}function sD(){let t=x.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ci(t,e){let n=x.lFrame;n.currentTNode=t,n.isParent=e}function vg(){return x.lFrame.isParent}function oD(){x.lFrame.isParent=!1}function yg(){return pg}function cp(t){pg=t}function aD(){let t=x.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function cD(t){return x.lFrame.bindingIndex=t}function Pl(){return x.lFrame.bindingIndex++}function lD(t){let e=x.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function uD(){return x.lFrame.inI18n}function dD(t,e){let n=x.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hc(e)}function fD(){return x.lFrame.currentDirectiveIndex}function Hc(t){x.lFrame.currentDirectiveIndex=t}function hD(t){let e=x.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function _g(t){x.lFrame.currentQueryIndex=t}function pD(t){let e=t[C];return e.type===2?e.declTNode:e.type===1?t[We]:null}function Eg(t,e,n){if(n&N.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&N.Host);)if(i=pD(s),i===null||(s=s[oi],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=x.lFrame=Ig();return r.currentTNode=e,r.lView=t,!0}function kl(t){let e=Ig(),n=t[C];x.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ig(){let t=x.lFrame,e=t===null?null:t.child;return e===null?wg(t):e}function wg(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Dg(){let t=x.lFrame;return x.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Cg=Dg;function Fl(){let t=Dg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fn(){return x.lFrame.selectedIndex}function rn(t){x.lFrame.selectedIndex=t}function gD(){let t=x.lFrame;return xl(t.tView,t.selectedIndex)}function mD(){return x.lFrame.currentNamespace}var bg=!0;function Ll(){return bg}function Vl(t){bg=t}function vD(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=ag(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function jl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Gs(t,e,n){Tg(t,e,3,n)}function zs(t,e,n,r){(t[_]&3)===n&&Tg(t,e,n,r)}function Ic(t,e){let n=t[_];(n&3)===e&&(n&=16383,n+=1,t[_]=n)}function Tg(t,e,n,r){let i=r!==void 0?t[qn]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[qn]+=65536),(a<s||s==-1)&&(yD(t,n,e,c),t[qn]=(t[qn]&4294901760)+c+2),c++}function lp(t,e){Ue(4,t,e);let n=M(null);try{e.call(t)}finally{M(n),Ue(5,t,e)}}function yD(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[_]>>14<t[qn]>>16&&(t[_]&3)===e&&(t[_]+=16384,lp(a,s)):lp(a,s)}var Zn=-1,sn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function _D(t){return t instanceof sn}function ED(t){return(t.flags&8)!==0}function ID(t){return(t.flags&16)!==0}var wc={},$c=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=po(r);let i=this.injector.get(e,wc,r);return i!==wc||n===wc?i:this.parentInjector.get(e,n,r)}};function wD(t){return t!==Zn}function Wc(t){return t&32767}function DD(t){return t>>16}function Gc(t,e){let n=DD(t),r=e;for(;n>0;)r=r[oi],n--;return r}var zc=!0;function no(t){let e=zc;return zc=t,e}var CD=256,Sg=CD-1,Ag=5,bD=0,Be={};function TD(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(zr)&&(r=n[zr]),r==null&&(r=n[zr]=bD++);let i=r&Sg,s=1<<i;e.data[t+(i>>Ag)]|=s}function ro(t,e){let n=Ng(t,e);if(n!==-1)return n;let r=e[C];r.firstCreatePass&&(t.injectorIndex=e.length,Dc(r.data,t),Dc(e,null),Dc(r.blueprint,null));let i=Mg(t,e),s=t.injectorIndex;if(wD(i)){let o=Wc(i),a=Gc(i,e),c=a[C].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Dc(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ng(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Mg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kg(i),r===null)return Zn;if(n++,i=i[oi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Zn}function qc(t,e,n){TD(t,e,n)}function Rg(t,e,n){if(n&N.Optional||t!==void 0)return t;bl(e,"NodeInjector")}function xg(t,e,n,r){if(n&N.Optional&&r===void 0&&(r=null),!(n&(N.Self|N.Host))){let i=t[Xn],s=_e(void 0);try{return i?i.get(e,r,n&N.Optional):Bp(e,r,n&N.Optional)}finally{_e(s)}}return Rg(r,e,n)}function Og(t,e,n,r=N.Default,i){if(t!==null){if(e[_]&2048&&!(r&N.Self)){let o=RD(t,e,n,r,Be);if(o!==Be)return o}let s=Pg(t,e,n,r,Be);if(s!==Be)return s}return xg(e,n,r,i)}function Pg(t,e,n,r,i){let s=ND(n);if(typeof s=="function"){if(!Eg(e,t,r))return r&N.Host?Rg(i,n,r):xg(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&N.Optional))bl(n);else return o}finally{Cg()}}else if(typeof s=="number"){let o=null,a=Ng(t,e),c=Zn,l=r&N.Host?e[$e][We]:null;for((a===-1||r&N.SkipSelf)&&(c=a===-1?Mg(t,e):e[a+8],c===Zn||!dp(r,!1)?a=-1:(o=e[C],a=Wc(c),e=Gc(c,e)));a!==-1;){let u=e[C];if(up(s,a,u.data)){let d=SD(a,e,n,o,r,l);if(d!==Be)return d}c=e[a+8],c!==Zn&&dp(r,e[C].data[a+8]===l)&&up(s,a,e)?(o=u,a=Wc(c),e=Gc(c,e)):a=-1}}return i}function SD(t,e,n,r,i,s){let o=e[C],a=o.data[t+8],c=r==null?Ml(a)&&zc:r!=o&&(a.type&3)!==0,l=i&N.Host&&s===a,u=AD(a,o,n,c,l);return u!==null?nr(e,o,u,a):Be}function AD(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=o[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=o[c];if(h&&Nt(h)&&h.type===n)return c}return null}function nr(t,e,n,r){let i=t[n],s=e.data;if(_D(i)){let o=i;o.resolving&&tw(ew(s[n]));let a=no(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?_e(o.injectImpl):null,u=Eg(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&vD(n,s[n],e)}finally{l!==null&&_e(l),no(a),o.resolving=!1,Cg()}}return i}function ND(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(zr)?t[zr]:void 0;return typeof e=="number"?e>=0?e&Sg:MD:e}function up(t,e,n){let r=1<<t;return!!(n[e+(t>>Ag)]&r)}function dp(t,e){return!(t&N.Self)&&!(t&N.Host&&e)}var io=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Og(this._tNode,this._lView,e,po(r),n)}};function MD(){return new io(ze(),Y())}function Ul(t){return ni(()=>{let e=t.prototype.constructor,n=e[Ks]||Yc(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ks]||Yc(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Yc(t){return kp(t)?()=>{let e=Yc(oe(t));return e&&e()}:en(t)}function RD(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[_]&2048&&!(o[_]&512);){let a=Pg(s,o,n,r|N.Self,Be);if(a!==Be)return a;let c=s.parent;if(!c){let l=o[rg];if(l){let u=l.get(n,Be,r);if(u!==Be)return u}c=kg(o),o=o[oi]}s=c}return i}function kg(t){let e=t[C],n=e.type;return n===2?e.declTNode:n===1?t[We]:null}function fp(t,e=null,n=null,r){let i=xD(t,e,n,r);return i.resolveInjectorInitializers(),i}function xD(t,e=null,n=null,r,i=new Set){let s=[n||Ee,Ow(t)];return r=r||(typeof t=="object"?void 0:Ie(t)),new Js(s,e||Nl(),r||null,i)}var Jt=class Jt{static create(e,n){if(Array.isArray(e))return fp({name:""},n,e,"");{let r=e.name??"";return fp({name:r},e.parent,e.providers,r)}}};Jt.THROW_IF_NOT_FOUND=qr,Jt.NULL=new Qs,Jt.\u0275prov=j({token:Jt,providedIn:"any",factory:()=>P($p)}),Jt.__NG_ELEMENT_ID__=-1;var Ce=Jt;var OD=new I("");OD.__NG_ELEMENT_ID__=t=>{let e=ze();if(e===null)throw new D(204,!1);if(e.type&2)return e.value;if(t&N.Optional)return null;throw new D(204,!1)};var PD="ngOriginalError";function Cc(t){return t[PD]}var Fg=!0,Lg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kD,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Kc=class extends Lg{constructor(e){super(),this._lView=e}onDestroy(e){return hg(this._lView,e),()=>Jw(this._lView,e)}};function kD(){return new Kc(Y())}var Eo=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Br(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Zc=class extends Ve{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Ww()&&(this.destroyRef=k(Lg,{optional:!0})??void 0,this.pendingTasks=k(Eo,{optional:!0})??void 0)}emit(e){let n=M(null);try{super.next(e)}finally{M(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ne&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},le=Zc;function so(...t){}function Vg(t){let e,n;function r(){t=so;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function hp(t){return queueMicrotask(()=>t()),()=>{t=so}}var Bl="isAngularZone",oo=Bl+"_ID",FD=0,B=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new le(!1),this.onMicrotaskEmpty=new le(!1),this.onStable=new le(!1),this.onError=new le(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Fg}=e;if(typeof Zone>"u")throw new D(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,jD(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bl)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new D(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new D(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,LD,so,so);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},LD={};function Hl(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function VD(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Vg(()=>{t.callbackScheduled=!1,Qc(t),t.isCheckStableRunning=!0,Hl(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Qc(t)}function jD(t){let e=()=>{VD(t)},n=FD++;t._inner=t._inner.fork({name:"angular",properties:{[Bl]:!0,[oo]:n,[oo+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(UD(c))return r.invokeTask(s,o,a,c);try{return pp(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),gp(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return pp(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!BD(c)&&e(),gp(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Qc(t),Hl(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Qc(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function pp(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gp(t){t._nesting--,Hl(t)}var Jc=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new le,this.onMicrotaskEmpty=new le,this.onStable=new le,this.onError=new le}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function UD(t){return jg(t,"__ignore_ng_zone__")}function BD(t){return jg(t,"__scheduler_tick__")}function jg(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var nt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Cc(e);for(;n&&Cc(n);)n=Cc(n);return n||null}},HD=new I("",{providedIn:"root",factory:()=>{let t=k(B),e=k(nt);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function $D(){return Ug(ze(),Y())}function Ug(t,e){return new ar(Ge(t,e))}var ar=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=$D;let t=e;return t})();function Bg(t){return(t.flags&128)===128}var Hg=new Map,WD=0;function GD(){return WD++}function zD(t){Hg.set(t[vo],t)}function Xc(t){Hg.delete(t[vo])}var mp="__ngContext__";function on(t,e){St(e)?(t[mp]=e[vo],zD(e)):t[mp]=e}function $g(t){return Gg(t[Qr])}function Wg(t){return Gg(t[Me])}function Gg(t){for(;t!==null&&!un(t);)t=t[Me];return t}var el;function zg(t){el=t}function qD(){if(el!==void 0)return el;if(typeof document<"u")return document;throw new D(210,!1)}var $l=new I("",{providedIn:"root",factory:()=>YD}),YD="ng",Wl=new I(""),Rt=new I("",{providedIn:"platform",factory:()=>"unknown"});var Gl=new I("",{providedIn:"root",factory:()=>qD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var KD="h",ZD="b";var QD=()=>null;function zl(t,e,n=!1){return QD(t,e,n)}var qg=!1,JD=new I("",{providedIn:"root",factory:()=>qg});var tl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${WI})`}};function ql(t){return t instanceof tl?t.changingThisBreaksApplicationSecurity:t}var rt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(rt||{}),XD;function Yl(t,e){return XD(t,e)}function Yn(t,e,n,r,i){if(r!=null){let s,o=!1;un(r)?s=r:St(r)&&(o=!0,r=r[it]);let a=tt(r);t===0&&n!==null?i==null?Qg(e,n,a):nl(e,n,a,i||null,!0):t===1&&n!==null?nl(e,n,a,i||null,!0):t===2?pC(e,a,o):t===3&&e.destroyNode(a),s!=null&&mC(e,t,s,n,i)}}function eC(t,e){return t.createText(e)}function tC(t,e,n){t.setValue(e,n)}function Yg(t,e,n){return t.createElement(e,n)}function nC(t,e){Kg(t,e),e[it]=null,e[We]=null}function rC(t,e,n,r,i,s){r[it]=i,r[We]=e,Io(t,r,n,1,i,s)}function Kg(t,e){e[et].changeDetectionScheduler?.notify(9),Io(t,e,e[ae],2,null,null)}function iC(t){let e=t[Qr];if(!e)return bc(t[C],t);for(;e;){let n=null;if(St(e))n=e[Qr];else{let r=e[ue];r&&(n=r)}if(!n){for(;e&&!e[Me]&&e!==t;)St(e)&&bc(e[C],e),e=e[De];e===null&&(e=t),St(e)&&bc(e[C],e),n=e&&e[Me]}e=n}}function sC(t,e,n,r){let i=ue+r,s=n.length;r>0&&(n[i-1][Me]=e),r<s-ue?(e[Me]=n[i],fw(n,ue+r,e)):(n.push(e),e[Me]=null),e[De]=n;let o=e[er];o!==null&&n!==o&&Zg(o,e);let a=e[tr];a!==null&&a.insertView(t),Bc(e),e[_]|=128}function Zg(t,e){let n=t[eo],r=e[De];if(St(r))t[_]|=to.HasTransplantedViews;else{let i=r[De][$e];e[$e]!==i&&(t[_]|=to.HasTransplantedViews)}n===null?t[eo]=[e]:n.push(e)}function Kl(t,e){let n=t[eo],r=n.indexOf(e);n.splice(r,1)}function Zl(t,e){if(t.length<=ue)return;let n=ue+e,r=t[n];if(r){let i=r[er];i!==null&&i!==t&&Kl(i,r),e>0&&(t[n-1][Me]=r[Me]);let s=Hp(t,ue+e);nC(r[C],r);let o=s[tr];o!==null&&o.detachView(s[C]),r[De]=null,r[Me]=null,r[_]&=-129}return r}function Ql(t,e){if(!(e[_]&256)){let n=e[ae];n.destroyNode&&Io(t,e,n,3,null,null),iC(e)}}function bc(t,e){if(e[_]&256)return;let n=M(null);try{e[_]&=-129,e[_]|=256,e[we]&&nc(e[we]),aC(t,e),oC(t,e),e[C].type===1&&e[ae].destroy();let r=e[er];if(r!==null&&un(e[De])){r!==e[De]&&Kl(r,e);let i=e[tr];i!==null&&i.detachView(t)}Xc(e)}finally{M(n)}}function oC(t,e){let n=t.cleanup,r=e[Xs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Xs]=null);let i=e[Tt];if(i!==null){e[Tt]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function aC(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof sn)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Ue(4,a,c);try{c.call(a)}finally{Ue(5,a,c)}}else{Ue(4,i,s);try{s.call(i)}finally{Ue(5,i,s)}}}}}function cC(t,e,n){return lC(t,e.parent,n)}function lC(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[it];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===He.None||s===He.Emulated)return null}return Ge(r,n)}}function nl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Qg(t,e,n){t.appendChild(e,n)}function vp(t,e,n,r,i){r!==null?nl(t,e,n,r,i):Qg(t,e,n)}function uC(t,e){return t.parentNode(e)}function dC(t,e,n){return hC(t,e,n)}function fC(t,e,n){return t.type&40?Ge(t,n):null}var hC=fC,yp;function Jl(t,e,n,r){let i=cC(t,r,e),s=e[ae],o=r.parent||e[We],a=dC(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)vp(s,i,n[c],a,!1);else vp(s,i,n,a,!1);yp!==void 0&&yp(s,r,e,n,i)}function Wr(t,e){if(e!==null){let n=e.type;if(n&3)return Ge(e,t);if(n&4)return rl(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Wr(t,r);{let i=t[e.index];return un(i)?rl(-1,i):tt(i)}}else{if(n&128)return Wr(t,e.next);if(n&32)return Yl(e,t)()||tt(t[e.index]);{let r=Jg(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=nn(t[$e]);return Wr(i,r)}else return Wr(t,e.next)}}}return null}function Jg(t,e){if(e!==null){let r=t[$e][We],i=e.projection;return r.projection[i]}return null}function rl(t,e){let n=ue+t+1;if(n<e.length){let r=e[n],i=r[C].firstChild;if(i!==null)return Wr(r,i)}return e[Jr]}function pC(t,e,n){t.removeChild(null,e,n)}function Xl(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&on(tt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Xl(t,e,n.child,r,i,s,!1),Yn(e,t,i,a,s);else if(c&32){let l=Yl(n,r),u;for(;u=l();)Yn(e,t,i,u,s);Yn(e,t,i,a,s)}else c&16?gC(t,e,r,n,i,s):Yn(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Io(t,e,n,r,i,s){Xl(n,r,t.firstChild,e,i,s,!1)}function gC(t,e,n,r,i,s){let o=n[$e],c=o[We].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Yn(e,t,i,u,s)}else{let l=c,u=o[De];Bg(r)&&(l.flags|=128),Xl(t,e,l,u,i,s,!0)}}function mC(t,e,n,r,i){let s=n[Jr],o=tt(n);s!==o&&Yn(e,t,r,s,i);for(let a=ue;a<n.length;a++){let c=n[a];Io(c[C],c,t,e,r,s)}}function vC(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:rt.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=rt.Important),t.setStyle(n,r,i,s))}}function yC(t,e,n){t.setAttribute(e,"style",n)}function Xg(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function em(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&kc(t,e,r),i!==null&&Xg(t,e,i),s!==null&&yC(t,e,s)}var hn={};function pn(t=1){tm(Oe(),Y(),fn()+t,!1)}function tm(t,e,n,r){if(!r)if((e[_]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Gs(e,s,n)}else{let s=t.preOrderHooks;s!==null&&zs(e,s,0,n)}rn(n)}function W(t,e=N.Default){let n=Y();if(n===null)return P(t,e);let r=ze();return Og(r,n,oe(t),e)}function nm(t,e,n,r,i,s){let o=M(null);try{let a=null;i&At.SignalBased&&(a=e[r][Et]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&At.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):og(e,a,r,s)}finally{M(o)}}function _C(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)rn(~i);else{let s=i,o=n[++r],a=n[++r];dD(o,s);let c=e[s];a(2,c)}}}finally{rn(-1)}}function wo(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[it]=i,d[_]=r|4|128|8|64,(l!==null||t&&t[_]&2048)&&(d[_]|=2048),dg(d),d[De]=d[oi]=t,d[me]=n,d[et]=o||t&&t[et],d[ae]=a||t&&t[ae],d[Xn]=c||t&&t[Xn]||null,d[We]=s,d[vo]=GD(),d[Zr]=u,d[rg]=l,d[$e]=e.type==2?t[$e]:d,d}function Do(t,e,n,r,i){let s=t.data[e];if(s===null)s=EC(t,e,n,r,i),uD()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=sD();s.injectorIndex=o===null?-1:o.injectorIndex}return ci(s,!0),s}function EC(t,e,n,r,i){let s=mg(),o=vg(),a=o?s:s&&s.parent,c=t.data[e]=bC(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function rm(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function im(t,e,n,r,i){let s=fn(),o=r&2;try{rn(-1),o&&e.length>Re&&tm(t,e,Re,!1),Ue(o?2:0,i),n(r,i)}finally{rn(s),Ue(o?3:1,i)}}function sm(t,e,n){if(sg(e)){let r=M(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{M(r)}}}function om(t,e,n){gg()&&(xC(t,e,n,Ge(n,e)),(n.flags&64)===64&&dm(t,e,n))}function am(t,e,n=Ge){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function cm(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=eu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function eu(t,e,n,r,i,s,o,a,c,l,u){let d=Re+r,f=d+i,h=IC(d,f),g=typeof l=="function"?l():l;return h[C]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function IC(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:hn);return n}function wC(t,e,n,r){let s=r.get(JD,qg)||n===He.ShadowDom,o=t.selectRootElement(e,s);return DC(o),o}function DC(t){CC(t)}var CC=()=>null;function bC(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return nD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function _p(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=At.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Ep(r,n,l,a,c):Ep(r,n,l,a)}return r}function Ep(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function TC(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=n?n.get(d):null,h=f?f.inputs:null,g=f?f.outputs:null;c=_p(0,d.inputs,u,c,h),l=_p(1,d.outputs,u,l,g);let v=c!==null&&o!==null&&!Sl(e)?BC(c,u,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function SC(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function AC(t,e,n,r,i,s,o,a){let c=Ge(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(nu(t,n,u,r,i),Ml(e)&&NC(n,e.index)):e.type&3?(r=SC(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function NC(t,e){let n=dn(e,t);n[_]&16||(n[_]|=64)}function lm(t,e,n,r){if(gg()){let i=r===null?null:{"":-1},s=PC(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&um(t,e,n,o,i,a),i&&kC(n,r,i)}n.mergedAttrs=Kr(n.mergedAttrs,n.attrs)}function um(t,e,n,r,i,s){for(let l=0;l<r.length;l++)qc(ro(n,e),t,r[l].type);LC(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=rm(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Kr(n.mergedAttrs,u.hostAttrs),VC(t,n,e,c,u),FC(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}TC(t,n,s)}function MC(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;RC(o)!=a&&o.push(a),o.push(n,r,s)}}function RC(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function xC(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Ml(n)&&jC(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ro(n,e),on(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=nr(e,t,a,n);if(on(l,e),o!==null&&UC(e,a-i,l,c,n,o),Nt(c)){let u=dn(n.index,e);u[me]=nr(e,t,a,n)}}}function dm(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=fD();try{rn(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Hc(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&OC(c,l)}}finally{rn(-1),Hc(o)}}function OC(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function PC(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Dw(e,o.selectors,!1))if(r||(r=[]),Nt(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;il(t,e,c)}else r.unshift(o),il(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function il(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function kC(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new D(-301,!1);r.push(e[i],s)}}}function FC(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Nt(e)&&(n[""]=t)}}function LC(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function VC(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=en(i.type,!0)),o=new sn(s,Nt(i),W);t.blueprint[r]=o,n[r]=o,MC(t,e,r,rm(t,n,i.hostVars,hn),i)}function jC(t,e,n){let r=Ge(e,t),i=cm(n),s=t[et].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=tu(t,wo(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function UC(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];nm(r,n,c,l,u,d)}}function BC(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function HC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function fm(t,e){let n=t.contentQueries;if(n!==null){let r=M(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];_g(s),a.contentQueries(2,e[o],o)}}}finally{M(r)}}}function tu(t,e){return t[Qr]?t[op][Me]=e:t[Qr]=e,t[op]=e,e}function sl(t,e,n){_g(0);let r=M(null);try{e(t,n)}finally{M(r)}}function $C(t){return t[Xs]??=[]}function WC(t){return t.cleanup??=[]}function hm(t,e){let n=t[Xn],r=n?n.get(nt,null):null;r&&r.handleError(e)}function nu(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];nm(u,l,r,a,c,i)}}function GC(t,e,n){let r=ug(e,t);tC(t[ae],r,n)}function zC(t,e){let n=dn(e,t),r=n[C];qC(r,n);let i=n[it];i!==null&&n[Zr]===null&&(n[Zr]=zl(i,n[Xn])),ru(r,n,n[me])}function qC(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ru(t,e,n){kl(e);try{let r=t.viewQuery;r!==null&&sl(1,r,n);let i=t.template;i!==null&&im(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[tr]?.finishViewCreation(t),t.staticContentQueries&&fm(t,e),t.staticViewQueries&&sl(2,t.viewQuery,n);let s=t.components;s!==null&&YC(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[_]&=-5,Fl()}}function YC(t,e){for(let n=0;n<e.length;n++)zC(t,e[n])}function pm(t,e,n,r){let i=M(null);try{let s=e.tView,a=t[_]&4096?4096:16,c=wo(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[er]=l;let u=t[tr];return u!==null&&(c[tr]=u.createEmbeddedView(s)),ru(s,c,n),c}finally{M(i)}}function KC(t,e){let n=ue+e;if(n<t.length)return t[n]}function gm(t,e){return!e||e.firstChild===null||Bg(t)}function mm(t,e,n,r=!0){let i=e[C];if(sC(i,e,t,n),r){let o=rl(n,t),a=e[ae],c=uC(a,t[Jr]);c!==null&&rC(i,t[We],a,e,c,o)}let s=e[Zr];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ZC(t,e){let n=Zl(t,e);return n!==void 0&&Ql(n[C],n),n}function ao(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(tt(s)),un(s)&&QC(s,r);let o=n.type;if(o&8)ao(t,e,n.child,r);else if(o&32){let a=Yl(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Jg(e,n);if(Array.isArray(a))r.push(...a);else{let c=nn(e[$e]);ao(c[C],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function QC(t,e){for(let n=ue;n<t.length;n++){let r=t[n],i=r[C].firstChild;i!==null&&ao(r[C],r,i,e)}t[Jr]!==t[it]&&e.push(t[Jr])}var vm=[];function JC(t){return t[we]??XC(t)}function XC(t){let e=vm.pop()??Object.create(tb);return e.lView=t,e}function eb(t){t.lView[we]!==t&&(t.lView=null,vm.push(t))}var tb=z(U({},Ur),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{_o(t.lView)},consumerOnSignalRead(){this.lView[we]=this}});function nb(t){let e=t[we]??Object.create(rb);return e.lView=t,e}var rb=z(U({},Ur),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=nn(t.lView);for(;e&&!ym(e[C]);)e=nn(e);e&&fg(e)},consumerOnSignalRead(){this.lView[we]=this}});function ym(t){return t.type!==2}var ib=100;function _m(t,e=!0,n=0){let r=t[et],i=r.rendererFactory,s=!1;s||i.begin?.();try{sb(t,n)}catch(o){throw e&&hm(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function sb(t,e){let n=yg();try{cp(!0),ol(t,e);let r=0;for(;yo(t);){if(r===ib)throw new D(103,!1);r++,ol(t,1)}}finally{cp(n)}}function ob(t,e,n,r){let i=e[_];if((i&256)===256)return;let s=!1,o=!1;!s&&e[et].inlineEffectRunner?.flush(),kl(e);let a=!0,c=null,l=null;s||(ym(t)?(l=JC(e),c=vs(l)):hh()===null?(a=!1,l=nb(e),c=vs(l)):e[we]&&(nc(e[we]),e[we]=null));try{dg(e),cD(t.bindingStartIndex),n!==null&&im(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let h=t.preOrderCheckHooks;h!==null&&Gs(e,h,null)}else{let h=t.preOrderHooks;h!==null&&zs(e,h,0,null),Ic(e,0)}if(o||ab(e),Em(e,0),t.contentQueries!==null&&fm(t,e),!s)if(u){let h=t.contentCheckHooks;h!==null&&Gs(e,h)}else{let h=t.contentHooks;h!==null&&zs(e,h,1),Ic(e,1)}_C(t,e);let d=t.components;d!==null&&wm(e,d,0);let f=t.viewQuery;if(f!==null&&sl(2,f,r),!s)if(u){let h=t.viewCheckHooks;h!==null&&Gs(e,h)}else{let h=t.viewHooks;h!==null&&zs(e,h,2),Ic(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ec]){for(let h of e[Ec])h();e[Ec]=null}s||(e[_]&=-73)}catch(u){throw s||_o(e),u}finally{l!==null&&(ec(l,c),a&&eb(l)),Fl()}}function Em(t,e){for(let n=$g(t);n!==null;n=Wg(n))for(let r=ue;r<n.length;r++){let i=n[r];Im(i,e)}}function ab(t){for(let e=$g(t);e!==null;e=Wg(e)){if(!(e[_]&to.HasTransplantedViews))continue;let n=e[eo];for(let r=0;r<n.length;r++){let i=n[r];fg(i)}}}function cb(t,e,n){let r=dn(e,t);Im(r,n)}function Im(t,e){Ol(t)&&ol(t,e)}function ol(t,e){let r=t[C],i=t[_],s=t[we],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&tc(s)),o||=!1,s&&(s.dirty=!1),t[_]&=-9217,o)ob(r,t,r.template,t[me]);else if(i&8192){Em(t,1);let a=r.components;a!==null&&wm(t,a,1)}}function wm(t,e,n){for(let r=0;r<e.length;r++)cb(t,e[r],n)}function iu(t,e){let n=yg()?64:1088;for(t[et].changeDetectionScheduler?.notify(e);t;){t[_]|=n;let r=nn(t);if(jc(t)&&!r)return t;t=r}return null}var al=class{get rootNodes(){let e=this._lView,n=e[C];return ao(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[me]}set context(e){this._lView[me]=e}get destroyed(){return(this._lView[_]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[De];if(un(e)){let n=e[Gw],r=n?n.indexOf(this):-1;r>-1&&(Zl(e,r),Hp(n,r))}this._attachedToViewContainer=!1}Ql(this._lView[C],this._lView)}onDestroy(e){hg(this._lView,e)}markForCheck(){iu(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_]&=-129}reattach(){Bc(this._lView),this._lView[_]|=128}detectChanges(){this._lView[_]|=1024,_m(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new D(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=jc(this._lView),n=this._lView[er];n!==null&&!e&&Kl(n,this._lView),Kg(this._lView[C],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new D(902,!1);this._appRef=e;let n=jc(this._lView),r=this._lView[er];r!==null&&!n&&Zg(r,this._lView),Bc(this._lView)}};var bL=new RegExp(`^(\\d+)*(${ZD}|${KD})*(.*)`);var lb=()=>null;function Dm(t,e){return lb(t,e)}var rr=class{},Cm=new I("",{providedIn:"root",factory:()=>!1});var bm=new I(""),Tm=new I(""),cl=class{},co=class{};function ub(t){let e=Error(`No component factory found for ${Ie(t)}.`);return e[db]=t,e}var db="ngComponent";var ll=class{resolveComponentFactory(e){throw ub(e)}},su=class su{};su.NULL=new ll;var ei=su,ir=class{},li=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>fb();let t=e;return t})();function fb(){let t=Y(),e=ze(),n=dn(e.index,t);return(St(n)?n:t)[ae]}var hb=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function ul(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Zh(i,a);else if(s==2){let c=a,l=e[++o];r=Zh(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var dl=class extends ei{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=go(e);return new fl(n,this.ngModule)}};function Ip(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:At.None;e?n.push({propName:o,templateName:r,isSignal:(a&At.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function pb(t){let e=t.toLowerCase();return e==="svg"?Kw:e==="math"?Zw:null}var fl=class extends co{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ip(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ip(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Sw(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=M(null);try{i=i||this.ngModule;let o=i instanceof tn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new $c(e,o):e,c=a.get(ir,null);if(c===null)throw new D(407,!1);let l=a.get(hb,null),u=a.get(rr,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",g=r?wC(f,r,this.componentDef.encapsulation,a):Yg(f,h,pb(h)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let y=null;g!==null&&(y=zl(g,a,!0));let S=eu(0,null,null,1,0,null,null,null,null,null,null),R=wo(null,S,null,v,null,null,d,f,a,null,y);kl(R);let K,Z,ye=null;try{let te=this.componentDef,Xe,Lr=null;te.findHostDirectiveDefs?(Xe=[],Lr=new Map,te.findHostDirectiveDefs(te,Xe,Lr),Xe.push(te)):Xe=[te];let Vr=gb(R,g);ye=mb(Vr,g,te,Xe,R,d,f),Z=xl(S,Re),g&&_b(f,te,g,r),n!==void 0&&Eb(Z,this.ngContentSelectors,n),K=yb(ye,te,Xe,Lr,R,[Ib]),ru(S,R,null)}catch(te){throw ye!==null&&Xc(ye),Xc(R),te}finally{Fl()}return new hl(this.componentType,K,Ug(Z,R),R,Z)}finally{M(s)}}},hl=class extends cl{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new al(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;nu(s[C],s,i,e,n),this.previousInputValues.set(e,n);let o=dn(this._tNode.index,s);iu(o,1)}}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function gb(t,e){let n=t[C],r=Re;return t[r]=e,Do(n,r,2,"#host",null)}function mb(t,e,n,r,i,s,o){let a=i[C];vb(r,t,e,o);let c=null;e!==null&&(c=zl(e,i[Xn]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=wo(i,cm(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&il(a,t,r.length-1),tu(i,d),i[t.index]=d}function vb(t,e,n,r){for(let i of t)e.mergedAttrs=Kr(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ul(e,e.mergedAttrs,!0),n!==null&&em(r,n,e))}function yb(t,e,n,r,i,s){let o=ze(),a=i[C],c=Ge(o,i);um(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,f=nr(i,a,d,o);on(f,i)}dm(a,i,o),c&&on(c,i);let l=nr(i,a,o.directiveStart+o.componentOffset,o);if(t[me]=i[me]=l,s!==null)for(let u of s)u(l,e);return sm(a,o,i),l}function _b(t,e,n,r){if(r)kc(t,n,["ng-version","18.2.3"]);else{let{attrs:i,classes:s}=Aw(e.selectors[0]);i&&kc(t,n,i),s&&s.length>0&&Xg(t,n,s.join(" "))}}function Eb(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Ib(){let t=ze();jl(Y()[C],t)}var wb=()=>!1;function Db(t,e,n){return wb(t,e,n)}var wp=new Set;function ui(t){wp.has(t)||(wp.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function di(t,e){ui("NgSignals");let n=Ch(t),r=n[Et];return e?.equal&&(r.equal=e.equal),n.set=i=>rc(r,i),n.update=i=>bh(r,i),n.asReadonly=Cb.bind(n),n}function Cb(){let t=this[Et];if(t.readonlyFn===void 0){let e=()=>this();e[Et]=t,t.readonlyFn=e}return t.readonlyFn}function bb(t){return Object.getPrototypeOf(t.prototype).constructor}function st(t){let e=bb(t.type),n=!0,r=[t];for(;e;){let i;if(Nt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new D(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Bs(t.inputs),o.inputTransforms=Bs(t.inputTransforms),o.declaredInputs=Bs(t.declaredInputs),o.outputs=Bs(t.outputs);let a=i.hostBindings;a&&Mb(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Ab(t,c),l&&Nb(t,l),Tb(t,i),qI(t.outputs,i.outputs),Nt(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===st&&(n=!1)}}e=Object.getPrototypeOf(e)}Sb(r)}function Tb(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Sb(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Kr(i.hostAttrs,n=Kr(n,i.hostAttrs))}}function Bs(t){return t===Qn?{}:t===Ee?[]:t}function Ab(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Nb(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function Mb(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var sr=class{};var lo=class extends sr{constructor(e){super(),this.componentFactoryResolver=new dl(this),this.instance=null;let n=new Js([...e.providers,{provide:sr,useValue:this},{provide:ei,useValue:this.componentFactoryResolver}],e.parent||Nl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Rb(t,e,n=null){return new lo({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function xb(t,e,n){return t[e]=n}function fi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ob(t){return(t.flags&32)===32}function Pb(t,e,n,r,i,s,o,a,c){let l=e.consts,u=Do(e,t,4,o||null,a||null);lm(e,n,u,Xr(l,c)),jl(e,u);let d=u.tView=eu(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Dp(t,e,n,r,i,s,o,a,c,l){let u=n+Re,d=e.firstCreatePass?Pb(u,e,t,r,i,s,o,a,c):e.data[u];ci(d,!1);let f=kb(e,t,d,n);Ll()&&Jl(e,t,f,d),on(f,t);let h=HC(f,t,f,d);return t[u]=h,tu(t,h),Db(h,d,t),Rl(d)&&om(e,t,d),c!=null&&am(t,d,l),d}var kb=Fb;function Fb(t,e,n,r){return Vl(!0),e[ae].createComment("")}var Gr=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Gr||{}),Lb=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),Xt=class Xt{constructor(){this.ngZone=k(B),this.scheduler=k(rr),this.errorHandler=k(nt,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Xt.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Xt.PHASES=[Gr.EarlyRead,Gr.Write,Gr.MixedReadWrite,Gr.Read],Xt.\u0275prov=j({token:Xt,providedIn:"root",factory:()=>new Xt});var Cp=Xt;function Vb(t,e,n,r){return fi(t,Pl(),n)?e+jp(n)+r:hn}function Hs(t,e){return t<<17|e<<2}function an(t){return t>>17&32767}function jb(t){return(t&2)==2}function Ub(t,e){return t&131071|e<<17}function pl(t){return t|2}function or(t){return(t&131068)>>2}function Tc(t,e){return t&-131069|e<<2}function Bb(t){return(t&1)===1}function gl(t){return t|1}function Hb(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=an(o),c=or(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||ii(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=an(t[a+1]);t[r+1]=Hs(f,a),f!==0&&(t[f+1]=Tc(t[f+1],r)),t[a+1]=Ub(t[a+1],r)}else t[r+1]=Hs(a,0),a!==0&&(t[a+1]=Tc(t[a+1],r)),a=r;else t[r+1]=Hs(c,0),a===0?a=r:t[c+1]=Tc(t[c+1],r),c=r;l&&(t[r+1]=pl(t[r+1])),bp(t,u,r,!0),bp(t,u,r,!1),$b(e,u,t,r,s),o=Hs(a,c),s?e.classBindings=o:e.styleBindings=o}function $b(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ii(s,e)>=0&&(n[r+1]=gl(n[r+1]))}function bp(t,e,n,r){let i=t[n+1],s=e===null,o=r?an(i):or(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];Wb(c,e)&&(a=!0,t[o+1]=r?gl(l):pl(l)),o=r?an(l):or(l)}a&&(t[n+1]=r?pl(i):gl(i))}function Wb(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ii(t,e)>=0:!1}function Co(t,e,n){let r=Y(),i=Pl();if(fi(r,i,e)){let s=Oe(),o=gD();AC(s,o,r,t,e,r[ae],n,!1)}return Co}function Tp(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";nu(t,n,s[o],o,r)}function bo(t,e){return Gb(t,e,null,!0),bo}function Gb(t,e,n,r){let i=Y(),s=Oe(),o=lD(2);if(s.firstUpdatePass&&qb(s,t,o,r),e!==hn&&fi(i,o,e)){let a=s.data[fn()];Jb(s,a,i,i[ae],t,i[o+1]=Xb(e,n),r,o)}}function zb(t,e){return e>=t.expandoStartIndex}function qb(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[fn()],o=zb(t,n);eT(s,r)&&e===null&&!o&&(e=!1),e=Yb(i,s,e,r),Hb(i,s,e,n,o,r)}}function Yb(t,e,n,r){let i=hD(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Sc(null,t,e,n,r),n=ti(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Sc(i,t,e,n,r),s===null){let c=Kb(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Sc(null,t,e,c[1],r),c=ti(c,e.attrs,r),Zb(t,e,r,c))}else s=Qb(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Kb(t,e,n){let r=n?e.classBindings:e.styleBindings;if(or(r)!==0)return t[an(r)]}function Zb(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[an(i)]=r}function Qb(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ti(r,o,n)}return ti(r,e.attrs,n)}function Sc(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ti(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ti(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),pw(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Jb(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=Bb(l)?Sp(c,e,n,i,or(l),o):void 0;if(!uo(u)){uo(s)||jb(l)&&(s=Sp(c,null,n,i,a,o));let d=ug(fn(),n);vC(r,o,d,i,s)}}function Sp(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===hn&&(f=d?Ee:void 0);let h=d?yc(f,r):u===r?f:void 0;if(l&&!uo(h)&&(h=yc(c,r)),uo(h)&&(a=h,o))return a;let g=t[i+1];i=o?an(g):or(g)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=yc(c,r))}return a}function uo(t){return t!==void 0}function Xb(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ie(ql(t)))),t}function eT(t,e){return(t.flags&(e?8:16))!==0}var ml=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Ac(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function tT(t,e,n){let r,i,s=0,o=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let l=t.at(s),u=e[s],d=Ac(s,l,s,u,n);if(d!==0){d<0&&t.updateValue(s,u),s++;continue}let f=t.at(o),h=e[c],g=Ac(o,f,c,h,n);if(g!==0){g<0&&t.updateValue(o,h),o--,c--;continue}let v=n(s,l),y=n(o,f),S=n(s,u);if(Object.is(S,y)){let R=n(c,h);Object.is(R,v)?(t.swap(s,o),t.updateValue(o,h),c--,o--):t.move(o,s),t.updateValue(s,u),s++;continue}if(r??=new fo,i??=Np(t,s,o,n),vl(t,r,s,S))t.updateValue(s,u),s++,o++;else if(i.has(S))r.set(v,t.detach(s)),o--;else{let R=t.create(s,e[s]);t.attach(s,R),s++,o++}}for(;s<=c;)Ap(t,r,n,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&s<=o;){let u=t.at(s),d=l.value,f=Ac(s,u,s,d,n);if(f!==0)f<0&&t.updateValue(s,d),s++,l=c.next();else{r??=new fo,i??=Np(t,s,o,n);let h=n(s,d);if(vl(t,r,s,h))t.updateValue(s,d),s++,o++,l=c.next();else if(!i.has(h))t.attach(s,t.create(s,d)),s++,o++,l=c.next();else{let g=n(s,u);r.set(g,t.detach(s)),o--}}}for(;!l.done;)Ap(t,r,n,t.length,l.value),l=c.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(c=>{t.destroy(c)})}function vl(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Ap(t,e,n,r,i){if(vl(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function Np(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var fo=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var yl=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ue}};function Sm(t){return t}var _l=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Am(t,e,n,r,i,s,o,a,c,l,u,d,f){ui("NgControlFlow");let h=Y(),g=Oe(),v=c!==void 0,y=Y(),S=a?o.bind(y[$e][me]):o,R=new _l(v,S);y[Re+t]=R,Dp(h,g,t+1,e,n,r,i,Xr(g.consts,s)),v&&Dp(h,g,t+2,c,l,u,d,Xr(g.consts,f))}var El=class extends ml{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ue}at(e){return this.getLView(e)[me].$implicit}attach(e,n){let r=n[Zr];this.needsIndexUpdate||=e!==this.length,mm(this.lContainer,n,e,gm(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,nT(this.lContainer,e)}create(e,n){let r=Dm(this.lContainer,this.templateTNode.tView.ssrId),i=pm(this.hostLView,this.templateTNode,new yl(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Ql(e[C],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[me].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[me].$index=e}getLView(e){return rT(this.lContainer,e)}};function Nm(t){let e=M(null),n=fn();try{let r=Y(),i=r[C],s=r[n],o=n+1,a=Mp(r,o);if(s.liveCollection===void 0){let l=Rp(i,o);s.liveCollection=new El(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(tT(c,t,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let l=Pl(),u=c.length===0;if(fi(r,l,u)){let d=n+2,f=Mp(r,d);if(u){let h=Rp(i,d),g=Dm(f,h.tView.ssrId),v=pm(r,h,void 0,{dehydratedView:g});mm(f,v,0,gm(h,g))}else ZC(f,0)}}}finally{M(e)}}function Mp(t,e){return t[e]}function nT(t,e){return Zl(t,e)}function rT(t,e){return KC(t,e)}function Rp(t,e){return xl(t,e)}function iT(t,e,n,r,i,s){let o=e.consts,a=Xr(o,i),c=Do(e,t,2,r,a);return lm(e,n,c,Xr(o,s)),c.attrs!==null&&ul(c,c.attrs,!1),c.mergedAttrs!==null&&ul(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function be(t,e,n,r){let i=Y(),s=Oe(),o=Re+t,a=i[ae],c=s.firstCreatePass?iT(o,s,i,e,n,r):s.data[o],l=sT(s,i,c,a,e,t);i[o]=l;let u=Rl(c);return ci(c,!0),em(a,l,c),!Ob(c)&&Ll()&&Jl(s,i,l,c),Xw()===0&&on(l,i),eD(),u&&(om(s,i,c),sm(s,c,i)),r!==null&&am(i,c),be}function ce(){let t=ze();vg()?oD():(t=t.parent,ci(t,!1));let e=t;rD(e)&&iD(),tD();let n=Oe();return n.firstCreatePass&&(jl(n,t),sg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&ED(e)&&Tp(n,e,Y(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ID(e)&&Tp(n,e,Y(),e.stylesWithoutHost,!1),ce}function cr(t,e,n,r){return be(t,e,n,r),ce(),cr}var sT=(t,e,n,r,i,s)=>(Vl(!0),Yg(r,i,mD()));var Qt=void 0;function oT(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var aT=["en",[["a","p"],["AM","PM"],Qt],[["AM","PM"],Qt,Qt],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qt,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qt,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qt,"{1} 'at' {0}",Qt],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",oT],Nc={};function To(t){let e=cT(t),n=xp(e);if(n)return n;let r=e.split("-")[0];if(n=xp(r),n)return n;if(r==="en")return aT;throw new D(701,!1)}function xp(t){return t in Nc||(Nc[t]=$r.ng&&$r.ng.common&&$r.ng.common.locales&&$r.ng.common.locales[t]),Nc[t]}var gn=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(gn||{});function cT(t){return t.toLowerCase().replace(/_/g,"-")}var ho="en-US",lT="USD";var uT=ho;function dT(t){typeof t=="string"&&(uT=t.toLowerCase().replace(/_/g,"-"))}var fT=(t,e,n)=>{};function mn(t,e,n,r){let i=Y(),s=Oe(),o=ze();return pT(s,i,i[ae],o,t,e,r),mn}function hT(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Xs],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function pT(t,e,n,r,i,s,o){let a=Rl(r),l=t.firstCreatePass&&WC(t),u=e[me],d=$C(e),f=!0;if(r.type&3||o){let v=Ge(r,e),y=o?o(v):v,S=d.length,R=o?Z=>o(tt(Z[r.index])):r.index,K=null;if(!o&&a&&(K=hT(t,e,i,r.index)),K!==null){let Z=K.__ngLastListenerFn__||K;Z.__ngNextListenerFn__=s,K.__ngLastListenerFn__=s,f=!1}else{s=Pp(r,e,u,s),fT(v,i,s);let Z=n.listen(y,i,s);d.push(s,Z),l&&l.push(i,R,S,S+1)}}else s=Pp(r,e,u,s);let h=r.outputs,g;if(f&&h!==null&&(g=h[i])){let v=g.length;if(v)for(let y=0;y<v;y+=2){let S=g[y],R=g[y+1],ye=e[S][R].subscribe(s),te=d.length;d.push(s,ye),l&&l.push(i,r.index,te,-(te+1))}}}function Op(t,e,n,r){let i=M(null);try{return Ue(6,e,n),n(r)!==!1}catch(s){return hm(t,s),!1}finally{Ue(7,e,n),M(i)}}function Pp(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?dn(t.index,e):e;iu(o,5);let a=Op(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=Op(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function gT(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function qe(t,e=""){let n=Y(),r=Oe(),i=t+Re,s=r.firstCreatePass?Do(r,i,1,e,null):r.data[i],o=mT(r,n,s,e,t);n[i]=o,Ll()&&Jl(r,n,o,s),ci(s,!1)}var mT=(t,e,n,r,i)=>(Vl(!0),eC(e[ae],r));function So(t){return Ao("",t,""),So}function Ao(t,e,n){let r=Y(),i=Vb(r,t,e,n);return i!==hn&&GC(r,fn(),i),Ao}function vT(t,e,n){let r=Oe();if(r.firstCreatePass){let i=Nt(t);Il(n,r.data,r.blueprint,i,!0),Il(e,r.data,r.blueprint,i,!1)}}function Il(t,e,n,r,i){if(t=oe(t),Array.isArray(t))for(let s=0;s<t.length;s++)Il(t[s],e,n,r,i);else{let s=Oe(),o=Y(),a=ze(),c=Jn(t)?t:oe(t.provide),l=ng(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Jn(t)||!t.multi){let h=new sn(l,i,W),g=Rc(c,e,i?u:u+f,d);g===-1?(qc(ro(a,o),s,c),Mc(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),o.push(h)):(n[g]=h,o[g]=h)}else{let h=Rc(c,e,u+f,d),g=Rc(c,e,u,u+f),v=h>=0&&n[h],y=g>=0&&n[g];if(i&&!y||!i&&!v){qc(ro(a,o),s,c);let S=ET(i?_T:yT,n.length,i,r,l);!i&&y&&(n[g].providerFactory=S),Mc(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(S),o.push(S)}else{let S=Mm(n[i?g:h],l,!i&&r);Mc(s,t,h>-1?h:g,S)}!i&&r&&y&&n[g].componentProviders++}}}function Mc(t,e,n,r){let i=Jn(e),s=Lw(e);if(i||s){let c=(s?oe(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Mm(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Rc(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function yT(t,e,n,r){return wl(this.multi,[])}function _T(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=nr(n,n[C],this.providerFactory.index,r);s=a.slice(0,o),wl(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],wl(i,s);return s}function wl(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ET(t,e,n,r,i){let s=new sn(t,n,W);return s.multi=[],s.index=e,s.componentProviders=0,Mm(s,i,r&&!n),s}function hi(t,e=[]){return n=>{n.providersResolver=(r,i)=>vT(r,i?i(t):t,e)}}var IT=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Xp(!1,r.type),s=i.length>0?Rb([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=j({token:e,providedIn:"environment",factory:()=>new e(P(tn))});let t=e;return t})();function Rm(t){ui("NgStandalone"),t.getStandaloneInjector=e=>e.get(IT).getOrCreateStandaloneInjector(t)}function wT(t,e){let n=t[e];return n===hn?void 0:n}function DT(t,e,n,r,i,s){let o=e+n;return fi(t,o,i)?xb(t,o+1,s?r.call(s,i):r(i)):wT(t,o+1)}function xm(t,e){let n=Oe(),r,i=t+Re;n.firstCreatePass?(r=CT(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=en(r.type,!0)),o,a=_e(W);try{let c=no(!1),l=s();return no(c),gT(n,Y(),i,l),l}finally{_e(a)}}function CT(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Om(t,e,n){let r=t+Re,i=Y(),s=Qw(i,r);return bT(i,r)?DT(i,aD(),e,s.transform,n,s):s.transform(n)}function bT(t,e){return t[C].data[e].pure}var Mt=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Pm=new Mt("18.2.3");var km=new I("");function pi(t){return!!t&&typeof t.then=="function"}function Fm(t){return!!t&&typeof t.subscribe=="function"}var TT=new I(""),Lm=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=k(TT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(pi(o))r.push(o);else if(Fm(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ST=new I("");function AT(){Dh(()=>{throw new D(600,!1)})}function NT(t){return t.isBoundToModule}var MT=10;function RT(t,e,n){try{let r=n();return pi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var gi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(HD),this.afterRenderManager=k(Lb),this.zonelessEnabled=k(Cm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ve,this.afterTick=new Ve,this.componentTypes=[],this.components=[],this.isStable=k(Eo).hasPendingTasks.pipe(Zt(r=>!r)),this._injector=k(tn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof co;if(!this._injector.get(Lm).done){let h=!s&&Rw(r),g=!1;throw new D(405,g)}let a;s?a=r:a=this._injector.get(ei).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=NT(a)?void 0:this._injector.get(sr),l=i||a.selector,u=a.create(Ce.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(km,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),qs(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new D(101,!1);let r=M(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,M(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(ir,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<MT;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)xT(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>yo(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;qs(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ST,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>qs(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new D(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qs(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xT(t,e,n,r){if(!n&&!yo(t))return;_m(t,e,n&&!r?0:1)}var OT=(()=>{let e=class e{constructor(){this.zone=k(B),this.changeDetectionScheduler=k(rr),this.applicationRef=k(gi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new B(z(U({},kT()),{scheduleInRootZone:n})),[{provide:B,useFactory:t},{provide:Yr,multi:!0,useFactory:()=>{let r=k(OT,{optional:!0});return()=>r.initialize()}},{provide:Yr,multi:!0,useFactory:()=>{let r=k(FT);return()=>{r.initialize()}}},e===!0?{provide:bm,useValue:!0}:[],{provide:Tm,useValue:n??Fg}]}function kT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var FT=(()=>{let e=class e{constructor(){this.subscription=new ne,this.initialized=!1,this.zone=k(B),this.pendingTasks=k(Eo)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{B.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{B.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var LT=(()=>{let e=class e{constructor(){this.appRef=k(gi),this.taskService=k(Eo),this.ngZone=k(B),this.zonelessEnabled=k(Cm),this.disableScheduling=k(bm,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ne,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(oo):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Tm,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jc||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?hp:Vg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(oo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function VT(){return typeof $localize<"u"&&$localize.locale||ho}var No=new I("",{providedIn:"root",factory:()=>k(No,N.Optional|N.SkipSelf)||VT()}),Vm=new I("",{providedIn:"root",factory:()=>lT});var jm=new I("");function $s(t){return!!t.platformInjector}function jT(t){let e=$s(t)?t.r3Injector:t.moduleRef.injector,n=e.get(B);return n.run(()=>{$s(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(nt,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),$s(t)){let s=()=>e.destroy(),o=t.platformInjector.get(jm);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{qs(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return RT(r,n,()=>{let s=e.get(Lm);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(No,ho);if(dT(o||ho),$s(t)){let a=e.get(gi);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return UT(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function UT(t,e){let n=t.injector.get(gi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new D(-403,!1);e.push(t)}var Ys=null;function BT(t=[],e){return Ce.create({name:e,providers:[{provide:mo,useValue:"platform"},{provide:jm,useValue:new Set([()=>Ys=null])},...t]})}function HT(t=[]){if(Ys)return Ys;let e=BT(t);return Ys=e,AT(),$T(e),e}function $T(t){t.get(Wl,null)?.forEach(n=>n())}function Um(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=HT(r),s=[PT({}),{provide:rr,useExisting:LT},...n||[]],o=new lo({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return jT({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var Bm=new I("");function mi(t,e){ui("NgSignals");let n=Eh(t);return e?.equal&&(n[Et].equal=e.equal),n}function ot(t){let e=M(null);try{return t()}finally{M(e)}}var Gm=null;function ur(){return Gm}function zm(t){Gm??=t}var Mo=class{};var ct=new I("");var qm={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Ym=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Ym||{});var at={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function vi(t,e){let n=To(t),r=n[gn.NumberSymbols][e];if(typeof r>"u"){if(e===at.CurrencyDecimal)return n[gn.NumberSymbols][at.Decimal];if(e===at.CurrencyGroup)return n[gn.NumberSymbols][at.Group]}return r}function GT(t,e){return To(t)[gn.NumberFormats][e]}function zT(t){return To(t)[gn.Currencies]}function qT(t,e,n="en"){let r=zT(n)[t]||qm[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var YT=2;function KT(t){let e,n=qm[t];return n&&(e=n[2]),typeof e=="number"?e:YT}var ZT=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Hm=22,Ro=".",yi="0",QT=";",JT=",",ou="#",$m="\xA4";function XT(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=vi(n,at.Infinity);else{let l=rS(t);o&&(l=nS(l));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(s){let R=s.match(ZT);if(R===null)throw new Error(`${s} is not a valid digit info`);let K=R[1],Z=R[3],ye=R[5];K!=null&&(u=au(K)),Z!=null&&(d=au(Z)),ye!=null?f=au(ye):Z!=null&&d>f&&(f=d)}iS(l,d,f);let h=l.digits,g=l.integerLen,v=l.exponent,y=[];for(c=h.every(R=>!R);g<u;g++)h.unshift(0);for(;g<0;g++)h.unshift(0);g>0?y=h.splice(g,h.length):(y=h,h=[0]);let S=[];for(h.length>=e.lgSize&&S.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)S.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&S.unshift(h.join("")),a=S.join(vi(n,r)),y.length&&(a+=vi(n,i)+y.join("")),v&&(a+=vi(n,at.Exponential)+"+"+v)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function eS(t,e,n,r,i){let s=GT(e,Ym.Currency),o=tS(s,vi(e,at.MinusSign));return o.minFrac=KT(r),o.maxFrac=o.minFrac,XT(t,o,e,at.CurrencyGroup,at.CurrencyDecimal,i).replace($m,n).replace($m,"").trim()}function tS(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(QT),i=r[0],s=r[1],o=i.indexOf(Ro)!==-1?i.split(Ro):[i.substring(0,i.lastIndexOf(yi)+1),i.substring(i.lastIndexOf(yi)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(ou));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===yi?n.minFrac=n.maxFrac=u+1:d===ou?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(JT);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=i.length-n.posPre.length-n.posSuf.length,d=s.indexOf(ou);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function nS(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function rS(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Ro))>-1&&(e=e.replace(Ro,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===yi;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===yi;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>Hm&&(r=r.splice(0,Hm-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function iS(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,u=r.reduceRight(function(d,f,h,g){return f=f+d,g[h]=f<10?f:f-10,c&&(g[h]===0&&h>=l?g.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function au(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Km(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function sS(t,e){return new D(2100,!1)}var Zm=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,s="symbol",o,a){if(!oS(r))return null;a||=this._locale,typeof s=="boolean"&&(s=s?"symbol":"code");let c=i||this._defaultCurrencyCode;s!=="code"&&(s==="symbol"||s==="symbol-narrow"?c=qT(c,s==="symbol"?"wide":"narrow",a):c=s);try{let l=aS(r);return eS(l,a,c,i,o)}catch(l){throw sS(e,l.message)}}};e.\u0275fac=function(i){return new(i||e)(W(No,16),W(Vm,16))},e.\u0275pipe=Yp({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function oS(t){return!(t==null||t===""||t!==t)}function aS(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Qm="browser",cS="server";function cu(t){return t===cS}var xo=class{};var du=class extends Mo{constructor(){super(...arguments),this.supportsDOMEvents=!0}},fu=class t extends du{static makeCurrent(){zm(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=uS();return n==null?null:dS(n)}resetBaseElement(){_i=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Km(document.cookie,e)}},_i=null;function uS(){return _i=_i||document.querySelector("base"),_i?_i.getAttribute("href"):null}function dS(t){return new URL(t,document.baseURI).pathname}var fS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Oo=new I(""),tv=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new D(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(P(Oo),P(B))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Ei=class{constructor(e){this._doc=e}},lu="ng-app-id",nv=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=cu(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${lu}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(lu),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(lu,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(P(ct),P($l),P(Gl,8),P(Rt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),uu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pu=/%COMP%/g,rv="%COMP%",hS=`_nghost-${rv}`,pS=`_ngcontent-${rv}`,gS=!0,mS=new I("",{providedIn:"root",factory:()=>gS});function vS(t){return pS.replace(pu,t)}function yS(t){return hS.replace(pu,t)}function iv(t,e){return e.map(n=>n.replace(pu,t))}var Jm=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=cu(c),this.defaultRenderer=new Ii(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===He.ShadowDom&&(i=z(U({},i),{encapsulation:He.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Po?s.applyToHost(r):s instanceof wi&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case He.Emulated:o=new Po(l,u,i,this.appId,d,a,c,f);break;case He.ShadowDom:return new hu(l,u,r,i,a,c,this.nonce,f);default:o=new wi(l,u,i,d,a,c,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(P(tv),P(nv),P($l),P(mS),P(ct),P(Rt),P(B),P(Gl))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Ii=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(uu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Xm(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Xm(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new D(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=uu[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=uu[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(rt.DashCase|rt.Important)?e.style.setProperty(n,r,i&rt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&rt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ur().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Xm(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var hu=class extends Ii{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=iv(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wi=class extends Ii{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?iv(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Po=class extends wi{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=vS(l),this.hostAttr=yS(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},_S=(()=>{let e=class e extends Ei{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(P(ct))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),ES=(()=>{let e=class e extends Ei{constructor(r){super(r),this.delegate=k(Bm,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(P(ct))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),ev=["alt","control","meta","shift"],IS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},DS=(()=>{let e=class e extends Ei{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ur().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),ev.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=IS[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),ev.forEach(a=>{if(a!==s){let c=wS[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(P(ct))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function sv(t,e){return Um(U({rootComponent:t},CS(e)))}function CS(t){return{appProviders:[...NS,...t?.providers??[]],platformProviders:AS}}function bS(){fu.makeCurrent()}function TS(){return new nt}function SS(){return zg(document),document}var AS=[{provide:Rt,useValue:Qm},{provide:Wl,useValue:bS,multi:!0},{provide:ct,useFactory:SS,deps:[]}];var NS=[{provide:mo,useValue:"root"},{provide:nt,useFactory:TS,deps:[]},{provide:Oo,useClass:_S,multi:!0,deps:[ct,B,Rt]},{provide:Oo,useClass:DS,multi:!0,deps:[ct]},{provide:Oo,useClass:ES,multi:!0},Jm,nv,tv,{provide:ir,useExisting:Jm},{provide:xo,useClass:fS,deps:[]},[]];var mu={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(t,e){if(!t)throw vn(e)},vn=function(t){return new Error("Firebase Database ("+mu.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var av=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},MS=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Fo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,o||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(av(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new vu;let f=s<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},vu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_u=function(t){let e=av(t);return Fo.encodeByteArray(e,!0)},Di=function(t){return _u(t).replace(/\./g,"")},Ci=function(t){try{return Fo.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cv(t){return lv(void 0,t)}function lv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!RS(n)||(t[n]=lv(t[n],e[n]));return t}function RS(t){return t!=="__proto__"}function xS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var OS=()=>xS().__FIREBASE_DEFAULTS__,PS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Ci(t[1]);return e&&JSON.parse(e)},Eu=()=>{try{return OS()||PS()||kS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Iu=t=>{var e,n;return(n=(e=Eu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uv=t=>{let e=Iu(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wu=()=>{var t;return(t=Eu())===null||t===void 0?void 0:t.config},Du=t=>{var e;return(e=Eu())===null||e===void 0?void 0:e[`_${t}`]};var xt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function dv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Di(JSON.stringify(n)),Di(JSON.stringify(o)),""].join(".")}function ie(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bi(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ie())}function fv(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Lo(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hv(){let t=ie();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ye(){return mu.NODE_CLIENT===!0||mu.NODE_ADMIN===!0}function pv(){try{return typeof indexedDB=="object"}catch{return!1}}function gv(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var FS="FirebaseError",Pe=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FS,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}},lt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LS(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pe(i,a,r)}};function LS(t,e){return t.replace(VS,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var VS=/\{\$([^}]+)}/g;function dr(t){return JSON.parse(t)}function J(t){return JSON.stringify(t)}var mv=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=dr(Ci(s[0])||""),n=dr(Ci(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var vv=function(t){let e=mv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},yv=function(t){let e=mv(t).claims;return typeof e=="object"&&e.admin===!0};function Ke(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ti(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Si(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function fr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(ov(s)&&ov(o)){if(!fr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function ov(t){return t!==null&&typeof t=="object"}function _n(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ko=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function _v(t,e){let n=new yu(t,e);return n.subscribe.bind(n)}var yu=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jS(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gu),i.error===void 0&&(i.error=gu),i.complete===void 0&&(i.complete=gu);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jS(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gu(){}function Vo(t,e){return`${t} failed: ${e} argument `}var Ev=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ai=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var M1=4*60*60*1e3;function de(t){return t&&t._delegate?t._delegate:t}var Te=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var En="[DEFAULT]";var jo=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new xt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BS(e))try{this.getOrInitializeService({instanceIdentifier:En})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=En){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=En){return this.instances.has(e)}getOptions(e=En){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:US(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=En){return this.component?this.component.multipleInstances?e:En:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function US(t){return t===En?void 0:t}function BS(t){return t.instantiationMode==="EAGER"}var Ni=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new jo(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var HS=[],L=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(L||{}),$S={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},WS=L.INFO,GS={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},zS=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=GS[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ot=class{constructor(e){this.name=e,this._logLevel=WS,this._logHandler=zS,this._userLogHandler=null,HS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$S[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...e),this._logHandler(this,L.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...e),this._logHandler(this,L.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,L.INFO,...e),this._logHandler(this,L.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,L.WARN,...e),this._logHandler(this,L.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...e),this._logHandler(this,L.ERROR,...e)}};var qS=(t,e)=>e.some(n=>t instanceof n),Iv,wv;function YS(){return Iv||(Iv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KS(){return wv||(wv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Dv=new WeakMap,bu=new WeakMap,Cv=new WeakMap,Cu=new WeakMap,Su=new WeakMap;function ZS(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ze(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dv.set(n,t)}).catch(()=>{}),Su.set(e,t),e}function QS(t){if(bu.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bu.set(t,e)}var Tu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ze(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bv(t){Tu=t(Tu)}function JS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Uo(this),e,...n);return Cv.set(r,e.sort?e.sort():[e]),Ze(r)}:KS().includes(t)?function(...e){return t.apply(Uo(this),e),Ze(Dv.get(this))}:function(...e){return Ze(t.apply(Uo(this),e))}}function XS(t){return typeof t=="function"?JS(t):(t instanceof IDBTransaction&&QS(t),qS(t,YS())?new Proxy(t,Tu):t)}function Ze(t){if(t instanceof IDBRequest)return ZS(t);if(Cu.has(t))return Cu.get(t);let e=XS(t);return e!==t&&(Cu.set(t,e),Su.set(e,t)),e}var Uo=t=>Su.get(t);function Sv(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Ze(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ze(o.result),c.oldVersion,c.newVersion,Ze(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var e0=["get","getKey","getAll","getAllKeys","count"],t0=["put","add","delete","clear"],Au=new Map;function Tv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Au.get(e))return Au.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=t0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e0.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Au.set(e,s),s}bv(t=>z(U({},t),{get:(e,n,r)=>Tv(e,n)||t.get(e,n,r),has:(e,n)=>!!Tv(e,n)||t.has(e,n)}));var Mu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n0(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function n0(t){let e=t.getComponent();return e?.type==="VERSION"}var Ru="@firebase/app",Av="0.10.10";var ut=new Ot("@firebase/app"),r0="@firebase/app-compat",i0="@firebase/analytics-compat",s0="@firebase/analytics",o0="@firebase/app-check-compat",a0="@firebase/app-check",c0="@firebase/auth",l0="@firebase/auth-compat",u0="@firebase/database",d0="@firebase/database-compat",f0="@firebase/functions",h0="@firebase/functions-compat",p0="@firebase/installations",g0="@firebase/installations-compat",m0="@firebase/messaging",v0="@firebase/messaging-compat",y0="@firebase/performance",_0="@firebase/performance-compat",E0="@firebase/remote-config",I0="@firebase/remote-config-compat",w0="@firebase/storage",D0="@firebase/storage-compat",C0="@firebase/firestore",b0="@firebase/vertexai-preview",T0="@firebase/firestore-compat",S0="firebase",A0="10.13.1";var xu="[DEFAULT]",N0={[Ru]:"fire-core",[r0]:"fire-core-compat",[s0]:"fire-analytics",[i0]:"fire-analytics-compat",[a0]:"fire-app-check",[o0]:"fire-app-check-compat",[c0]:"fire-auth",[l0]:"fire-auth-compat",[u0]:"fire-rtdb",[d0]:"fire-rtdb-compat",[f0]:"fire-fn",[h0]:"fire-fn-compat",[p0]:"fire-iid",[g0]:"fire-iid-compat",[m0]:"fire-fcm",[v0]:"fire-fcm-compat",[y0]:"fire-perf",[_0]:"fire-perf-compat",[E0]:"fire-rc",[I0]:"fire-rc-compat",[w0]:"fire-gcs",[D0]:"fire-gcs-compat",[C0]:"fire-fst",[T0]:"fire-fst-compat",[b0]:"fire-vertex","fire-js":"fire-js",[S0]:"fire-js-all"};var Mi=new Map,M0=new Map,Ou=new Map;function Nv(t,e){try{t.container.addComponent(e)}catch(n){ut.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kt(t){let e=t.name;if(Ou.has(e))return ut.debug(`There were multiple attempts to register component ${e}.`),!1;Ou.set(e,t);for(let n of Mi.values())Nv(n,t);for(let n of M0.values())Nv(n,t);return!0}function xi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dt(t){return t.settings!==void 0}var R0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pt=new lt("app","Firebase",R0);var Pu=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Te("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}};var Ft=A0;function Lu(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:xu,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Pt.create("bad-app-name",{appName:String(i)});if(n||(n=wu()),!n)throw Pt.create("no-options");let s=Mi.get(i);if(s){if(fr(n,s.options)&&fr(r,s.config))return s;throw Pt.create("duplicate-app",{appName:i})}let o=new Ni(i);for(let c of Ou.values())o.addComponent(c);let a=new Pu(n,r,o);return Mi.set(i,a),a}function hr(t=xu){let e=Mi.get(t);if(!e&&t===xu&&wu())return Lu();if(!e)throw Pt.create("no-app",{appName:t});return e}function Bo(){return Array.from(Mi.values())}function X(t,e,n){var r;let i=(r=N0[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ut.warn(a.join(" "));return}kt(new Te(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var x0="firebase-heartbeat-database",O0=1,Ri="firebase-heartbeat-store",Nu=null;function Ov(){return Nu||(Nu=Sv(x0,O0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ri)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pt.create("idb-open",{originalErrorMessage:t.message})})),Nu}function P0(t){return p(this,null,function*(){try{let n=(yield Ov()).transaction(Ri),r=yield n.objectStore(Ri).get(Pv(t));return yield n.done,r}catch(e){if(e instanceof Pe)ut.warn(e.message);else{let n=Pt.create("idb-get",{originalErrorMessage:e?.message});ut.warn(n.message)}}})}function Mv(t,e){return p(this,null,function*(){try{let r=(yield Ov()).transaction(Ri,"readwrite");yield r.objectStore(Ri).put(e,Pv(t)),yield r.done}catch(n){if(n instanceof Pe)ut.warn(n.message);else{let r=Pt.create("idb-set",{originalErrorMessage:n?.message});ut.warn(r.message)}}})}function Pv(t){return`${t.name}!${t.options.appId}`}var k0=1024,F0=30*24*60*60*1e3,ku=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Fu(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Rv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=F0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ut.warn(r)}})}getHeartbeatsHeader(){return p(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Rv(),{heartbeatsToSend:r,unsentEntries:i}=L0(this._heartbeatsCache.heartbeats),s=Di(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ut.warn(n),""}})}};function Rv(){return new Date().toISOString().substring(0,10)}function L0(t,e=k0){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Fu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return pv()?gv().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield P0(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Mv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Mv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function xv(t){return Di(JSON.stringify({version:2,heartbeats:t})).length}function V0(t){kt(new Te("platform-logger",e=>new Mu(e),"PRIVATE")),kt(new Te("heartbeat",e=>new ku(e),"PRIVATE")),X(Ru,Av,t),X(Ru,Av,"esm2017"),X("fire-js","")}V0("");var j0="firebase",U0="10.13.1";X(j0,U0,"app");var wn=new Mt("ANGULARFIRE2_VERSION");function $o(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Oi=(t,e)=>{let n=e?[e]:Bo(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},gr=class{constructor(){return Oi(B0)}},B0="app-check";function pr(){}var Ho=class{zone;delegate;constructor(e,n=hc){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Vu=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pr,{},pr,pr)),n.pipe(vc({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},mr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ho(Zone.current)),this.insideAngular=n.run(()=>new Ho(Zone.current,fc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(P(B))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Wo(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function H0(t){return Wo().ngZone.runOutsideAngular(()=>t())}function In(t){return Wo().ngZone.run(()=>t())}function $0(t){return W0(Wo())(t)}function W0(t){return function(n){return n=n.lift(new Vu(t.ngZone)),n.pipe(bt(t.outsideAngular),Ct(t.insideAngular))}}var G0=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),In(()=>t.apply(void 0,r))},ft=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=In(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pr,{},pr,pr))),r[s]=G0(r[s],n));let i=H0(()=>t.apply(this,r));if(!e)if(i instanceof G){let s=Wo();return i.pipe(bt(s.outsideAngular),Ct(s.insideAngular))}else return In(()=>i);return i instanceof G?i.pipe($0):i instanceof Promise?In(()=>new Promise((s,o)=>i.then(a=>In(()=>s(a)),a=>In(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:In(()=>i)};var ht=class{constructor(e){return e}},Dn=class{constructor(){return Bo()}};function z0(t){return t&&t.length===1?t[0]:new ht(hr())}var ju=new I("angularfire2._apps"),q0={provide:ht,useFactory:z0,deps:[[new ve,ju]]},Y0={provide:Dn,deps:[[new ve,ju]]};function K0(t){return(e,n)=>{let r=n.get(Rt);X("angularfire",wn.full,"core"),X("angularfire",wn.full,"app"),X("angular",Pm.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ht(i)}}function kv(t,...e){return ln([q0,Y0,{provide:ju,useFactory:K0(t),multi:!0,deps:[B,Ce,mr,...e]}])}var Fv=ft(Lu,!0);function Qv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Jv=Qv,Xv=new lt("auth","Firebase",Qv());var Zo=new Ot("@firebase/auth");function Z0(t,...e){Zo.logLevel<=L.WARN&&Zo.warn(`Auth (${Ft}): ${t}`,...e)}function zo(t,...e){Zo.logLevel<=L.ERROR&&Zo.error(`Auth (${Ft}): ${t}`,...e)}function Vt(t,...e){throw sd(t,...e)}function bn(t,...e){return sd(t,...e)}function ey(t,e,n){let r=Object.assign(Object.assign({},Jv()),{[e]:n});return new lt("auth","Firebase",r).create(e,{appName:t.name})}function Cn(t){return ey(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sd(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Xv.create(t,...e)}function E(t,e,...n){if(!t)throw sd(e,...n)}function pt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw zo(e),new Error(e)}function jt(t,e){t||pt(e)}function $u(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Q0(){return Lv()==="http:"||Lv()==="https:"}function Lv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function J0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q0()||fv()||"connection"in navigator)?navigator.onLine:!0}function X0(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Tn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,jt(n>e,"Short delay should be less than long delay!"),this.isMobile=bi()||Lo()}get(){return J0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function od(t,e){jt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Qo=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var eA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var tA=new Tn(3e4,6e4);function ad(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function yr(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return ty(t,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=_n(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),Qo.fetch()(ny(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},l))}))})}function ty(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},eA),e);try{let i=new Wu(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Go(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Go(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Go(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Go(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ey(t,u,l);Vt(t,u)}}catch(i){if(i instanceof Pe)throw i;Vt(t,"network-request-failed",{message:String(i)})}})}function nA(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let l=yield yr(t,e,n,r,i);return"mfaPendingCredential"in l&&Vt(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function ny(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?od(t.config,i):`${t.config.apiScheme}://${i}`}var Wu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bn(this.auth,"network-request-failed")),tA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Go(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=bn(t,e,r);return i.customData._tokenResponse=n,i}function rA(t,e){return p(this,null,function*(){return yr(t,"POST","/v1/accounts:delete",e)})}function ry(t,e){return p(this,null,function*(){return yr(t,"POST","/v1/accounts:lookup",e)})}function Pi(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cd(t,e=!1){return p(this,null,function*(){let n=de(t),r=yield n.getIdToken(e),i=ld(r);E(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Pi(Uu(i.auth_time)),issuedAtTime:Pi(Uu(i.iat)),expirationTime:Pi(Uu(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Uu(t){return Number(t)*1e3}function ld(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zo("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ci(n);return i?JSON.parse(i):(zo("Failed to decode base64 JWT payload"),null)}catch(i){return zo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Vv(t){let e=ld(t);return E(e,"internal-error"),E(typeof e.exp<"u","internal-error"),E(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Fi(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Pe&&iA(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function iA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Gu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Li=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Jo(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Fi(t,ry(n,{idToken:r}));E(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iy(s.providerUserInfo):[],a=sA(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Li(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function ud(t){return p(this,null,function*(){let e=de(t);yield Jo(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function sA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iy(t){return t.map(e=>{var{providerId:n}=e,r=pc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function oA(t,e){return p(this,null,function*(){let n=yield ty(t,{},()=>p(this,null,function*(){let r=_n({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ny(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Qo.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function aA(t,e){return p(this,null,function*(){return yr(t,"POST","/v2/accounts:revokeToken",ad(t,e))})}var ki=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){E(e.idToken,"internal-error"),E(typeof e.idToken<"u","internal-error"),E(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){E(e.length!==0,"internal-error");let n=Vv(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(E(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield oA(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(E(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(E(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(E(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return pt("not implemented")}};function Lt(t,e){E(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var vr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=pc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Li(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield Fi(this,this.stsTokenManager.getToken(this.auth,e));return E(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return cd(this,e)}reload(){return ud(this)}_assign(e){this!==e&&(E(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){E(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Jo(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(dt(this.auth.app))return Promise.reject(Cn(this.auth));let e=yield this.getIdToken();return yield Fi(this,rA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(l=n.createdAt)!==null&&l!==void 0?l:void 0,R=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:K,emailVerified:Z,isAnonymous:ye,providerData:te,stsTokenManager:Xe}=n;E(K&&Xe,e,"internal-error");let Lr=ki.fromJSON(this.name,Xe);E(typeof K=="string",e,"internal-error"),Lt(d,e.name),Lt(f,e.name),E(typeof Z=="boolean",e,"internal-error"),E(typeof ye=="boolean",e,"internal-error"),Lt(h,e.name),Lt(g,e.name),Lt(v,e.name),Lt(y,e.name),Lt(S,e.name),Lt(R,e.name);let Vr=new t({uid:K,auth:e,email:f,emailVerified:Z,displayName:d,isAnonymous:ye,photoURL:g,phoneNumber:h,tenantId:v,stsTokenManager:Lr,createdAt:S,lastLoginAt:R});return te&&Array.isArray(te)&&(Vr.providerData=te.map(lI=>Object.assign({},lI))),y&&(Vr._redirectEventId=y),Vr}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new ki;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Jo(s),s})}static _fromGetAccountInfoResponse(e,n,r){return p(this,null,function*(){let i=n.users[0];E(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?iy(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ki;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Li(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var jv=new Map;function gt(t){jt(t instanceof Function,"Expected a class definition");let e=jv.get(t);return e?(jt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jv.set(t,e),e)}var cA=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),zu=cA;function qo(t,e,n){return`firebase:${t}:${e}:${n}`}var Xo=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=qo(this.userKey,i.apiKey,s),this.fullPersistenceKey=qo("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?vr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(gt(zu),e,r);let i=(yield Promise.all(n.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||gt(zu),o=qo(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=vr._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Uv(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uy(e))return"Blackberry";if(dy(e))return"Webos";if(oy(e))return"Safari";if((e.includes("chrome/")||ay(e))&&!e.includes("edge/"))return"Chrome";if(ly(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function sy(t=ie()){return/firefox\//i.test(t)}function oy(t=ie()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ay(t=ie()){return/crios\//i.test(t)}function cy(t=ie()){return/iemobile/i.test(t)}function ly(t=ie()){return/android/i.test(t)}function uy(t=ie()){return/blackberry/i.test(t)}function dy(t=ie()){return/webos/i.test(t)}function dd(t=ie()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lA(t=ie()){var e;return dd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uA(){return hv()&&document.documentMode===10}function fy(t=ie()){return dd(t)||ly(t)||dy(t)||uy(t)||/windows phone/i.test(t)||cy(t)}function hy(t,e=[]){let n;switch(t){case"Browser":n=Uv(ie());break;case"Worker":n=`${Uv(ie())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ft}/${r}`}var qu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function dA(n){return p(this,arguments,function*(t,e={}){return yr(t,"GET","/v2/passwordPolicy",ad(t,e))})}var fA=6,Yu=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Ku=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ea(this),this.idTokenSubscription=new ea(this),this.beforeStateQueue=new qu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gt(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Xo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield ry(this,{idToken:e}),r=yield vr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(dt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return E(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Jo(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=X0()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(dt(this.app))return Promise.reject(Cn(this));let n=e?de(e):null;return n&&E(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&E(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return dt(this.app)?Promise.reject(Cn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return dt(this.app)?Promise.reject(Cn(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(gt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield dA(this),n=new Yu(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield aA(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&gt(e)||this._popupRedirectResolver;E(n,this,"argument-error"),this.redirectPersistenceManager=yield Xo.create(this,[gt(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(E(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return E(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Z0(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function fd(t){return de(t)}var ea=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=_v(n=>this.observer=n)}get next(){return E(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var hd={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hA(t){hd=t}function pA(t){return hd.loadJS(t)}function gA(){return hd.gapiScript}function py(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function pd(t,e){let n=xi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(fr(s,e??{}))return i;Vt(i,"already-initialized")}return n.initialize({options:e})}function mA(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(gt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function gd(t,e,n){let r=fd(t);E(r._canInitEmulator,r,"emulator-config-failed"),E(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=gy(e),{host:o,port:a}=vA(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||yA()}function gy(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vA(t){let e=gy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Bv(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Bv(o)}}}function Bv(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function yA(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ta=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pt("not implemented")}_getIdTokenResponse(e){return pt("not implemented")}_linkToIdToken(e,n){return pt("not implemented")}_getReauthenticationResolver(e){return pt("not implemented")}};function Bu(t,e){return p(this,null,function*(){return nA(t,"POST","/v1/accounts:signInWithIdp",ad(t,e))})}var na=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Zu=class extends na{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Vi=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let s=yield vr._fromIdTokenResponse(e,r,i),o=Hv(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Hv(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Hv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Qu=class t extends Pe{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function my(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qu._fromErrorAndOperation(t,s,e,r):s})}function _A(t,e,n=!1){return p(this,null,function*(){let r=yield Fi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Vi._forOperation(t,"link",r)})}function EA(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t;if(dt(r.app))return Promise.reject(Cn(r));let i="reauthenticate";try{let s=yield Fi(t,my(r,i,e,t),n);E(s.idToken,r,"internal-error");let o=ld(s.idToken);E(o,r,"internal-error");let{sub:a}=o;return E(t.uid===a,r,"user-mismatch"),Vi._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Vt(r,"user-mismatch"),s}})}function IA(t,e,n=!1){return p(this,null,function*(){if(dt(t.app))return Promise.reject(Cn(t));let r="signIn",i=yield my(t,r,e),s=yield Vi._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function md(t,e,n,r){return de(t).onIdTokenChanged(e,n,r)}function vd(t,e,n){return de(t).beforeAuthStateChanged(e,n)}var ra="__sak";var ia=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ra,"1"),this.storage.removeItem(ra),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var wA=1e3,DA=10,CA=(()=>{class t extends ia{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fy(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);uA()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,DA):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},wA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield Gt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield Gt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield Gt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),vy=CA;var bA=(()=>{class t extends ia{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),yd=bA;function TA(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var SA=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,o)})),l=yield TA(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function yy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Ju=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=yy("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Qe(){return window}function AA(t){Qe().location.href=t}function _y(){return typeof Qe().WorkerGlobalScope<"u"&&typeof Qe().importScripts=="function"}function NA(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function MA(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RA(){return _y()?self:null}var Ey="firebaseLocalStorageDb",xA=1,sa="firebaseLocalStorage",Iy="fbase_key",Sn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function aa(t,e){return t.transaction([sa],e?"readwrite":"readonly").objectStore(sa)}function OA(){let t=indexedDB.deleteDatabase(Ey);return new Sn(t).toPromise()}function Xu(){let t=indexedDB.open(Ey,xA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(sa,{keyPath:Iy})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(sa)?e(r):(r.close(),yield OA(),e(yield Xu()))}))})}function $v(t,e,n){return p(this,null,function*(){let r=aa(t,!0).put({[Iy]:e,value:n});return new Sn(r).toPromise()})}function PA(t,e){return p(this,null,function*(){let n=aa(t,!1).get(e),r=yield new Sn(n).toPromise();return r===void 0?null:r.value})}function Wv(t,e){let n=aa(t,!0).delete(e);return new Sn(n).toPromise()}var kA=800,FA=3,LA=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield Xu(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>FA)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return _y()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=SA._getInstance(RA()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield NA(),!this.activeServiceWorker)return;this.sender=new Ju(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||MA()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Xu();return yield $v(n,ra,"1"),yield Wv(n,ra),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>$v(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>PA(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>Wv(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(s=>{let o=aa(s,!1).getAll();return new Sn(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),kA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),wy=LA;var bV=py("rcb"),TV=new Tn(3e4,6e4);function VA(t,e){return e?gt(e):(E(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var ji=class extends ta{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bu(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function jA(t){return IA(t.auth,new ji(t),t.bypassAuthState)}function UA(t){let{auth:e,user:n}=t;return E(n,e,"internal-error"),EA(n,new ji(t),t.bypassAuthState)}function BA(t){return p(this,null,function*(){let{auth:e,user:n}=t;return E(n,e,"internal-error"),_A(n,new ji(t),t.bypassAuthState)})}var ed=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jA;case"linkViaPopup":case"linkViaRedirect":return BA;case"reauthViaPopup":case"reauthViaRedirect":return UA;default:Vt(this.auth,"internal-error")}}resolve(e){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var SV=new Tn(2e3,1e4);var HA="pendingRedirect",Yo=new Map,td=class t extends ed{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=Yo.get(this.auth._key());if(!e){try{let r=(yield $A(this.resolver,this.auth))?yield Gt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yo.set(this.auth._key(),e)}return this.bypassAuthState||Yo.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return Gt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Gt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function $A(t,e){return p(this,null,function*(){let n=zA(e),r=GA(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function WA(t,e){Yo.set(t._key(),e)}function GA(t){return gt(t._redirectPersistence)}function zA(t){return qo(HA,t.config.apiKey,t.name)}function qA(t,e,n=!1){return p(this,null,function*(){if(dt(t.app))return Promise.reject(Cn(t));let r=fd(t),i=VA(r,e),o=yield new td(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var YA=10*60*1e3,nd=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Dy(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gv(e))}saveEventToCache(e){this.cachedEventUids.add(Gv(e)),this.lastProcessedEventTime=Date.now()}};function Gv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dy({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function KA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dy(t);default:return!1}}function ZA(n){return p(this,arguments,function*(t,e={}){return yr(t,"GET","/v1/projects",e)})}var QA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JA=/^https?/;function XA(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield ZA(t);for(let n of e)try{if(eN(n))return}catch{}Vt(t,"unauthorized-domain")})}function eN(t){let e=$u(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!JA.test(n))return!1;if(QA.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var tN=new Tn(3e4,6e4);function zv(){let t=Qe().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nN(t){return new Promise((e,n)=>{var r,i,s;function o(){zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zv(),n(bn(t,"network-request-failed"))},timeout:tN.get()})}if(!((i=(r=Qe().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Qe().gapi)===null||s===void 0)&&s.load)o();else{let a=py("iframefcb");return Qe()[a]=()=>{gapi.load?o():n(bn(t,"network-request-failed"))},pA(`${gA()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Ko=null,e})}var Ko=null;function rN(t){return Ko=Ko||nN(t),Ko}var iN=new Tn(5e3,15e3),sN="__/auth/iframe",oN="emulator/auth/iframe",aN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lN(t){let e=t.config;E(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?od(e,oN):`https://${t.config.authDomain}/${sN}`,r={apiKey:e.apiKey,appName:t.name,v:Ft},i=cN.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_n(r).slice(1)}`}function uN(t){return p(this,null,function*(){let e=yield rN(t),n=Qe().gapi;return E(n,t,"internal-error"),e.open({where:document.body,url:lN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aN,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=bn(t,"network-request-failed"),a=Qe().setTimeout(()=>{s(o)},iN.get());function c(){Qe().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var dN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fN=500,hN=600,pN="_blank",gN="http://localhost",oa=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function mN(t,e,n,r=fN,i=hN){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},dN),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ie().toLowerCase();n&&(a=ay(l)?pN:n),sy(l)&&(e=e||gN,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(lA(l)&&a!=="_self")return vN(e||"",a),new oa(null);let d=window.open(e||"",a,u);E(d,t,"popup-blocked");try{d.focus()}catch{}return new oa(d)}function vN(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var yN="__/auth/handler",_N="emulator/auth/handler",EN=encodeURIComponent("fac");function qv(t,e,n,r,i,s){return p(this,null,function*(){E(t.config.authDomain,t,"auth-domain-config-required"),E(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ft,eventId:i};if(e instanceof na){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ti(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Zu){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${EN}=${encodeURIComponent(c)}`:"";return`${IN(t)}?${_n(a).slice(1)}${l}`})}function IN({config:t}){return t.emulator?od(t,_N):`https://${t.authDomain}/${yN}`}var Hu="webStorageSupport",rd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yd,this._completeRedirectFn=qA,this._overrideRedirectResult=WA}_openPopup(e,n,r,i){return p(this,null,function*(){var s;jt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield qv(e,n,r,$u(),i);return mN(e,o,yy())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield qv(e,n,r,$u(),i);return AA(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(jt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield uN(e),r=new nd(e);return n.register("authEvent",i=>(E(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hu,{type:Hu},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Hu];o!==void 0&&n(!!o),Vt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fy()||oy()||dd()}},Cy=rd;var Yv="@firebase/auth",Kv="1.7.8";var id=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){E(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function wN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DN(t){kt(new Te("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;E(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hy(t)},l=new Ku(r,i,s,c);return mA(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),kt(new Te("auth-internal",e=>{let n=fd(e.getProvider("auth").getImmediate());return(r=>new id(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),X(Yv,Kv,wN(t)),X(Yv,Kv,"esm2017")}var CN=5*60,bN=Du("authIdTokenMaxAge")||CN,Zv=null,TN=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>bN)return;let i=n?.token;Zv!==i&&(Zv=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function _d(t=hr()){let e=xi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=pd(t,{popupRedirectResolver:Cy,persistence:[wy,vy,yd]}),r=Du("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=TN(s.toString());vd(n,o,()=>o(n.currentUser)),md(n,a=>o(a))}}let i=Iu("auth");return i&&gd(n,`http://${i}`),n}function SN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hA({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=bn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",SN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DN("Browser");var by="auth",Ui=class{constructor(e){return e}},Bi=class{constructor(){return Oi(by)}};var Ed=new I("angularfire2.auth-instances");function IM(t,e){let n=$o(by,t,e);return n&&new Ui(n)}function wM(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ui(r)}}var DM={provide:Bi,deps:[[new ve,Ed]]},CM={provide:Ui,useFactory:IM,deps:[[new ve,Ed],ht]};function Ty(t,...e){return X("angularfire",wn.full,"auth"),ln([CM,DM,{provide:Ed,useFactory:wM(t),multi:!0,deps:[B,Ce,mr,Dn,[new ve,gr],...e]}])}var Sy=ft(_d,!0);var Ay="@firebase/database",Ny="1.0.7";var Tf="";function bM(t){Tf=t}var Ad=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),J(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:dr(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Nd=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ke(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var l_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ad(e)}}catch{}return new Nd},Nn=l_("localStorage"),Md=l_("sessionStorage");var Ir=new Ot("@firebase/database"),TM=function(){let t=1;return function(){return t++}}(),u_=function(t){let e=Ev(t),n=new ko;n.update(e);let r=n.digest();return Fo.encodeByteArray(r)},rs=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=rs.apply(null,r):typeof r=="object"?e+=J(r):e+=r,e+=" "}return e},Rn=null,My=!0,SM=function(t,e){m(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ir.logLevel=L.VERBOSE,Rn=Ir.log.bind(Ir),e&&Md.set("logging_enabled",!0)):typeof t=="function"?Rn=t:(Rn=null,Md.remove("logging_enabled"))},se=function(...t){if(My===!0&&(My=!1,Rn===null&&Md.get("logging_enabled")===!0&&SM(!0)),Rn){let e=rs.apply(null,t);Rn(e)}},is=function(t){return function(...e){se(t,...e)}},Rd=function(...t){let e="FIREBASE INTERNAL ERROR: "+rs(...t);Ir.error(e)},mt=function(...t){let e=`FIREBASE FATAL ERROR: ${rs(...t)}`;throw Ir.error(e),new Error(e)},he=function(...t){let e="FIREBASE WARNING: "+rs(...t);Ir.warn(e)},AM=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&he("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},d_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},NM=function(t){if(Ye()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Cr="[MIN_NAME]",xn="[MAX_NAME]",Rr=function(t,e){if(t===e)return 0;if(t===Cr||e===xn)return-1;if(e===Cr||t===xn)return 1;{let n=Ry(t),r=Ry(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},MM=function(t,e){return t===e?0:t<e?-1:1},Hi=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+J(e))},Sf=function(t){if(typeof t!="object"||t===null)return J(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=J(e[r]),n+=":",n+=Sf(t[e[r]]);return n+="}",n},f_=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function pe(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var h_=function(t){m(!d_(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},RM=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xM=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function OM(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var PM=new RegExp("^-?(0*)\\d{1,10}$"),kM=-2147483648,FM=2147483647,Ry=function(t){if(PM.test(t)){let e=Number(t);if(e>=kM&&e<=FM)return e}return null},xr=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw he("Exception was thrown by user callback.",n),e},Math.floor(0))}},LM=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qi=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var xd=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){he(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Od=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(se("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',he(e)}},Yi=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),la="5",p_="v",g_="s",m_="r",v_="f",y_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,__="ls",E_="p",Pd="ac",I_="websocket",w_="long_polling";var ua=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Nn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Nn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function VM(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function D_(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let r;if(e===I_)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===w_)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);VM(t)&&(n.ns=t.namespace);let i=[];return pe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var kd=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Ke(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return cv(this.counters_)}};var Id={},wd={};function Af(t){let e=t.toString();return Id[e]||(Id[e]=new kd),Id[e]}function jM(t,e){let n=t.toString();return wd[n]||(wd[n]=e()),wd[n]}var Fd=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&xr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var xy="start",UM="close",BM="pLPCommand",HM="pRTLPCB",C_="id",b_="pw",T_="ser",$M="cb",WM="seg",GM="ts",zM="d",qM="dframe",S_=1870,A_=30,YM=S_-A_,KM=25e3,ZM=3e4,Ld=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=is(e),this.stats_=Af(n),this.urlFn=c=>(this.appCheckToken&&(c[Pd]=this.appCheckToken),D_(n,w_,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fd(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZM)),NM(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vd((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===xy)this.id=a,this.password=c;else if(o===UM)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[xy]="t",r[T_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$M]=this.scriptTagHolder.uniqueCallbackIdentifier),r[p_]=la,this.transportSessionId&&(r[g_]=this.transportSessionId),this.lastSessionId&&(r[__]=this.lastSessionId),this.applicationId&&(r[E_]=this.applicationId),this.appCheckToken&&(r[Pd]=this.appCheckToken),typeof location<"u"&&location.hostname&&y_.test(location.hostname)&&(r[m_]=v_);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Ye()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!RM()&&!xM()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=J(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=_u(n),i=f_(r,YM);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Ye())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[qM]="t",r[C_]=e,r[b_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=J(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Vd=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ye())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=TM(),window[BM+this.uniqueCallbackIdentifier]=e,window[HM+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){se("frame writing exception"),a.stack&&se(a.stack),se(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||se("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[C_]=this.myID,e[b_]=this.myPW,e[T_]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+A_+r.length<=S_;){let o=this.pendingSegs.shift();r=r+"&"+WM+i+"="+o.seg+"&"+GM+i+"="+o.ts+"&"+zM+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(KM)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Ye()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{se("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var QM=16384,JM=45e3,da=null;typeof MozWebSocket<"u"?da=MozWebSocket:typeof WebSocket<"u"&&(da=WebSocket);var $i=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=is(this.connId),this.stats_=Af(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[p_]=la,!Ye()&&typeof location<"u"&&location.hostname&&y_.test(location.hostname)&&(a[m_]=v_),r&&(a[g_]=r),i&&(a[__]=i),s&&(a[Pd]=s),o&&(a[E_]=o),D_(n,I_,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Nn.set("previous_websocket_failure",!0);try{let i;if(Ye()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${la}/${Tf}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new da(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&da!==null&&!t.forceDisallow_}static previouslyFailed(){return Nn.isInMemoryStorage||Nn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Nn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=dr(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(m(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=J(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=f_(r,QM);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(JM))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),XM=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ld,$i]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=$i&&$i.isAvailable(),i=r&&!$i.previouslyFailed();if(n.webSocketOnly&&(r||he("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$i];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),eR=6e4,tR=5e3,nR=10*1024,rR=100*1024,Dd="t",Oy="d",iR="s",Py="r",sR="e",ky="o",Fy="a",Ly="n",Vy="p",oR="h",jd=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=is("c:"+this.id+":"),this.transportManager_=new XM(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rR?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Dd in e){let n=e[Dd];n===Fy?this.upgradeIfSecondaryHealthy_():n===Py?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ky&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Hi("t",e),r=Hi("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Vy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Fy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ly,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Hi("t",e),r=Hi("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Hi(Dd,e);if(Oy in e){let r=e[Oy];if(n===oR){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Ly){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iR?this.onConnectionShutdown_(r):n===Py?this.onReset_(r):n===sR?Rd("Server Error: "+r):n===ky?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rd("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),la!==r&&he("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eR))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tR))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Vy,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Nn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var fa=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var ha=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var pa=class t extends ha{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bi()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var jy=32,Uy=768,V=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function F(){return new V("")}function b(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Bt(t){return t.pieces_.length-t.pieceNum_}function H(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function N_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function aR(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function M_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function R_(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function ee(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new V(n,0)}function A(t){return t.pieceNum_>=t.pieces_.length}function fe(t,e){let n=b(t),r=b(e);if(n===null)return e;if(n===r)return fe(H(t),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Nf(t,e){if(Bt(t)!==Bt(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Fe(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Bt(t)>Bt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Ud=class{constructor(e,n){this.errorPrefix_=n,this.parts_=M_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ai(this.parts_[r]);x_(this)}};function cR(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ai(e),x_(t)}function lR(t){let e=t.parts_.pop();t.byteLength_-=Ai(e),t.parts_.length>0&&(t.byteLength_-=1)}function x_(t){if(t.byteLength_>Uy)throw new Error(t.errorPrefix_+"has a key path longer than "+Uy+" bytes ("+t.byteLength_+").");if(t.parts_.length>jy)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jy+") or object contains a cycle "+An(t))}function An(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Bd=class t extends ha{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var Wi=1e3,uR=60*5*1e3,By=30*1e3,dR=1.3,fR=3e4,hR="server_kill",Hy=3,Mf=(()=>{class t extends fa{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=is("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wi,this.maxReconnectDelay_=uR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Ye())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bd.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&pa.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(J(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new xt,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ke(n,"w")){let i=yn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();he(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||yv(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=By)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=vv(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+J(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Rd("Unrecognized action received from server: "+J(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fR&&(this.reconnectDelay_=Wi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dR)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?se("getToken() completed but was canceled"):(se("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new jd(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{he(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(hR)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&he(f),l())}}})}interrupt(n){se("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){se("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ti(this.interruptReasons_)&&(this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Sf(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new V(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){se("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Hy&&(this.reconnectDelay_=By,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){se("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Hy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Ye()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Tf.replace(/\./g,"-")]=1,bi()?n["framework.cordova"]=1:Lo()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=pa.getInstance().currentlyOnline();return Ti(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),T=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var br=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new T(Cr,e),i=new T(Cr,n);return this.compare(r,i)!==0}minPost(){return T.MIN}};var ca,ga=class extends br{static get __EMPTY_NODE(){return ca}static set __EMPTY_NODE(e){ca=e}compare(e,n){return Rr(e.name,n.name)}isDefinedOn(e){throw vn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return T.MIN}maxPost(){return new T(xn,ca)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new T(e,ca)}toString(){return".key"}},wr=new ga;var Er=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ke=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Se.EMPTY_NODE,this.right=o??Se.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Se.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Se.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Hd=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new ke(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Se=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ke.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ke.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Er(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Er(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Er(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Er(this.root_,null,this.comparator_,!0,e)}};Se.EMPTY_NODE=new Hd;function pR(t,e){return Rr(t.name,e.name)}function Rf(t,e){return Rr(t,e)}var $d;function gR(t){$d=t}var O_=function(t){return typeof t=="number"?"number:"+h_(t):"string:"+t},P_=function(t){if(t.isLeafNode()){let e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ke(e,".sv"),"Priority must be a string or number.")}else m(t===$d||t.isEmpty(),"priority of unexpected type.");m(t===$d||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var $y,Tr=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),P_(this.priorityNode_)}static set __childrenNodeConstructor(n){$y=n}static get __childrenNodeConstructor(){return $y}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return A(n)?this:b(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=b(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||Bt(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+O_(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=h_(this.value_):n+=this.value_,this.lazyHash_=u_(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(m(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return m(s>=0,"Unknown leaf type: "+r),m(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),k_,F_;function mR(t){k_=t}function vR(t){F_=t}var Wd=class extends br{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Rr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return T.MIN}maxPost(){return new T(xn,new Tr("[PRIORITY-POST]",F_))}makePost(e,n){let r=k_(e);return new T(n,new Tr("[PRIORITY-POST]",r))}toString(){return".priority"}},q=new Wd;var yR=Math.log(2),Gd=class{constructor(e){let n=s=>parseInt(Math.log(s)/yR,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ma=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new ke(f,d.node,ke.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),v=i(h+1,l);return d=t[h],f=n?n(d):d,new ke(f,d.node,ke.BLACK,g,v)}},s=function(c){let l=null,u=null,d=t.length,f=function(g,v){let y=d-g,S=d;d-=g;let R=i(y+1,S),K=t[y],Z=n?n(K):K;h(new ke(Z,K.node,v,null,R))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let v=c.nextBitIsOne(),y=Math.pow(2,c.count-(g+1));v?f(y,ke.BLACK):(f(y,ke.BLACK),f(y,ke.RED))}return u},o=new Gd(t.length),a=s(o);return new Se(r||e,a)};var Cd,_r={},Sr=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return m(_r&&q,"ChildrenNode.ts has not been loaded"),Cd=Cd||new t({".priority":_r},{".priority":q}),Cd}get(e){let n=yn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Se?n:null}hasIndex(e){return Ke(this.indexSet_,e.toString())}addIndex(e,n){m(e!==wr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(T.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ma(r,e.getCompare()):a=_r;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Si(this.indexes_,(i,s)=>{let o=yn(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),i===_r)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(T.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),ma(a,o.getCompare())}else return _r;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new T(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Si(this.indexes_,i=>{if(i===_r)return i;{let s=n.get(e.name);return s?i.remove(new T(e.name,s)):i}});return new t(r,this.indexSet_)}};var Gi,w=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&P_(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gi||(Gi=new t(new Se(Rf),null,Sr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gi}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Gi:r}}getChild(n){let r=b(n);return r===null?this:this.getImmediateChild(r).getChild(H(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(m(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new T(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Gi:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=b(n);if(i===null)return r;{m(b(n)!==".priority"||Bt(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(H(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(q,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+O_(this.getPriority().val())+":"),this.forEachChild(q,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":u_(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new T(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new T(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new T(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,T.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,T.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ss?-1:0}withIndex(n){if(n===wr||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===wr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(q),s=r.getIterator(q),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===wr?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),zd=class extends w{constructor(){super(new Se(Rf),w.EMPTY_NODE,Sr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return w.EMPTY_NODE}isEmpty(){return!1}},ss=new zd;Object.defineProperties(T,{MIN:{value:new T(Cr,w.EMPTY_NODE)},MAX:{value:new T(xn,ss)}});ga.__EMPTY_NODE=w.EMPTY_NODE;Tr.__childrenNodeConstructor=w;gR(ss);vR(ss);var _R=!0;function re(t,e=null){if(t===null)return w.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Tr(n,re(e))}if(!(t instanceof Array)&&_R){let n=[],r=!1;if(pe(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=re(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new T(o,c)))}}),n.length===0)return w.EMPTY_NODE;let s=ma(n,pR,o=>o.name,Rf);if(r){let o=ma(n,q.getCompare());return new w(s,re(e),new Sr({".priority":o},{".priority":q}))}else return new w(s,re(e),Sr.Default)}else{let n=w.EMPTY_NODE;return pe(t,(r,i)=>{if(Ke(t,r)&&r.substring(0,1)!=="."){let s=re(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(re(e))}}mR(re);var qd=class extends br{constructor(e){super(),this.indexPath_=e,m(!A(e)&&b(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Rr(e.name,n.name):s}makePost(e,n){let r=re(e),i=w.EMPTY_NODE.updateChild(this.indexPath_,r);return new T(n,i)}maxPost(){let e=w.EMPTY_NODE.updateChild(this.indexPath_,ss);return new T(xn,e)}toString(){return M_(this.indexPath_,0).join("/")}};var Yd=class extends br{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Rr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return T.MIN}maxPost(){return T.MAX}makePost(e,n){let r=re(e);return new T(n,r)}toString(){return".value"}},ER=new Yd;function L_(t){return{type:"value",snapshotNode:t}}function Ar(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ji(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Xi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function IR(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var es=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ji(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ar(n,r)):o.trackChildChange(Xi(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(q,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ji(i,s))}),n.isLeafNode()||n.forEachChild(q,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Xi(i,s,o))}else r.trackChildChange(Ar(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?w.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var va=class t{constructor(e){this.indexedFilter_=new es(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new T(n,r))||(r=w.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=w.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(w.EMPTY_NODE);let s=this;return n.forEachChild(q,(o,a)=>{s.matches(new T(o,a))||(i=i.updateImmediateChild(o,w.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Kd=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new va(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new T(n,r))||(r=w.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=w.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=w.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(w.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,w.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new T(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,c);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(Xi(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(Ji(n,d));let v=a.updateImmediateChild(n,w.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(Ar(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Ji(l.name,l.node)),s.trackChildChange(Ar(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,w.EMPTY_NODE)):e}};var Zd=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=q}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cr}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===q}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function wR(t){return t.loadsAllData()?new es(t.getIndex()):t.hasLimit()?new Kd(t):new va(t)}function Wy(t){let e={};if(t.isDefault())return e;let n;if(t.index_===q?n="$priority":t.index_===ER?n="$value":t.index_===wr?n="$key":(m(t.index_ instanceof qd,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=J(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=J(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+J(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=J(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+J(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Gy(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==q&&(e.i=t.index_.toString()),e}var Qd=class t extends fa{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=is("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=Wy(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),yn(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Wy(e._queryParams),r=e._path.toString(),i=new xt;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_n(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=dr(a.responseText)}catch{he("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&he("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Jd=class{constructor(){this.rootNode_=w.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function ya(){return{value:null,children:new Map}}function V_(t,e,n){if(A(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=b(e);t.children.has(r)||t.children.set(r,ya());let i=t.children.get(r);e=H(e),V_(i,e,n)}}function Xd(t,e,n){t.value!==null?n(e,t.value):DR(t,(r,i)=>{let s=new V(e.toString()+"/"+r);Xd(i,s,n)})}function DR(t,e){t.children.forEach((n,r)=>{e(r,n)})}var ef=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&pe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var zy=10*1e3,CR=30*1e3,bR=5*60*1e3,tf=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ef(e);let r=zy+(CR-zy)*Math.random();qi(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;pe(e,(i,s)=>{s>0&&Ke(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),qi(this.reportStats_.bind(this),Math.floor(Math.random()*2*bR))}};var Je=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Je||{});function j_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Of(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var nf=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Je.ACK_USER_WRITE,this.source=j_()}operationForChild(e){if(A(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new V(e));return new t(F(),n,this.revert)}}else return m(b(this.path)===e,"operationForChild called for unrelated child."),new t(H(this.path),this.affectedTree,this.revert)}};var _a=class t{constructor(e,n){this.source=e,this.path=n,this.type=Je.LISTEN_COMPLETE}operationForChild(e){return A(this.path)?new t(this.source,F()):new t(this.source,H(this.path))}};var Nr=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Je.OVERWRITE}operationForChild(e){return A(this.path)?new t(this.source,F(),this.snap.getImmediateChild(e)):new t(this.source,H(this.path),this.snap)}};var Ea=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Je.MERGE}operationForChild(e){if(A(this.path)){let n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new Nr(this.source,F(),n.value):new t(this.source,F(),n)}else return m(b(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,H(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var vt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(A(e))return this.isFullyInitialized()&&!this.filtered_;let n=b(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var rf=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function TR(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(IR(o.childName,o.snapshotNode))}),zi(t,i,"child_removed",e,r,n),zi(t,i,"child_added",e,r,n),zi(t,i,"child_moved",s,r,n),zi(t,i,"child_changed",e,r,n),zi(t,i,"value",e,r,n),i}function zi(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>AR(t,a,c)),o.forEach(a=>{let c=SR(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function SR(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function AR(t,e,n){if(e.childName==null||n.childName==null)throw vn("Should only compare child_ events.");let r=new T(e.childName,e.snapshotNode),i=new T(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Ra(t,e){return{eventCache:t,serverCache:e}}function Ki(t,e,n,r){return Ra(new vt(e,n,r),t.serverCache)}function U_(t,e,n,r){return Ra(t.eventCache,new vt(e,n,r))}function sf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function On(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var bd,NR=()=>(bd||(bd=new Se(MM)),bd),ge=class t{constructor(e,n=NR()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return pe(e,(r,i)=>{n=n.set(new V(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:F(),value:this.value};if(A(e))return null;{let r=b(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(H(e),n);return s!=null?{path:ee(new V(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(A(e))return this;{let n=b(e),r=this.children.get(n);return r!==null?r.subtree(H(e)):new t(null)}}set(e,n){if(A(e))return new t(n,this.children);{let r=b(e),s=(this.children.get(r)||new t(null)).set(H(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(A(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=b(e),r=this.children.get(n);if(r){let i=r.remove(H(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(A(e))return this.value;{let n=b(e),r=this.children.get(n);return r?r.get(H(e)):null}}setTree(e,n){if(A(e))return n;{let r=b(e),s=(this.children.get(r)||new t(null)).setTree(H(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(F(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ee(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,F(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(A(e))return null;{let s=b(e),o=this.children.get(s);return o?o.findOnPath_(H(e),ee(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,F(),n)}foreachOnPath_(e,n,r){if(A(e))return this;{this.value&&r(n,this.value);let i=b(e),s=this.children.get(i);return s?s.foreachOnPath_(H(e),ee(n,i),r):new t(null)}}foreach(e){this.foreach_(F(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ee(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Le=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new ge(null))}};function Zi(t,e,n){if(A(e))return new Le(new ge(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=fe(i,e);return s=s.updateChild(o,n),new Le(t.writeTree_.set(i,s))}else{let i=new ge(n),s=t.writeTree_.setTree(e,i);return new Le(s)}}}function qy(t,e,n){let r=t;return pe(n,(i,s)=>{r=Zi(r,ee(e,i),s)}),r}function Yy(t,e){if(A(e))return Le.empty();{let n=t.writeTree_.setTree(e,new ge(null));return new Le(n)}}function of(t,e){return kn(t,e)!=null}function kn(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(fe(n.path,e)):null}function Ky(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(q,(r,i)=>{e.push(new T(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new T(r,i.value))}),e}function Ut(t,e){if(A(e))return t;{let n=kn(t,e);return n!=null?new Le(new ge(n)):new Le(t.writeTree_.subtree(e))}}function af(t){return t.writeTree_.isEmpty()}function Mr(t,e){return B_(F(),t.writeTree_,e)}function B_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=B_(ee(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ee(t,".priority"),r)),n}}function Pf(t,e){return G_(e,t)}function MR(t,e,n,r,i){m(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Zi(t.visibleWrites,e,n)),t.lastWriteId=r}function RR(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function xR(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&OR(a,r.path)?i=!1:Fe(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return PR(t),!0;if(r.snap)t.visibleWrites=Yy(t.visibleWrites,r.path);else{let a=r.children;pe(a,c=>{t.visibleWrites=Yy(t.visibleWrites,ee(r.path,c))})}return!0}else return!1}function OR(t,e){if(t.snap)return Fe(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Fe(ee(t.path,n),e))return!0;return!1}function PR(t){t.visibleWrites=H_(t.allWrites,kR,F()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function kR(t){return t.visible}function H_(t,e,n){let r=Le.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Fe(n,o)?(a=fe(n,o),r=Zi(r,a,s.snap)):Fe(o,n)&&(a=fe(o,n),r=Zi(r,F(),s.snap.getChild(a)));else if(s.children){if(Fe(n,o))a=fe(n,o),r=qy(r,a,s.children);else if(Fe(o,n))if(a=fe(o,n),A(a))r=qy(r,F(),s.children);else{let c=yn(s.children,b(a));if(c){let l=c.getChild(H(a));r=Zi(r,F(),l)}}}else throw vn("WriteRecord should have .snap or .children")}}return r}function $_(t,e,n,r,i){if(!r&&!i){let s=kn(t.visibleWrites,e);if(s!=null)return s;{let o=Ut(t.visibleWrites,e);if(af(o))return n;if(n==null&&!of(o,F()))return null;{let a=n||w.EMPTY_NODE;return Mr(o,a)}}}else{let s=Ut(t.visibleWrites,e);if(!i&&af(s))return n;if(!i&&n==null&&!of(s,F()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Fe(l.path,e)||Fe(e,l.path))},a=H_(t.allWrites,o,e),c=n||w.EMPTY_NODE;return Mr(a,c)}}}function FR(t,e,n){let r=w.EMPTY_NODE,i=kn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(q,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ut(t.visibleWrites,e);return n.forEachChild(q,(o,a)=>{let c=Mr(Ut(s,new V(o)),a);r=r.updateImmediateChild(o,c)}),Ky(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ut(t.visibleWrites,e);return Ky(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function LR(t,e,n,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ee(e,n);if(of(t.visibleWrites,s))return null;{let o=Ut(t.visibleWrites,s);return af(o)?i.getChild(n):Mr(o,i.getChild(n))}}function VR(t,e,n,r){let i=ee(e,n),s=kn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ut(t.visibleWrites,i);return Mr(o,r.getNode().getImmediateChild(n))}else return null}function jR(t,e){return kn(t.visibleWrites,e)}function UR(t,e,n,r,i,s,o){let a,c=Ut(t.visibleWrites,e),l=kn(c,F());if(l!=null)a=l;else if(n!=null)a=Mr(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function BR(){return{visibleWrites:Le.empty(),allWrites:[],lastWriteId:-1}}function Ia(t,e,n,r){return $_(t.writeTree,t.treePath,e,n,r)}function kf(t,e){return FR(t.writeTree,t.treePath,e)}function Zy(t,e,n,r){return LR(t.writeTree,t.treePath,e,n,r)}function wa(t,e){return jR(t.writeTree,ee(t.treePath,e))}function HR(t,e,n,r,i,s){return UR(t.writeTree,t.treePath,e,n,r,i,s)}function Ff(t,e,n){return VR(t.writeTree,t.treePath,e,n)}function W_(t,e){return G_(ee(t.treePath,e),t.writeTree)}function G_(t,e){return{treePath:t,writeTree:e}}var cf=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Xi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ji(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ar(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Xi(r,e.snapshotNode,i.oldSnap));else throw vn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var lf=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},z_=new lf,ts=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new vt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ff(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:On(this.viewCache_),s=HR(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function $R(t){return{filter:t}}function WR(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function GR(t,e,n,r,i){let s=new cf,o,a;if(n.type===Je.OVERWRITE){let l=n;l.source.fromUser?o=uf(t,e,l.path,l.snap,r,i,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!A(l.path),o=Da(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Je.MERGE){let l=n;l.source.fromUser?o=qR(t,e,l.path,l.children,r,i,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=df(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Je.ACK_USER_WRITE){let l=n;l.revert?o=ZR(t,e,l.path,r,i,s):o=YR(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Je.LISTEN_COMPLETE)o=KR(t,e,n.path,r,s);else throw vn("Unknown operation type: "+n.type);let c=s.getChanges();return zR(e,o,c),{viewCache:o,changes:c}}function zR(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=sf(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(L_(sf(e)))}}function q_(t,e,n,r,i,s){let o=e.eventCache;if(wa(r,n)!=null)return e;{let a,c;if(A(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=On(e),u=l instanceof w?l:w.EMPTY_NODE,d=kf(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Ia(r,On(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=b(n);if(l===".priority"){m(Bt(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=Zy(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=H(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=Zy(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=Ff(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Ki(e,a,o.isFullyInitialized()||A(n),t.filter.filtersNodes())}}function Da(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(A(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=b(n);if(!c.isCompleteForPath(n)&&Bt(n)>1)return e;let g=H(n),y=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),h,y,g,z_,null)}let d=U_(e,l,c.isFullyInitialized()||A(n),u.filtersNodes()),f=new ts(i,d,s);return q_(t,d,n,i,f,a)}function uf(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new ts(i,e,s);if(A(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ki(e,l,!0,t.filter.filtersNodes());else{let d=b(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ki(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=H(n),h=a.getNode().getImmediateChild(d),g;if(A(f))g=r;else{let v=u.getCompleteChild(d);v!=null?N_(f)===".priority"&&v.getChild(R_(f)).isEmpty()?g=v:g=v.updateChild(f,r):g=w.EMPTY_NODE}if(h.equals(g))c=e;else{let v=t.filter.updateChild(a.getNode(),d,g,f,u,o);c=Ki(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Qy(t,e){return t.eventCache.isCompleteForChild(e)}function qR(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=ee(n,c);Qy(e,b(u))&&(a=uf(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=ee(n,c);Qy(e,b(u))||(a=uf(t,a,u,l,i,s,o))}),a}function Jy(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function df(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;A(n)?l=r:l=new ge(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),g=Jy(t,h,f);c=Da(t,c,new V(d),g,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=e.serverCache.getNode().getImmediateChild(d),v=Jy(t,g,f);c=Da(t,c,new V(d),v,i,s,o,a)}}),c}function YR(t,e,n,r,i,s,o){if(wa(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(A(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Da(t,e,n,c.getNode().getChild(n),i,s,a,o);if(A(n)){let l=new ge(null);return c.getNode().forEachChild(wr,(u,d)=>{l=l.set(new V(u),d)}),df(t,e,n,l,i,s,a,o)}else return e}else{let l=new ge(null);return r.foreach((u,d)=>{let f=ee(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),df(t,e,n,l,i,s,a,o)}}function KR(t,e,n,r,i){let s=e.serverCache,o=U_(e,s.getNode(),s.isFullyInitialized()||A(n),s.isFiltered());return q_(t,o,n,r,z_,i)}function ZR(t,e,n,r,i,s){let o;if(wa(r,n)!=null)return e;{let a=new ts(r,e,i),c=e.eventCache.getNode(),l;if(A(n)||b(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ia(r,On(e));else{let d=e.serverCache.getNode();m(d instanceof w,"serverChildren would be complete if leaf node"),u=kf(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=b(n),d=Ff(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,H(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,w.EMPTY_NODE,H(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ia(r,On(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||wa(r,F())!=null,Ki(e,l,o,t.filter.filtersNodes())}}var ff=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new es(r.getIndex()),s=wR(r);this.processor_=$R(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(w.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(w.EMPTY_NODE,a.getNode(),null),u=new vt(c,o.isFullyInitialized(),i.filtersNodes()),d=new vt(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Ra(d,u),this.eventGenerator_=new rf(this.query_)}get query(){return this.query_}};function QR(t){return t.viewCache_.serverCache.getNode()}function JR(t,e){let n=On(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!A(e)&&!n.getImmediateChild(b(e)).isEmpty())?n.getChild(e):null}function Xy(t){return t.eventRegistrations_.length===0}function XR(t,e){t.eventRegistrations_.push(e)}function e_(t,e,n){let r=[];if(n){m(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function t_(t,e,n,r){e.type===Je.MERGE&&e.source.queryId!==null&&(m(On(t.viewCache_),"We should always have a full cache before handling merges"),m(sf(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=GR(t.processor_,i,e,n,r);return WR(t.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Y_(t,s.changes,s.viewCache.eventCache.getNode(),null)}function ex(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(q,(s,o)=>{r.push(Ar(s,o))}),n.isFullyInitialized()&&r.push(L_(n.getNode())),Y_(t,r,n.getNode(),e)}function Y_(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return TR(t.eventGenerator_,e,n,i)}var Ca,hf=class{constructor(){this.views=new Map}};function tx(t){m(!Ca,"__referenceConstructor has already been defined"),Ca=t}function nx(){return m(Ca,"Reference.ts has not been loaded"),Ca}function rx(t){return t.views.size===0}function Lf(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return m(s!=null,"SyncTree gave us an op for an invalid query."),t_(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(t_(o,e,n,r));return s}}function ix(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Ia(n,i?r:null),c=!1;a?c=!0:r instanceof w?(a=kf(n,r),c=!1):(a=w.EMPTY_NODE,c=!1);let l=Ra(new vt(a,c,!1),new vt(r,i,!1));return new ff(e,l)}return o}function sx(t,e,n,r,i,s){let o=ix(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),XR(o,n),ex(o,n)}function ox(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=Ht(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(e_(l,n,r)),Xy(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(e_(c,n,r)),Xy(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Ht(t)&&s.push(new(nx())(e._repo,e._path)),{removed:s,events:o}}function K_(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Dr(t,e){let n=null;for(let r of t.views.values())n=n||JR(r,e);return n}function Z_(t,e){if(e._queryParams.loadsAllData())return xa(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Q_(t,e){return Z_(t,e)!=null}function Ht(t){return xa(t)!=null}function xa(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var ba;function ax(t){m(!ba,"__referenceConstructor has already been defined"),ba=t}function cx(){return m(ba,"Reference.ts has not been loaded"),ba}var lx=1,Ta=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ge(null),this.pendingWriteTree_=BR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function J_(t,e,n,r,i){return MR(t.pendingWriteTree_,e,n,r,i),i?os(t,new Nr(j_(),e,n)):[]}function Mn(t,e,n=!1){let r=RR(t.pendingWriteTree_,e);if(xR(t.pendingWriteTree_,e)){let s=new ge(null);return r.snap!=null?s=s.set(F(),!0):pe(r.children,o=>{s=s.set(new V(o),!0)}),os(t,new nf(r.path,s,n))}else return[]}function Oa(t,e,n){return os(t,new Nr(xf(),e,n))}function ux(t,e,n){let r=ge.fromObject(n);return os(t,new Ea(xf(),e,r))}function dx(t,e){return os(t,new _a(xf(),e))}function fx(t,e,n){let r=jf(t,n);if(r){let i=Uf(r),s=i.path,o=i.queryId,a=fe(s,e),c=new _a(Of(o),a);return Bf(t,s,c)}else return[]}function pf(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||Q_(o,e))){let c=ox(o,e,n,r);rx(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,h)=>Ht(h));if(u&&!d){let f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=gx(f);for(let g=0;g<h.length;++g){let v=h[g],y=v.query,S=tE(t,v);t.listenProvider_.startListening(Qi(y),Sa(t,y),S.hashFn,S.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Qi(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Pa(f));t.listenProvider_.stopListening(Qi(f),h)}))}mx(t,l)}return a}function hx(t,e,n,r){let i=jf(t,r);if(i!=null){let s=Uf(i),o=s.path,a=s.queryId,c=fe(o,e),l=new Nr(Of(a),c,n);return Bf(t,o,l)}else return[]}function px(t,e,n,r){let i=jf(t,r);if(i){let s=Uf(i),o=s.path,a=s.queryId,c=fe(o,e),l=ge.fromObject(n),u=new Ea(Of(a),c,l);return Bf(t,o,u)}else return[]}function n_(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=fe(f,i);s=s||Dr(h,g),o=o||Ht(h)});let a=t.syncPointTree_.get(i);a?(o=o||Ht(a),s=s||Dr(a,F())):(a=new hf,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=w.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,g)=>{let v=Dr(g,F());v&&(s=s.updateImmediateChild(h,v))}));let l=Q_(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Pa(e);m(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=vx();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Pf(t.pendingWriteTree_,i),d=sx(a,e,n,u,s,c);if(!l&&!o&&!r){let f=Z_(a,e);d=d.concat(yx(t,e,f))}return d}function Vf(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=fe(o,e),l=Dr(a,c);if(l)return l});return $_(i,e,s,n,!0)}function os(t,e){return X_(e,t.syncPointTree_,null,Pf(t.pendingWriteTree_,F()))}function X_(t,e,n,r){if(A(t.path))return eE(t,e,n,r);{let i=e.get(F());n==null&&i!=null&&(n=Dr(i,F()));let s=[],o=b(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=W_(r,o);s=s.concat(X_(a,c,l,u))}return i&&(s=s.concat(Lf(i,t,r,n))),s}}function eE(t,e,n,r){let i=e.get(F());n==null&&i!=null&&(n=Dr(i,F()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=W_(r,o),u=t.operationForChild(o);u&&(s=s.concat(eE(u,a,c,l)))}),i&&(s=s.concat(Lf(i,t,r,n))),s}function tE(t,e){let n=e.query,r=Sa(t,n);return{hashFn:()=>(QR(e)||w.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?fx(t,n._path,r):dx(t,n._path);{let s=OM(i,n);return pf(t,n,null,s)}}}}function Sa(t,e){let n=Pa(e);return t.queryToTagMap.get(n)}function Pa(t){return t._path.toString()+"$"+t._queryIdentifier}function jf(t,e){return t.tagToQueryMap.get(e)}function Uf(t){let e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}}function Bf(t,e,n){let r=t.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=Pf(t.pendingWriteTree_,e);return Lf(r,n,i,null)}function gx(t){return t.fold((e,n,r)=>{if(n&&Ht(n))return[xa(n)];{let i=[];return n&&(i=K_(n)),pe(r,(s,o)=>{i=i.concat(o)}),i}})}function Qi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(cx())(t._repo,t._path):t}function mx(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Pa(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function vx(){return lx++}function yx(t,e,n){let r=e._path,i=Sa(t,e),s=tE(t,n),o=t.listenProvider_.startListening(Qi(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)m(!Ht(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!A(l)&&u&&Ht(u))return[xa(u).query];{let f=[];return u&&(f=f.concat(K_(u).map(h=>h.query))),pe(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Qi(u),Sa(t,u))}}return o}var gf=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},mf=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ee(this.path_,e);return new t(this.syncTree_,n)}node(){return Vf(this.syncTree_,this.path_)}},_x=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},r_=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Ex(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Ix(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Ex=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},Ix=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},wx=function(t,e,n,r){return Hf(e,new mf(n,t),r)},nE=function(t,e,n){return Hf(t,new gf(e),n)};function Hf(t,e,n){let r=t.getPriority().val(),i=r_(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=r_(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Tr(a,re(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Tr(i))),o.forEachChild(q,(a,c)=>{let l=Hf(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var ns=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function $f(t,e){let n=e instanceof V?e:new V(e),r=t,i=b(n);for(;i!==null;){let s=yn(r.node.children,i)||{children:{},childCount:0};r=new ns(i,r,s),n=H(n),i=b(n)}return r}function Or(t){return t.node.value}function rE(t,e){t.node.value=e,vf(t)}function iE(t){return t.node.childCount>0}function Dx(t){return Or(t)===void 0&&!iE(t)}function ka(t,e){pe(t.node.children,(n,r)=>{e(new ns(n,t,r))})}function sE(t,e,n,r){n&&!r&&e(t),ka(t,i=>{sE(i,e,!0,r)}),n&&r&&e(t)}function Cx(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function as(t){return new V(t.parent===null?t.name:as(t.parent)+"/"+t.name)}function vf(t){t.parent!==null&&bx(t.parent,t.name,t)}function bx(t,e,n){let r=Dx(n),i=Ke(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,vf(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,vf(t))}var Tx=/[\[\].#$\/\u0000-\u001F\u007F]/,Sx=/[\[\].#$\u0000-\u001F\u007F]/,Td=10*1024*1024,oE=function(t){return typeof t=="string"&&t.length!==0&&!Tx.test(t)},aE=function(t){return typeof t=="string"&&t.length!==0&&!Sx.test(t)},Ax=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),aE(t)};var cE=function(t,e,n,r){r&&e===void 0||Wf(Vo(t,"value"),e,n)},Wf=function(t,e,n){let r=n instanceof V?new Ud(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+An(r));if(typeof e=="function")throw new Error(t+"contains a function "+An(r)+" with contents = "+e.toString());if(d_(e))throw new Error(t+"contains "+e.toString()+" "+An(r));if(typeof e=="string"&&e.length>Td/3&&Ai(e)>Td)throw new Error(t+"contains a string greater than "+Td+" utf8 bytes "+An(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(pe(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!oE(o)))throw new Error(t+" contains an invalid key ("+o+") "+An(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cR(r,o),Wf(t,a,r),lR(r)}),i&&s)throw new Error(t+' contains ".value" child '+An(r)+" in addition to actual children.")}};var lE=function(t,e,n,r){if(!(r&&n===void 0)&&!aE(n))throw new Error(Vo(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Nx=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lE(t,e,n,r)},uE=function(t,e){if(b(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Mx=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!oE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Ax(n))throw new Error(Vo(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var yf=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Gf(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Nf(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function dE(t,e,n){Gf(t,n),fE(t,r=>Nf(r,e))}function yt(t,e,n){Gf(t,n),fE(t,r=>Fe(r,e)||Fe(e,r))}function fE(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(Rx(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Rx(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Rn&&se("event: "+n.toString()),xr(r)}}}var xx="repo_interrupt",Ox=25,_f=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ya(),this.transactionQueueTree_=new ns,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Px(t,e,n){if(t.stats_=Af(t.repoInfo_),t.forceRestClient_||LM())t.server_=new Qd(t.repoInfo_,(r,i,s,o)=>{i_(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>s_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{J(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Mf(t.repoInfo_,e,(r,i,s,o)=>{i_(t,r,i,s,o)},r=>{s_(t,r)},r=>{kx(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=jM(t.repoInfo_,()=>new tf(t.stats_,t.server_)),t.infoData_=new Jd,t.infoSyncTree_=new Ta({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Oa(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),qf(t,"connected",!1),t.serverSyncTree_=new Ta({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);yt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function hE(t){let n=t.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zf(t){return _x({timestamp:hE(t)})}function i_(t,e,n,r,i){t.dataUpdateCount++;let s=new V(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Si(n,l=>re(l));o=px(t.serverSyncTree_,s,c,i)}else{let c=re(n);o=hx(t.serverSyncTree_,s,c,i)}else if(r){let c=Si(n,l=>re(l));o=ux(t.serverSyncTree_,s,c)}else{let c=re(n);o=Oa(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Fa(t,s)),yt(t.eventQueue_,a,o)}function s_(t,e){qf(t,"connected",e),e===!1&&Lx(t)}function kx(t,e){pe(e,(n,r)=>{qf(t,n,r)})}function qf(t,e,n){let r=new V("/.info/"+e),i=re(n);t.infoData_.updateSnapshot(r,i);let s=Oa(t.infoSyncTree_,r,i);yt(t.eventQueue_,r,s)}function pE(t){return t.nextWriteId_++}function Fx(t,e,n,r,i){Yf(t,"set",{path:e.toString(),value:n,priority:r});let s=zf(t),o=re(n,r),a=Vf(t.serverSyncTree_,e),c=nE(o,a,s),l=pE(t),u=J_(t.serverSyncTree_,e,c,l,!0);Gf(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,h)=>{let g=f==="ok";g||he("set at "+e+" failed: "+f);let v=Mn(t.serverSyncTree_,l,!g);yt(t.eventQueue_,e,v),Ux(t,i,f,h)});let d=_E(t,e);Fa(t,d),yt(t.eventQueue_,d,[])}function Lx(t){Yf(t,"onDisconnectEvents");let e=zf(t),n=ya();Xd(t.onDisconnect_,F(),(i,s)=>{let o=wx(i,s,t.serverSyncTree_,e);V_(n,i,o)});let r=[];Xd(n,F(),(i,s)=>{r=r.concat(Oa(t.serverSyncTree_,i,s));let o=_E(t,i);Fa(t,o)}),t.onDisconnect_=ya(),yt(t.eventQueue_,F(),r)}function Vx(t,e,n){let r;b(e._path)===".info"?r=n_(t.infoSyncTree_,e,n):r=n_(t.serverSyncTree_,e,n),dE(t.eventQueue_,e._path,r)}function o_(t,e,n){let r;b(e._path)===".info"?r=pf(t.infoSyncTree_,e,n):r=pf(t.serverSyncTree_,e,n),dE(t.eventQueue_,e._path,r)}function jx(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xx)}function Yf(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),se(n,...e)}function Ux(t,e,n,r){e&&xr(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function gE(t,e,n){return Vf(t.serverSyncTree_,e,n)||w.EMPTY_NODE}function Kf(t,e=t.transactionQueueTree_){if(e||La(t,e),Or(e)){let n=vE(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Bx(t,as(e),n)}else iE(e)&&ka(e,n=>{Kf(t,n)})}function Bx(t,e,n){let r=n.map(l=>l.currentWriteId),i=gE(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=fe(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Yf(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Mn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();La(t,$f(t.transactionQueueTree_,e)),Kf(t,t.transactionQueueTree_),yt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)xr(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{he("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Fa(t,e)}},o)}function Fa(t,e){let n=mE(t,e),r=as(n),i=vE(t,n);return Hx(t,i,r),r}function Hx(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=fe(n,c.path),u=!1,d;if(m(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Mn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Ox)u=!0,d="maxretry",i=i.concat(Mn(t.serverSyncTree_,c.currentWriteId,!0));else{let f=gE(t,c.path,o);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Wf("transaction failed: Data returned ",h,c.path);let g=re(h);typeof h=="object"&&h!=null&&Ke(h,".priority")||(g=g.updatePriority(f.getPriority()));let y=c.currentWriteId,S=zf(t),R=nE(g,f,S);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=R,c.currentWriteId=pE(t),o.splice(o.indexOf(y),1),i=i.concat(J_(t.serverSyncTree_,c.path,R,c.currentWriteId,c.applyLocally)),i=i.concat(Mn(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",i=i.concat(Mn(t.serverSyncTree_,c.currentWriteId,!0))}yt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}La(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)xr(r[a]);Kf(t,t.transactionQueueTree_)}function mE(t,e){let n,r=t.transactionQueueTree_;for(n=b(e);n!==null&&Or(r)===void 0;)r=$f(r,n),e=H(e),n=b(e);return r}function vE(t,e){let n=[];return yE(t,e,n),n.sort((r,i)=>r.order-i.order),n}function yE(t,e,n){let r=Or(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ka(e,i=>{yE(t,i,n)})}function La(t,e){let n=Or(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,rE(e,n.length>0?n:void 0)}ka(e,r=>{La(t,r)})}function _E(t,e){let n=as(mE(t,e)),r=$f(t.transactionQueueTree_,e);return Cx(r,i=>{Sd(t,i)}),Sd(t,r),sE(r,i=>{Sd(t,i)}),n}function Sd(t,e){let n=Or(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(m(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Mn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?rE(e,void 0):n.length=s+1,yt(t.eventQueue_,as(e),i);for(let o=0;o<r.length;o++)xr(r[o])}}function $x(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Wx(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):he(`Invalid query segment '${n}' in query '${t}'`)}return e}var a_=function(t,e){let n=Gx(t),r=n.namespace;n.domain==="firebase.com"&&mt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&mt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||AM();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ua(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new V(n.pathString)}},Gx=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=$x(t.substring(u,d)));let f=Wx(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var c_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zx=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=c_.charAt(n%64),n=Math.floor(n/64);m(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=c_.charAt(e[i]);return m(o.length===20,"nextPushId: Length should be 20."),o}}();var Aa=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+J(this.snapshot.exportVal())}},Na=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Ef=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var If=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return A(this._path)?null:N_(this._path)}get ref(){return new _t(this._repo,this._path)}get _queryIdentifier(){let e=Gy(this._queryParams),n=Sf(e);return n==="{}"?"default":n}get _queryObject(){return Gy(this._queryParams)}isEqual(e){if(e=de(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Nf(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+aR(this._path)}};var _t=class t extends If{constructor(e,n){super(e,n,new Zd,!1)}get parent(){let e=R_(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Ma=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new V(e),r=Pn(this.ref,e);return new t(this._node.getChild(n),r,q)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Pn(this.ref,r),q)))}hasChild(e){let n=new V(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function EE(t,e){return t=de(t),t._checkNotDeleted("ref"),e!==void 0?Pn(t._root,e):t._root}function Pn(t,e){return t=de(t),b(t._path)===null?Nx("child","path",e,!1):lE("child","path",e,!1),new _t(t._repo,ee(t._path,e))}function IE(t,e){t=de(t),uE("push",t._path),cE("push",e,t._path,!0);let n=hE(t._repo),r=zx(n),i=Pn(t,r),s=Pn(t,r),o;return e!=null?o=Zf(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Zf(t,e){t=de(t),uE("set",t._path),cE("set",e,t._path,!1);let n=new xt;return Fx(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var wf=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Aa("value",this,new Ma(e.snapshotNode,new _t(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Na(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Df=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Na(this,e,n):null}createEvent(e,n){m(e.childName!=null,"Child events should have a childName.");let r=Pn(new _t(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Aa(e.type,this,new Ma(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function qx(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{o_(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Ef(n,s||void 0),a=e==="value"?new wf(o):new Df(e,o);return Vx(t._repo,t,a),()=>o_(t._repo,t,a)}function Qf(t,e,n,r){return qx(t,"value",e,n,r)}tx(_t);ax(_t);var Yx="FIREBASE_DATABASE_EMULATOR_HOST",Cf={},Kx=!1;function Zx(t,e,n,r){t.repoInfo_=new ua(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Qx(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||mt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),se("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=a_(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Yx]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=a_(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Yi(Yi.OWNER):new Od(t.name,t.options,e);Mx("Invalid Firebase Database URL",o),A(o.path)||mt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=Xx(a,t,u,new xd(t.name,n));return new bf(d,t)}function Jx(t,e){let n=Cf[e];(!n||n[t.key]!==t)&&mt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),jx(t),delete n[t.key]}function Xx(t,e,n,r){let i=Cf[e.name];i||(i={},Cf[e.name]=i);let s=i[t.toURLString()];return s&&mt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new _f(t,Kx,n,r),i[t.toURLString()]=s,s}var bf=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Px(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _t(this._repo,F())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Jx(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&mt("Cannot call "+e+" on a deleted database.")}};function wE(t=hr(),e){let n=xi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=uv("database");r&&DE(n,...r)}return n}function DE(t,e,n,r={}){t=de(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&mt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&mt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Yi(Yi.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:dv(r.mockUserToken,t.app.options.projectId);s=new Yi(o)}Zx(i,e,n,s)}function eO(t){bM(Ft),kt(new Te("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Qx(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),X(Ay,Ny,t),X(Ay,Ny,"esm2017")}Mf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Mf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eO();var Fn=class{constructor(e){return e}},CE="database",Jf=class{constructor(){return Oi(CE)}};var Xf=new I("angularfire2.database-instances");function tO(t,e){let n=$o(CE,t,e);return n&&new Fn(n)}function nO(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Fn(r)}}var rO={provide:Jf,deps:[[new ve,Xf]]},iO={provide:Fn,useFactory:tO,deps:[[new ve,Xf],ht]};function bE(t,...e){return X("angularfire",wn.full,"rtdb"),ln([iO,rO,{provide:Xf,useFactory:nO(t),multi:!0,deps:[B,Ce,mr,Dn,[new ve,Bi],[new ve,gr],...e]}])}var TE=ft(wE,!0);var SE=ft(IE,!0);var eh=ft(EE,!0);var AE=ft(Zf,!0);var FE=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(W(li),W(ar))},e.\u0275dir=xe({type:e});let t=e;return t})(),LE=(()=>{let e=class e extends FE{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ul(e)))(s||e)}})(),e.\u0275dir=xe({type:e,features:[st]});let t=e;return t})(),ih=new I("");var oO={provide:ih,useExisting:cn(()=>qa),multi:!0};function aO(){let t=ur()?ur().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var cO=new I(""),qa=(()=>{let e=class e extends FE{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!aO())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(W(li),W(ar),W(cO,8))},e.\u0275dir=xe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&mn("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[hi([oO]),st]});let t=e;return t})();function $t(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function VE(t){return t!=null&&typeof t.length=="number"}var jE=new I(""),UE=new I(""),lO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ln=class{static min(e){return uO(e)}static max(e){return dO(e)}static required(e){return fO(e)}static requiredTrue(e){return hO(e)}static email(e){return pO(e)}static minLength(e){return gO(e)}static maxLength(e){return mO(e)}static pattern(e){return vO(e)}static nullValidator(e){return BE(e)}static compose(e){return qE(e)}static composeAsync(e){return KE(e)}};function uO(t){return e=>{if($t(e.value)||$t(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function dO(t){return e=>{if($t(e.value)||$t(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function fO(t){return $t(t.value)?{required:!0}:null}function hO(t){return t.value===!0?null:{required:!0}}function pO(t){return $t(t.value)||lO.test(t.value)?null:{email:!0}}function gO(t){return e=>$t(e.value)||!VE(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function mO(t){return e=>VE(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function vO(t){if(!t)return BE;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if($t(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function BE(t){return null}function HE(t){return t!=null}function $E(t){return pi(t)?gc(t):t}function WE(t){let e={};return t.forEach(n=>{e=n!=null?U(U({},e),n):e}),Object.keys(e).length===0?null:e}function GE(t,e){return e.map(n=>n(t))}function yO(t){return!t.validate}function zE(t){return t.map(e=>yO(e)?e:n=>e.validate(n))}function qE(t){if(!t)return null;let e=t.filter(HE);return e.length==0?null:function(n){return WE(GE(n,e))}}function YE(t){return t!=null?qE(zE(t)):null}function KE(t){if(!t)return null;let e=t.filter(HE);return e.length==0?null:function(n){let r=GE(n,e).map($E);return mc(r).pipe(Zt(WE))}}function ZE(t){return t!=null?KE(zE(t)):null}function NE(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function QE(t){return t._rawValidators}function JE(t){return t._rawAsyncValidators}function th(t){return t?Array.isArray(t)?t:[t]:[]}function ja(t,e){return Array.isArray(t)?t.includes(e):t===e}function ME(t,e){let n=th(e);return th(t).forEach(i=>{ja(n,i)||n.push(i)}),n}function RE(t,e){return th(e).filter(n=>!ja(t,n))}var Ua=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ZE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Fr=class extends Ua{get formDirective(){return null}get path(){return null}},fs=class extends Ua{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ba=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},_O={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},bU=z(U({},_O),{"[class.ng-submitted]":"isSubmitted"}),XE=(()=>{let e=class e extends Ba{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(W(fs,2))},e.\u0275dir=xe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&bo("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[st]});let t=e;return t})(),eI=(()=>{let e=class e extends Ba{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(W(Fr,10))},e.\u0275dir=xe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&bo("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[st]});let t=e;return t})();var cs="VALID",Va="INVALID",Pr="PENDING",ls="DISABLED",Wt=class{},Ha=class extends Wt{constructor(e,n){super(),this.value=e,this.source=n}},us=class extends Wt{constructor(e,n){super(),this.pristine=e,this.source=n}},ds=class extends Wt{constructor(e,n){super(),this.touched=e,this.source=n}},kr=class extends Wt{constructor(e,n){super(),this.status=e,this.source=n}},nh=class extends Wt{constructor(e){super(),this.source=e}},rh=class extends Wt{constructor(e){super(),this.source=e}};function tI(t){return(Ya(t)?t.validators:t)||null}function EO(t){return Array.isArray(t)?YE(t):t||null}function nI(t,e){return(Ya(e)?e.asyncValidators:t)||null}function IO(t){return Array.isArray(t)?ZE(t):t||null}function Ya(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function wO(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new D(1e3,"");if(!r[n])throw new D(1001,"")}function DO(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new D(1002,"")})}var $a=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=mi(()=>this.statusReactive()),this.statusReactive=di(void 0),this._pristine=mi(()=>this.pristineReactive()),this.pristineReactive=di(!0),this._touched=mi(()=>this.touchedReactive()),this.touchedReactive=di(!1),this._events=new Ve,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ot(this.statusReactive)}set status(e){ot(()=>this.statusReactive.set(e))}get valid(){return this.status===cs}get invalid(){return this.status===Va}get pending(){return this.status==Pr}get disabled(){return this.status===ls}get enabled(){return this.status!==ls}get pristine(){return ot(this.pristineReactive)}set pristine(e){ot(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ot(this.touchedReactive)}set touched(e){ot(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ME(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ME(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RE(e,this._rawAsyncValidators))}hasValidator(e){return ja(this._rawValidators,e)}hasAsyncValidator(e){return ja(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(z(U({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ds(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ds(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(z(U({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new us(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new us(!0,r))}markAsPending(e={}){this.status=Pr;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new kr(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(z(U({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ls,this.errors=null,this._forEachChild(i=>{i.disable(z(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ha(this.value,r)),this._events.next(new kr(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(U({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=cs,this._forEachChild(r=>{r.enable(z(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(z(U({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cs||this.status===Pr)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ha(this.value,n)),this._events.next(new kr(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(z(U({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ls:cs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Pr,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=$E(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new kr(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?ls:this.errors?Va:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pr)?Pr:this._anyControlsHaveStatus(Va)?Va:cs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new us(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ds(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ya(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=EO(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=IO(this._rawAsyncValidators)}},Wa=class extends $a{constructor(e,n,r){super(tI(n),nI(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){DO(this,!0,e),Object.keys(e).forEach(r=>{wO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var rI=new I("CallSetDisabledState",{providedIn:"root",factory:()=>sh}),sh="always";function CO(t,e){return[...e.path,t]}function xE(t,e,n=sh){oh(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),TO(t,e),AO(t,e),SO(t,e),bO(t,e)}function OE(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),za(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ga(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bO(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function oh(t,e){let n=QE(t);e.validator!==null?t.setValidators(NE(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=JE(t);e.asyncValidator!==null?t.setAsyncValidators(NE(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Ga(e._rawValidators,i),Ga(e._rawAsyncValidators,i)}function za(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=QE(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=JE(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Ga(e._rawValidators,r),Ga(e._rawAsyncValidators,r),n}function TO(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&iI(t,e)})}function SO(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&iI(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function iI(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function AO(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function NO(t,e){t==null,oh(t,e)}function MO(t,e){return za(t,e)}function RO(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function xO(t){return Object.getPrototypeOf(t.constructor)===LE}function OO(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function PO(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===qa?n=s:xO(s)?r=s:i=s}),i||r||n||null}function kO(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function PE(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function kE(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var hs=class extends $a{constructor(e=null,n,r){super(tI(n),nI(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ya(n)&&(n.nonNullable||n.initialValueIsDefault)&&(kE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){PE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){PE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){kE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var FO=t=>t instanceof hs;var sI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=xe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),LO={provide:ih,useExisting:cn(()=>ah),multi:!0},ah=(()=>{let e=class e extends LE{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ul(e)))(s||e)}})(),e.\u0275dir=xe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&mn("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[hi([LO]),st]});let t=e;return t})();var oI=new I("");var VO={provide:Fr,useExisting:cn(()=>ch)},ch=(()=>{let e=class e extends Fr{get submitted(){return ot(this._submittedReactive)}set submitted(r){this._submittedReactive.set(r)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=mi(()=>this._submittedReactive()),this._submittedReactive=di(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new le,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(za(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return xE(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){OE(r.control||null,r,!1),kO(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this._submittedReactive.set(!0),OO(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new nh(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this._submittedReactive.set(!1),this.form._events.next(new rh(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(OE(i||null,r),FO(s)&&(xE(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);NO(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&MO(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){oh(this.form,this),this._oldForm&&za(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(W(jE,10),W(UE,10),W(rI,8))},e.\u0275dir=xe({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&mn("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[hi([VO]),st,ai]});let t=e;return t})();var jO={provide:fs,useExisting:cn(()=>lh)},lh=(()=>{let e=class e extends fs{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new le,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=PO(this,o)}ngOnChanges(r){this._added||this._setUpControl(),RO(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return CO(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(W(Fr,13),W(jE,10),W(UE,10),W(ih,10),W(oI,8))},e.\u0275dir=xe({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[hi([jO]),st,ai]});let t=e;return t})();var UO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=si({type:e}),e.\u0275inj=ri({});let t=e;return t})();var aI=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:oI,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:rI,useValue:r.callSetDisabledState??sh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=si({type:e}),e.\u0275inj=ri({imports:[UO]});let t=e;return t})();var Ka=class t{constructor(e){this.db=e}dbPath="/products";addProduct(e){let n=eh(this.db,this.dbPath),r=SE(n);AE(r,e).then(()=>console.log("Product added successfully!")).catch(i=>console.error("Error adding product: ",i))}getProducts(){let e=eh(this.db,this.dbPath);return new G(n=>{Qf(e,r=>{let i=r.val();n.next(i?Object.entries(i).map(([s,o])=>({key:s,value:o})):[])})})}createProductForm(){return new Wa({name:new hs("",Ln.required),price:new hs("",[Ln.required,Ln.min(0)]),description:new hs("",Ln.required)})}static \u0275fac=function(n){return new(n||t)(P(Fn))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function $O(t,e){if(t&1&&(be(0,"div")(1,"h3"),qe(2),ce(),be(3,"p"),qe(4),ce(),be(5,"p"),qe(6),xm(7,"currency"),ce()()),t&2){let n=e.$implicit;pn(2),So(n.value.name),pn(2),Ao(" ",n.value.description," "),pn(2),So(Om(7,3,n.value.price))}}var Za=class t{constructor(e){this.productService=e}title="testFirebase";productForm;products=[];ngOnInit(){this.productForm=this.productService.createProductForm(),this.productService.getProducts().subscribe(e=>{this.products=e,console.log(e)})}onSubmit(){this.productForm.valid&&(this.productService.addProduct(this.productForm.value),this.productForm.reset())}static \u0275fac=function(n){return new(n||t)(W(Ka))};static \u0275cmp=qp({type:t,selectors:[["app-root"]],standalone:!0,features:[Rm],decls:22,vars:2,consts:[[1,"container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","formControlName","name","type","text",1,"form-control"],["for","price"],["id","price","formControlName","price","type","number",1,"form-control"],["for","img"],["id","img","formControlName","description","type","text",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(n,r){n&1&&(qe(0,"welcome...! "),be(1,"div",0)(2,"h1"),qe(3,"Add New Product"),ce(),be(4,"form",1),mn("ngSubmit",function(){return r.onSubmit()}),be(5,"div",2)(6,"label",3),qe(7,"Product Name"),ce(),cr(8,"input",4),ce(),be(9,"div",2)(10,"label",5),qe(11,"Price"),ce(),cr(12,"input",6),ce(),be(13,"div",2)(14,"label",7),qe(15,"description"),ce(),cr(16,"input",8),ce(),be(17,"button",9),qe(18,"Add Product"),ce()(),cr(19,"hr"),Am(20,$O,8,5,"div",null,Sm),ce()),n&2&&(pn(4),Co("formGroup",r.productForm),pn(13),Co("disabled",!r.productForm.valid),pn(3),Nm(r.products))},dependencies:[Zm,aI,sI,qa,ah,XE,eI,ch,lh]})};var cI={production:!1,firebaseConfig:{apiKey:"AIzaSyDnJSTICyChUYYi87twY8f9XRaZmAeNDaA",authDomain:"testangular-66666.firebaseapp.com",databaseURL:"https://testangular-66666-default-rtdb.asia-southeast1.firebasedatabase.app/",projectId:"testangular-66666",storageBucket:"testangular-66666.appspot.com",messagingSenderId:"859113310407",appId:"1:859113310407:web:1997ddab460984170256e2",measurementId:"G-6CJWHZN9RE"}};sv(Za,{providers:[kv(()=>Fv(cI.firebaseConfig)),Ty(()=>Sy()),bE(()=>TE())]}).catch(t=>console.error(t));
